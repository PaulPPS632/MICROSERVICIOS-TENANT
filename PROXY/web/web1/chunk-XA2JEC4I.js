import{a as oi}from"./chunk-ZPTUBLJZ.js";import{a as ri}from"./chunk-GPQY2L4W.js";import{a as Le,b as Ne}from"./chunk-6JKU5AZE.js";import"./chunk-GPLEQ2JA.js";import{a as ae}from"./chunk-F7NXYMZD.js";import{a as ze}from"./chunk-TKELRS7M.js";import{a as tt}from"./chunk-A7ZA3IGE.js";import{a as ii,d as et}from"./chunk-XGW73OEQ.js";import{a as ni,b as G,c as ai,d as z,e as Z,f as Q,g as j,h as J,i as it,j as oe,k as te,l as ie,m as me,n as L}from"./chunk-P2X2ACJO.js";import{a as pe}from"./chunk-OYXVRMMP.js";import{c as ei,d as Ce,e as Ae,f as ti,g as ee,h as we,l as Ue}from"./chunk-4L4BNWNP.js";import{a as Se,b as Xt,c as U,e as H,f as Xe,g as ne}from"./chunk-VTA27IR3.js";import{$a as Je,$b as Kt,Aa as Qe,Ab as ve,B as xt,Bb as ye,Cb as _e,Eb as a,Fb as k,Gb as C,Hb as X,Ib as f,Jb as x,Kb as v,L as Lt,Lb as Zt,Ma as Rt,Mb as I,Oa as de,Ob as $e,Pb as Ye,Qb as Qt,R as vt,Ra as d,Rb as B,S as q,Sa as _,Sb as R,T as De,Tb as Jt,V as Nt,Wa as _t,X as O,Y as W,Ya as Re,a as It,aa as M,ab as Ut,ba as Fe,c as Pt,ca as zt,eb as E,g as Tt,gb as b,i as Vt,ia as Oe,ja as g,ka as p,kb as K,kc as St,la as y,lb as A,ma as S,mb as Ht,n as Dt,na as jt,nb as P,ob as T,p as Ft,pa as Wt,pb as i,qb as n,ra as qt,rb as m,rc as Ie,s as Ot,sa as Bt,sc as he,ta as N,tc as $,ua as yt,ub as w,v as At,vb as h,vc as ue,wa as re,wb as u,wc as D,x as Ze,xb as Gt,yb as Ke,yc as $t,zc as Yt}from"./chunk-LXSEPEJS.js";import{f as ge,g as Be}from"./chunk-GAL4ENT6.js";var He=ge(pe());var rt={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"],["table"]]},Ct=new Nt("config",{providedIn:"root",factory:()=>({modules:rt})});var zi=[[["","above-quill-editor-toolbar",""]],[["","quill-editor-toolbar",""]],[["","below-quill-editor-toolbar",""]]],ji=["[above-quill-editor-toolbar]","[quill-editor-toolbar]","[below-quill-editor-toolbar]"];function Wi(l,c){l&1&&m(0,"div",0)}function qi(l,c){l&1&&m(0,"div",0)}var nt=(l,c)=>l||c||"html",Bi=()=>new Pt(l=>{let c=requestAnimationFrame(()=>{l.next(),l.complete()});return()=>cancelAnimationFrame(c)}),Ri=(()=>{let c=class c{constructor(r,t){this.config=t,this.quill$=At(()=>Be(this,null,function*(){if(!this.Quill){let o=this.document.addEventListener;this.document.addEventListener=this.document.__zone_symbol__addEventListener||this.document.addEventListener;let s=yield import("./chunk-QH7V45P4.js");this.document.addEventListener=o,this.Quill=s.default?.default??s.default??s}return this.config.customOptions?.forEach(o=>{let s=this.Quill.import(o.import);s.whitelist=o.whitelist,this.Quill.register(s,!0,this.config.suppressGlobalRegisterWarning)}),yield this.registerCustomModules(this.Quill,this.config.customModules,this.config.suppressGlobalRegisterWarning)})).pipe(Lt({bufferSize:1,refCount:!0})),this.document=r.get(St),this.config||(this.config={modules:rt})}getQuill(){return this.quill$}registerCustomModules(r,t,o){return Be(this,null,function*(){if(Array.isArray(t))for(let{implementation:s,path:V}of t)Dt(s)&&(s=yield Ft(s)),r.register(V,s,o);return r})}};c.\u0275fac=function(t){return new(t||c)(O(Wt),O(Ct,8))},c.\u0275prov=q({token:c,factory:c.\u0275fac,providedIn:"root"});let l=c;return l})(),Ui=(()=>{let c=class c{constructor(){this.format=N(void 0),this.theme=N(void 0),this.modules=N(void 0),this.debug=N(!1),this.readOnly=N(!1),this.placeholder=N(void 0),this.maxLength=N(void 0),this.minLength=N(void 0),this.required=N(!1),this.formats=N(void 0),this.customToolbarPosition=N("top"),this.sanitize=N(void 0),this.beforeRender=N(void 0),this.styles=N(null),this.registry=N(void 0),this.bounds=N(void 0),this.customOptions=N([]),this.customModules=N([]),this.trackChanges=N(void 0),this.classes=N(void 0),this.trimOnValidation=N(!1),this.linkPlaceholder=N(void 0),this.compareValues=N(!1),this.filterNull=N(!1),this.debounceTime=N(void 0),this.defaultEmptyValue=N(null),this.onEditorCreated=new re,this.onEditorChanged=new re,this.onContentChanged=new re,this.onSelectionChanged=new re,this.onFocus=new re,this.onBlur=new re,this.onNativeFocus=new re,this.onNativeBlur=new re,this.disabled=!1,this.toolbarPosition=Je("top"),this.subscription=null,this.quillSubscription=null,this.elementRef=W(yt),this.document=W(St),this.cd=W(Kt),this.domSanitizer=W(ei),this.platformId=W(Qe),this.renderer=W(_t),this.zone=W(Re),this.service=W(Ri),this.destroyRef=W(qt),this.valueGetter=N(r=>{let t=r.getSemanticHTML();this.isEmptyValue(t)&&(t=this.defaultEmptyValue());let o=t,s=nt(this.format(),this.service.config.format);if(s==="text")o=r.getText();else if(s==="object")o=r.getContents();else if(s==="json")try{o=JSON.stringify(r.getContents())}catch{o=r.getText()}return o}),this.valueSetter=N((r,t)=>{let o=nt(this.format(),this.service.config.format);if(o==="html")return([!0,!1].includes(this.sanitize())?this.sanitize():this.service.config.sanitize||!1)&&(t=this.domSanitizer.sanitize(Rt.HTML,t)),r.clipboard.convert({html:t});if(o==="json")try{return JSON.parse(t)}catch{return[{insert:t}]}return t}),this.selectionChangeHandler=(r,t,o)=>{let s=this.trackChanges()||this.service.config.trackChanges,V=!r&&!!this.onModelTouched&&(o==="user"||s&&s==="all");!this.onBlur.observed&&!this.onFocus.observed&&!this.onSelectionChanged.observed&&!V||this.zone.run(()=>{r===null?this.onBlur.emit({editor:this.quillEditor,source:o}):t===null&&this.onFocus.emit({editor:this.quillEditor,source:o}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:t,range:r,source:o}),V&&this.onModelTouched(),this.cd.markForCheck()})},this.textChangeHandler=(r,t,o)=>{let s=this.quillEditor.getText(),V=this.quillEditor.getContents(),Y=this.quillEditor.getSemanticHTML();this.isEmptyValue(Y)&&(Y=this.defaultEmptyValue());let le=this.trackChanges()||this.service.config.trackChanges,Te=(o==="user"||le&&le==="all")&&!!this.onModelChange;!this.onContentChanged.observed&&!Te||this.zone.run(()=>{if(Te){let Ve=this.valueGetter();this.onModelChange(Ve(this.quillEditor))}this.onContentChanged.emit({content:V,delta:r,editor:this.quillEditor,html:Y,oldDelta:t,source:o,text:s}),this.cd.markForCheck()})},this.editorChangeHandler=(r,t,o,s)=>{if(this.onEditorChanged.observed)if(r==="text-change"){let V=this.quillEditor.getText(),Y=this.quillEditor.getContents(),le=this.quillEditor.getSemanticHTML();this.isEmptyValue(le)&&(le=this.defaultEmptyValue()),this.zone.run(()=>{this.onEditorChanged.emit({content:Y,delta:t,editor:this.quillEditor,event:r,html:le,oldDelta:o,source:s,text:V}),this.cd.markForCheck()})}else this.zone.run(()=>{this.onEditorChanged.emit({editor:this.quillEditor,event:r,oldRange:o,range:t,source:s}),this.cd.markForCheck()})}}static normalizeClassNames(r){return r.trim().split(" ").reduce((o,s)=>{let V=s.trim();return V&&o.push(V),o},[])}ngOnInit(){this.toolbarPosition.set(this.customToolbarPosition())}ngAfterViewInit(){Yt(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe(Ot(r=>{let t=[this.service.registerCustomModules(r,this.customModules())],o=this.beforeRender()??this.service.config.beforeRender;return o&&t.push(o()),Promise.all(t).then(()=>r)})).subscribe(r=>{this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");let t=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),o=Object.assign({},this.modules()||this.service.config.modules);t?o.toolbar=t:o.toolbar===void 0&&(o.toolbar=rt.toolbar);let s=this.placeholder()!==void 0?this.placeholder():this.service.config.placeholder;s===void 0&&(s="Insert text here ...");let V=this.styles();V&&Object.keys(V).forEach(fe=>{this.renderer.setStyle(this.editorElem,fe,V[fe])}),this.classes()&&this.addClasses(this.classes()),this.customOptions().forEach(fe=>{let xe=r.import(fe.import);xe.whitelist=fe.whitelist,r.register(xe,!0)});let Y=this.bounds()&&this.bounds()==="self"?this.editorElem:this.bounds();Y||(Y=this.service.config.bounds?this.service.config.bounds:this.document.body);let le=this.debug();!le&&le!==!1&&this.service.config.debug&&(le=this.service.config.debug);let Te=this.readOnly();!Te&&this.readOnly()!==!1&&(Te=this.service.config.readOnly!==void 0?this.service.config.readOnly:!1);let Ve=this.formats();if(!Ve&&Ve===void 0&&(Ve=this.service.config.formats?[...this.service.config.formats]:this.service.config.formats===null?null:void 0),this.zone.runOutsideAngular(()=>{if(this.quillEditor=new r(this.editorElem,{bounds:Y,debug:le,formats:Ve,modules:o,placeholder:s,readOnly:Te,registry:this.registry(),theme:this.theme()||(this.service.config.theme?this.service.config.theme:"snow")}),this.onNativeBlur.observed&&(this.quillEditor.scroll.domNode.addEventListener("blur",()=>this.onNativeBlur.next({editor:this.quillEditor,source:"dom"})),this.quillEditor.getModule("toolbar").container?.addEventListener("mousedown",xe=>xe.preventDefault())),this.onNativeFocus.observed&&this.quillEditor.scroll.domNode.addEventListener("focus",()=>this.onNativeFocus.next({editor:this.quillEditor,source:"dom"})),this.linkPlaceholder()){let xe=this.quillEditor?.theme?.tooltip?.root?.querySelector("input[data-link]");xe?.dataset&&(xe.dataset.link=this.linkPlaceholder())}}),this.content){if(nt(this.format(),this.service.config.format)==="text")this.quillEditor.setText(this.content,"silent");else{let Ni=this.valueSetter()(this.quillEditor,this.content);this.quillEditor.setContents(Ni,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.addQuillEventListeners(),!(!this.onEditorCreated.observed&&!this.onValidatorChanged)&&Bi().pipe(ii(this.destroyRef)).subscribe(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor)})}))}ngOnDestroy(){this.dispose(),this.quillSubscription?.unsubscribe(),this.quillSubscription=null}ngOnChanges(r){if(this.quillEditor){if(r.readOnly&&this.quillEditor.enable(!r.readOnly.currentValue),r.placeholder&&(this.quillEditor.root.dataset.placeholder=r.placeholder.currentValue),r.styles){let t=r.styles.currentValue,o=r.styles.previousValue;o&&Object.keys(o).forEach(s=>{this.renderer.removeStyle(this.editorElem,s)}),t&&Object.keys(t).forEach(s=>{this.renderer.setStyle(this.editorElem,s,this.styles()[s])})}if(r.classes){let t=r.classes.currentValue,o=r.classes.previousValue;o&&this.removeClasses(o),t&&this.addClasses(t)}r.debounceTime&&this.addQuillEventListeners()}}addClasses(r){c.normalizeClassNames(r).forEach(t=>{this.renderer.addClass(this.editorElem,t)})}removeClasses(r){c.normalizeClassNames(r).forEach(t=>{this.renderer.removeClass(this.editorElem,t)})}writeValue(r){if(this.filterNull()&&r===null||(this.content=r,!this.quillEditor))return;let t=nt(this.format(),this.service.config.format),s=this.valueSetter()(this.quillEditor,r);if(this.compareValues()){let V=this.quillEditor.getContents();if(JSON.stringify(V)===JSON.stringify(s))return}if(r){t==="text"?this.quillEditor.setText(r):this.quillEditor.setContents(s);return}this.quillEditor.setText("")}setDisabledState(r=this.disabled){this.disabled=r,this.quillEditor&&(r?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly()||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(r){this.onModelChange=r}registerOnTouched(r){this.onModelTouched=r}registerOnValidatorChange(r){this.onValidatorChanged=r}validate(){if(!this.quillEditor)return null;let r={},t=!0,o=this.quillEditor.getText(),s=this.trimOnValidation()?o.trim().length:o.length===1&&o.trim().length===0?0:o.length-1,V=this.quillEditor.getContents().ops,Y=!!V&&V.length===1&&[`
`,""].includes(V[0].insert?.toString());return this.minLength()&&s&&s<this.minLength()&&(r.minLengthError={given:s,minLength:this.minLength()},t=!1),this.maxLength()&&s>this.maxLength()&&(r.maxLengthError={given:s,maxLength:this.maxLength()},t=!1),this.required()&&!s&&Y&&(r.requiredError={empty:!0},t=!1),t?null:r}addQuillEventListeners(){this.dispose(),this.zone.runOutsideAngular(()=>{this.subscription=new It,this.subscription.add(Ze(this.quillEditor,"selection-change").subscribe(([o,s,V])=>{this.selectionChangeHandler(o,s,V)}));let r=Ze(this.quillEditor,"text-change"),t=Ze(this.quillEditor,"editor-change");typeof this.debounceTime()=="number"&&(r=r.pipe(xt(this.debounceTime())),t=t.pipe(xt(this.debounceTime()))),this.subscription.add(r.subscribe(([o,s,V])=>{this.textChangeHandler(o,s,V)})),this.subscription.add(t.subscribe(([o,s,V,Y])=>{this.editorChangeHandler(o,s,V,Y)}))})}dispose(){this.subscription!==null&&(this.subscription.unsubscribe(),this.subscription=null)}isEmptyValue(r){return r==="<p></p>"||r==="<div></div>"||r==="<p><br></p>"||r==="<div><br></div>"}};c.\u0275fac=function(t){return new(t||c)},c.\u0275dir=zt({type:c,inputs:{format:[1,"format"],theme:[1,"theme"],modules:[1,"modules"],debug:[1,"debug"],readOnly:[1,"readOnly"],placeholder:[1,"placeholder"],maxLength:[1,"maxLength"],minLength:[1,"minLength"],required:[1,"required"],formats:[1,"formats"],customToolbarPosition:[1,"customToolbarPosition"],sanitize:[1,"sanitize"],beforeRender:[1,"beforeRender"],styles:[1,"styles"],registry:[1,"registry"],bounds:[1,"bounds"],customOptions:[1,"customOptions"],customModules:[1,"customModules"],trackChanges:[1,"trackChanges"],classes:[1,"classes"],trimOnValidation:[1,"trimOnValidation"],linkPlaceholder:[1,"linkPlaceholder"],compareValues:[1,"compareValues"],filterNull:[1,"filterNull"],debounceTime:[1,"debounceTime"],defaultEmptyValue:[1,"defaultEmptyValue"],valueGetter:[1,"valueGetter"],valueSetter:[1,"valueSetter"]},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur",onNativeFocus:"onNativeFocus",onNativeBlur:"onNativeBlur"},features:[Oe]});let l=c;return l})(),at=(()=>{let c=class c extends Ui{};c.\u0275fac=(()=>{let r;return function(o){return(r||(r=jt(c)))(o||c)}})(),c.\u0275cmp=M({type:c,selectors:[["quill-editor"]],standalone:!0,features:[Zt([{multi:!0,provide:ni,useExisting:vt(()=>c)},{multi:!0,provide:ai,useExisting:vt(()=>c)}]),Ut,I],ngContentSelectors:ji,decls:5,vars:2,consts:[["quill-editor-element",""]],template:function(t,o){t&1&&(Gt(zi),E(0,Wi,1,0,"div",0),Ke(1),Ke(2,1),Ke(3,2),E(4,qi,1,0,"div",0)),t&2&&(K(o.toolbarPosition()!=="top"?0:-1),d(4),K(o.toolbarPosition()==="top"?4:-1))},styles:["[_nghost-%COMP%]{display:inline-block}"]});let l=c;return l})();var ot=(()=>{let c=class c{static forRoot(r){return{ngModule:c,providers:[{provide:Ct,useValue:r}]}}};c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=Fe({type:c}),c.\u0275inj=De({});let l=c;return l})();function Zi(l,c){if(l&1&&(i(0,"option",32),a(1),n()),l&2){let e=c.$implicit;b("value",e.id),d(),C(" ",e.nombre," ")}}function Qi(l,c){if(l&1&&(i(0,"option",32),a(1),n()),l&2){let e=c.$implicit;b("value",e.id),d(),C(" ",e.nombre," ")}}function Ji(l,c){if(l&1&&(i(0,"option",32),a(1),n()),l&2){let e=c.$implicit;b("value",e.id),d(),C(" ",e.nombre," ")}}function Ki(l,c){if(l&1&&(i(0,"option",32),a(1),n()),l&2){let e=c.$implicit;b("value",e.id),d(),C(" ",e.nombre," ")}}function $i(l,c){if(l&1){let e=w();m(0,"img",33),i(1,"button",34),h("click",function(){let t=g(e).$implicit,o=u();return p(o.eliminarImagen(o.imagencarga.indexOf(t)))}),a(2," Eliminar "),n()}if(l&2){let e=c.$implicit;b("src",e,de)}}var di=(()=>{class l{productoService;marcaService;categoriaService;MarcaSelect=0;Marcas=[];CategoriaMarca=[];CategoriaSelect=0;Categorias=[];Subcategoria=[];selectedFiles=[];selectedFilePrincipal=null;imagencargadaPrincipal="";imagencarga=[];nuevoProducto={id:"",nombre:"",pn:"",descripcion:"",stock:0,precio:0,CategoriaMarcaId:1,SubCategoriaId:1,garantia_cliente:6,garantia_total:12,imagen_principal:"",imageurl:[]};productos=[];constructor(e,r,t){this.productoService=e,this.marcaService=r,this.categoriaService=t}ngOnInit(){this.cargarSelect()}buscarSubM(){this.marcaService.getSubs(this.MarcaSelect).subscribe(e=>{this.CategoriaMarca=e,this.nuevoProducto.id_categoriamarca=this.CategoriaMarca[0].id},e=>{console.error("Error: ",e)})}buscarSubC(){this.categoriaService.getSubs(this.CategoriaSelect).subscribe(e=>{this.Subcategoria=e,this.nuevoProducto.id_subcategoria=this.Subcategoria[0].id},e=>{console.error("Error: ",e)})}cargarSelect(){this.marcaService.getAll().subscribe(e=>{this.Marcas=e}),this.categoriaService.getAll().subscribe(e=>{this.Categorias=e})}cargarProductos(){this.productoService.getListaProductos().subscribe(e=>{this.productos=e},e=>{console.error("Error al obtener las categor\xEDas:",e)})}guardarProductos(){let e=new FormData;if(e.append("producto",JSON.stringify(this.nuevoProducto)),console.log(this.nuevoProducto),this.selectedFilePrincipal)e.append("file",this.selectedFilePrincipal);else{He.default.fire("Error","Seleccione al menos una imagen principal","error");return}if(this.selectedFiles.length>0)this.selectedFiles.forEach(r=>{e.append("files",r)});else{He.default.fire("Error","Seleccione al menos una imagen secundaria","error");return}this.productoService.postNuevoProducto(e).subscribe({next:()=>{this.cargarProductos(),He.default.fire({icon:"success",title:"Producto agregado",text:"El producto ha sido agregado al inventario."})},error:r=>{He.default.fire({icon:"error",title:"Producto no agregado",text:r})}})}onFileChange(e){e.target.files.length>0&&(this.selectedFiles=Array.from(e.target.files),this.selectedFiles.forEach(r=>{let t=new FileReader;t.onload=o=>{this.imagencarga.push(o.target.result)},t.readAsDataURL(r)}))}eliminarImagen(e){this.nuevoProducto.imageurl.splice(e,1)}onFileChangePrincipal(e){if(e.target.files.length>0&&(this.selectedFilePrincipal=e.target.files[0],this.selectedFilePrincipal)){let r=new FileReader;r.onload=t=>{this.imagencarga.push(t.target.result)},r.readAsDataURL(this.selectedFilePrincipal)}}static \u0275fac=function(r){return new(r||l)(_(ae),_(Ne),_(Le))};static \u0275cmp=M({type:l,selectors:[["app-crear-producto"]],standalone:!0,features:[I],decls:73,vars:15,consts:[[1,"grid","grid-cols-1","md:grid-cols-3","gap-3"],[1,"mb-6"],["for","nombre",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","nombre","name","nombre","placeholder","Ingrese el nombre...","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","pn",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","pn","name","pn","placeholder","Ingrese el PN ...","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","stock",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","number","id","stock","name","stock","placeholder","Ingrese stock del producto...","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","pre",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","number","id","pre","name","pre","placeholder","Ingrese el precio...","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","marcaSelect",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","marcaSelect","name","marcaSelect",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","change","ngModel"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["for","categoriaMSelect",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","categoriaMSelect","name","categoriaMSelect",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","categoriaSelect",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","categoriaSelect","name","categoriaSelect",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","change","ngModel"],["for","ScategoriaSelect",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","ScategoriaSelect","name","ScategoriaSelect",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","des",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","des","name","des",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-2"],["for","gc",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","number","id","gc","name","gc","placeholder","Ingrese la garant\xEDa cliente...","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","gt",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","number","id","gt","name","gt","placeholder","Ingrese la garant\xEDa total...","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","archivo",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","file","id","archivo","name","archivo","multiple","","required","",1,"block","w-full","text-sm","text-gray-900","border","border-gray-300","rounded-lg","cursor-pointer","bg-gray-50","dark:text-gray-400","focus:outline-none","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400",3,"change"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],[1,"relative"],["type","submit",1,"w-full","items-center","rounded-lg","bg-blue-700","px-5","py-2.5","text-sm","font-medium","text-white","hover:bg-blue-800","focus:outline-none","focus:ring-4","focus:ring-blue-300","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],[3,"value"],["alt","",1,"h-auto","max-w-full","rounded-lg",3,"src"],["type","button",1,"w-full","items-center","rounded-lg","bg-red-700","px-5","py-2.5","text-sm","font-medium","text-white","hover:bg-red-800","focus:outline-none","focus:ring-4","focus:ring-red-300","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-800",3,"click"]],template:function(r,t){r&1&&(i(0,"form")(1,"div",0)(2,"div",1)(3,"label",2),a(4,"Nombre Producto"),n(),i(5,"input",3),v("ngModelChange",function(s){return x(t.nuevoProducto.nombre,s)||(t.nuevoProducto.nombre=s),s}),n()(),i(6,"div",1)(7,"label",4),a(8,"PN Producto"),n(),i(9,"input",5),v("ngModelChange",function(s){return x(t.nuevoProducto.pn,s)||(t.nuevoProducto.pn=s),s}),n()(),i(10,"div",1)(11,"label",6),a(12,"Stock"),n(),i(13,"input",7),v("ngModelChange",function(s){return x(t.nuevoProducto.stock,s)||(t.nuevoProducto.stock=s),s}),n()(),i(14,"div",1)(15,"label",8),a(16,"Precio"),n(),i(17,"input",9),v("ngModelChange",function(s){return x(t.nuevoProducto.precio,s)||(t.nuevoProducto.precio=s),s}),n()(),i(18,"div",1)(19,"label",10),a(20,"Seleccionar Marca"),n(),i(21,"select",11),v("ngModelChange",function(s){return x(t.MarcaSelect,s)||(t.MarcaSelect=s),s}),h("change",function(){return t.buscarSubM()}),i(22,"option",12),a(23,"Elegir..."),n(),E(24,Zi,2,2,"option",13),n()(),i(25,"div",1)(26,"label",14),a(27,"Seleccionar Categoria Marca"),n(),i(28,"select",15),v("ngModelChange",function(s){return x(t.nuevoProducto.CategoriaMarcaId,s)||(t.nuevoProducto.CategoriaMarcaId=s),s}),i(29,"option",12),a(30,"Elegir..."),n(),E(31,Qi,2,2,"option",13),n()(),i(32,"div",1)(33,"label",16),a(34,"Seleccionar Categoria"),n(),i(35,"select",17),v("ngModelChange",function(s){return x(t.CategoriaSelect,s)||(t.CategoriaSelect=s),s}),h("change",function(){return t.buscarSubC()}),i(36,"option",12),a(37,"Elegir..."),n(),E(38,Ji,2,2,"option",13),n()(),i(39,"div",1)(40,"label",18),a(41,"Seleccionar Sub Categoria"),n(),i(42,"select",19),v("ngModelChange",function(s){return x(t.nuevoProducto.SubCategoriaId,s)||(t.nuevoProducto.SubCategoriaId=s),s}),i(43,"option",12),a(44,"Elegir..."),n(),E(45,Ki,2,2,"option",13),n()()(),i(46,"div",1)(47,"label",20),a(48,"Descripci\xF3n"),n(),i(49,"quill-editor",21),v("ngModelChange",function(s){return x(t.nuevoProducto.descripcion,s)||(t.nuevoProducto.descripcion=s),s}),n()(),i(50,"div",22)(51,"div",1)(52,"label",23),a(53,"Garantia Cliente"),n(),i(54,"input",24),v("ngModelChange",function(s){return x(t.nuevoProducto.garantia_cliente,s)||(t.nuevoProducto.garantia_cliente=s),s}),n()(),i(55,"div",1)(56,"label",25),a(57,"Garantia Total"),n(),i(58,"input",26),v("ngModelChange",function(s){return x(t.nuevoProducto.garantia_total,s)||(t.nuevoProducto.garantia_total=s),s}),n()()(),i(59,"div",1)(60,"label",27),a(61,"Seleccionar Archivo Principal"),n(),i(62,"input",28),h("change",function(s){return t.onFileChangePrincipal(s)}),n()(),i(63,"div",1)(64,"label",27),a(65,"Seleccionar Archivo"),n(),i(66,"input",28),h("change",function(s){return t.onFileChange(s)}),n()(),i(67,"div",29)(68,"div",30),P(69,$i,3,1,null,null,Ht),n()(),i(71,"button",31),h("click",function(){return t.guardarProductos()}),a(72," Ingresar Nuevo Producto "),n()()),r&2&&(d(5),f("ngModel",t.nuevoProducto.nombre),d(4),f("ngModel",t.nuevoProducto.pn),d(4),f("ngModel",t.nuevoProducto.stock),d(4),f("ngModel",t.nuevoProducto.precio),d(4),f("ngModel",t.MarcaSelect),d(3),b("ngForOf",t.Marcas),d(4),f("ngModel",t.nuevoProducto.CategoriaMarcaId),d(3),b("ngForOf",t.CategoriaMarca),d(4),f("ngModel",t.CategoriaSelect),d(3),b("ngForOf",t.Categorias),d(4),f("ngModel",t.nuevoProducto.SubCategoriaId),d(3),b("ngForOf",t.Subcategoria),d(4),f("ngModel",t.nuevoProducto.descripcion),d(5),f("ngModel",t.nuevoProducto.garantia_cliente),d(4),f("ngModel",t.nuevoProducto.garantia_total),d(11),T(t.imagencarga))},dependencies:[D,he,L,J,te,ie,G,it,oe,z,Z,me,j,Q,ot,at]})}return l})();var ci=ge(pe());var lt=(()=>{class l{http;authService;apiUrl=H.API_URL+"/facturacion/reportes";headersAuthorization;headers;constructor(e,r){this.http=e,this.authService=r,this.headers=this.authService.getHeaders(),this.headersAuthorization=this.authService.getHeadersAuthorization()}getVentasReporte(){return this.http.get(this.apiUrl,{headers:this.headers})}getproductosMasVendidos(){return this.http.get(this.apiUrl+"/productos-mas-vendidos",{headers:this.headers})}ProductosStock(){return this.http.get(this.apiUrl+"/StockProductos",{responseType:"blob"})}static \u0275fac=function(r){return new(r||l)(O(U),O(ne))};static \u0275prov=q({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})();var Xi=(l,c)=>c.id,er=l=>["/dashboard/inventario/",l];function tr(l,c){if(l&1){let e=w();i(0,"div",15),m(1,"div",16),i(2,"div",17)(3,"div",18)(4,"div",19)(5,"h3",20),a(6," A\xF1adir Producto "),n(),i(7,"button",21),h("click",function(){g(e);let t=u();return p(t.CreateOpen=!1)}),y(),i(8,"svg",22),m(9,"path",23),n(),S(),i(10,"span",24),a(11,"Close modal"),n()()(),i(12,"div",25),m(13,"app-crear-producto"),n()()()()}}function ir(l,c){if(l&1&&(i(0,"tr",11)(1,"td",26),a(2),n(),i(3,"td",27),a(4),n(),i(5,"td",27),a(6),n(),i(7,"td",27),a(8),B(9,"currency"),n(),i(10,"td",27)(11,"a",28),a(12,"Ver"),n()()()),l&2){let e=c.$implicit;d(2),C(" ",e.nombre," "),d(2),C(" ",e.pn," "),d(2),C("",e.stock," uni."),d(2),C(" ",R(9,5,e.precio,"S/. ")," "),d(3),b("routerLink",$e(8,er,e.id))}}var ui=(()=>{class l{router;productoService;pedidoService;reportesService;url=et.API_URL;productos=[];productoEliminar=[];ProductoNombrePedidoSelect="";ProductoIdPedidoSelect="";ProductoCantidadPedidoSelect=0;ProductoNotaPedidoSelect="";Pedido=null;totalProductos=0;page=1;pageSize=30;totalPages=0;searchText="";constructor(e,r,t,o){this.router=e,this.productoService=r,this.pedidoService=t,this.reportesService=o}CreateOpen=!1;name_modal="CREAR";openCModal(){this.CreateOpen=!0,this.name_modal="CREAR"}ngOnInit(){this.router.events.subscribe(e=>{e instanceof Ce&&setTimeout(()=>initFlowbite(),0)}),this.cargarProductosActualizado(this.page,this.pageSize)}cargarProductosActualizado(e,r){this.productoService.getListaPaged(e,r).subscribe(t=>{this.productos=t.productos,this.totalProductos=t.total,this.totalPages=t.totalPages},t=>{console.error("Error al obtener los productos:",t)})}buscarProducto(e){let t=e.target.value.toUpperCase();t?this.productos=this.productos.filter(o=>o.nombre.toUpperCase().includes(t)):this.cargarProductosActualizado(this.page,this.pageSize)}searchProductoById(){this.searchText?this.productoService.getProductoSearch(this.searchText).subscribe(e=>{this.productos=e,this.totalPages=1},e=>{console.error(e),ci.default.fire({icon:"error",title:"Error",text:e.error?.message||"Ocurri\xF3 un error al buscar la cotizaci\xF3n."})}):this.cargarProductosActualizado(this.page,this.pageSize)}eliminarProducto(e){this.productoService.deleteProducto(e).subscribe(()=>{this.productoEliminar=this.productoEliminar.filter(r=>r.id!==e),this.cargarProductosActualizado(this.page,this.pageSize)},r=>{console.error("producto no eliminado.")})}RegistrarPedido(){this.Pedido={id:"",id_producto:this.ProductoIdPedidoSelect,fecha:new Date().toISOString(),id_usuario:"",cantidad:this.ProductoCantidadPedidoSelect,estado:"pendiente",nota:this.ProductoNotaPedidoSelect,tenantId:""},this.pedidoService.registrar(this.Pedido).subscribe({next:()=>{console.log("El pedido ha sido registrado.")},error:e=>{console.error("El pedido no registrado")}})}nuevoActua={id:"",nombre:"",pn:"",descripcion:"",stock:1,precio:1,MarcaId:1,CategoriaMarcaId:1,CategoriaId:1,SubCategoriaId:1,garantia_cliente:0,garantia_total:0,cantidad:0,imagen_principal:"",imageurl:[]};imagencargadaPrincipal="";imagencarga=[];refresh(){this.cargarProductosActualizado(this.page,this.pageSize)}onPageChange(e){this.page=e,this.cargarProductosActualizado(this.page,this.pageSize)}abrirModalPedido(e,r,t){this.ProductoIdPedidoSelect=r,this.ProductoNombrePedidoSelect=t}getCurrentDateTime(){return new Date().toISOString()}Reporte(){this.reportesService.ProductosStock().subscribe(e=>{let r=new Blob([e],{type:"application/pdf"}),t=window.URL.createObjectURL(r),o=document.createElement("a");o.href=t,o.download="REPORTE-STOCK.pdf",o.click(),window.URL.revokeObjectURL(t)},e=>{console.error("Error al descargar el reporte:",e)})}static \u0275fac=function(r){return new(r||l)(_(ee),_(ae),_(ze),_(lt))};static \u0275cmp=M({type:l,selectors:[["app-inventario"]],standalone:!0,features:[I],decls:39,vars:6,consts:[[1,"text-2xl","text-center","font-extrabold","text-gray-800","dark:text-white"],[1,"flex","justify-between","items-center","mb-4"],["type","text","placeholder","Buscar por ID de cotizaci\xF3n",1,"px-4","py-2","border","border-gray-300","rounded-md",3,"ngModelChange","keydown.enter","ngModel"],[1,"px-3","py-2","ml-2","text-white","bg-blue-500","rounded-md","hover:bg-blue-600",3,"click"],[1,"px-3","py-2","ml-2","text-blue-600","bg-transparent","border-[1px]","border-blue-600","rounded-md","hover:bg-blue-600","hover:text-white",3,"click"],[1,"px-3","py-2","text-white","bg-green-500","rounded-md","hover:bg-green-600",3,"click"],["tabindex","-1","aria-hidden","true","class","fixed inset-0 z-50 overflow-y-auto",4,"ngIf"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],[1,"h-32","odd:bg-white","odd:dark:bg-gray-900","even:bg-gray-50","even:dark:bg-gray-800","border-b","dark:border-gray-700"],[1,"flex","justify-center","mt-4"],[1,"px-3","py-1","mx-1","text-sm","font-medium","text-white","bg-blue-500","rounded-md","hover:bg-blue-600",3,"click","disabled"],[1,"px-3","py-1","mx-1","text-sm","font-medium"],["tabindex","-1","aria-hidden","true",1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"fixed","inset-0","bg-black","bg-opacity-50"],[1,"relative","flex","items-center","justify-center","min-h-screen","p-4"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700","max-w-2xl","w-full"],[1,"flex","items-center","justify-between","p-4","md:p-5","border-b","rounded-t","dark:border-gray-600"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],["type","button",1,"text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","inline-flex","justify-center","items-center","dark:hover:bg-gray-600","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],[1,"p-4","md:p-5","space-y-4"],[1,"px-6","py-4","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"px-6","py-4"],[1,"font-medium","text-blue-600","dark:text-blue-500","hover:underline",3,"routerLink"]],template:function(r,t){r&1&&(i(0,"p",0),a(1,` Inventario Productos
`),n(),m(2,"br"),i(3,"div",1)(4,"div")(5,"input",2),v("ngModelChange",function(s){return x(t.searchText,s)||(t.searchText=s),s}),h("keydown.enter",function(){return t.searchProductoById()}),n(),i(6,"button",3),h("click",function(){return t.searchProductoById()}),a(7," Buscar "),n(),i(8,"button",4),h("click",function(){return t.refresh()}),a(9," Refresh "),n()(),i(10,"button",5),h("click",function(){return t.openCModal()}),a(11," Crear Nuevo Producto "),n(),i(12,"button",5),h("click",function(){return t.Reporte()}),a(13," PDF "),n()(),E(14,tr,14,0,"div",6),i(15,"div",7)(16,"table",8)(17,"thead",9)(18,"tr")(19,"th",10),a(20,"Nombre Producto"),n(),i(21,"th",10),a(22,"PN Producto"),n(),i(23,"th",10),a(24,"Stock"),n(),i(25,"th",10),a(26,"Precio"),n(),i(27,"th",10),a(28,"Detalle"),n()()(),i(29,"tbody"),P(30,ir,13,10,"tr",11,Xi),n()()(),i(32,"div",12)(33,"button",13),h("click",function(){return t.onPageChange(t.page-1)}),a(34," Anterior "),n(),i(35,"span",14),a(36),n(),i(37,"button",13),h("click",function(){return t.onPageChange(t.page+1)}),a(38," Siguiente "),n()()),r&2&&(d(5),f("ngModel",t.searchText),d(9),b("ngIf",t.CreateOpen),d(16),T(t.productos),d(3),b("disabled",t.page===1),d(3),X(" P\xE1gina ",t.page," de ",t.totalPages," "),d(),b("disabled",t.page===t.totalPages))},dependencies:[D,$,ue,L,G,z,j,di,we],encapsulation:2})}return l})();var mi=(()=>{class l{router;constructor(e){this.router=e}ngOnInit(){this.router.events.subscribe(e=>{e instanceof Ce&&tt()})}static \u0275fac=function(r){return new(r||l)(_(ee))};static \u0275cmp=M({type:l,selectors:[["app-dashboard"]],standalone:!0,features:[I],decls:69,vars:0,consts:[[1,"text-2xl","text-center","font-extrabold","text-gray-800","dark:text-white"],[1,"bg-gray-50","py-8","antialiased","dark:bg-gray-900","md:py-12"],[1,"mx-auto","max-w-screen-xl","px-4","2xl:px-0"],[1,"mb-4","grid","gap-4","sm:grid-cols-2","md:mb-8","lg:grid-cols-3","xl:grid-cols-4"],["routerLink","inventario",1,"rounded-lg","border","border-gray-200","bg-white","p-6","shadow-sm","dark:border-gray-700","dark:bg-gray-800","hover:scale-110","transition-all","hover:shadow-2xl","hover:cursor-pointer"],[1,"h-57","w-full","flex","flex-col","items-center","justify-center"],[1,"flex","flex-col","items-center","justify-center"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 18 20",1,"h-16","w-16","dark:hidden","text-gray-500","duration-75","dark:text-gray-400","group-hover:text-gray-900","dark:group-hover:text-white"],["d","M6.143 0H1.857A1.857 1.857 0 0 0 0 1.857v4.286C0 7.169.831 8 1.857 8h4.286A1.857 1.857 0 0 0 8 6.143V1.857A1.857 1.857 0 0 0 6.143 0Zm10 0h-4.286A1.857 1.857 0 0 0 10 1.857v4.286C10 7.169 10.831 8 11.857 8h4.286A1.857 1.857 0 0 0 18 6.143V1.857A1.857 1.857 0 0 0 16.143 0Zm-10 10H1.857A1.857 1.857 0 0 0 0 11.857v4.286C0 17.169.831 18 1.857 18h4.286A1.857 1.857 0 0 0 8 16.143v-4.286A1.857 1.857 0 0 0 6.143 10Zm10 0h-4.286A1.857 1.857 0 0 0 10 11.857v4.286c0 1.026.831 1.857 1.857 1.857h4.286A1.857 1.857 0 0 0 18 16.143v-4.286A1.857 1.857 0 0 0 16.143 10Z"],[1,"mt-2","text-center","font-extrabold","text-gray-800","dark:text-white"],["routerLink","ingreso",1,"rounded-lg","border","border-gray-200","bg-white","p-6","shadow-sm","dark:border-gray-700","dark:bg-gray-800","hover:scale-110","transition-all","hover:shadow-2xl","hover:cursor-pointer"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"h-16","w-16","dark:hidden","text-gray-500","transition","duration-75","dark:text-gray-400","group-hover:text-gray-900","dark:group-hover:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 12H4m12 0-4 4m4-4-4-4m3-4h2a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-2"],["routerLink","salida",1,"rounded-lg","border","border-gray-200","bg-white","p-6","shadow-sm","dark:border-gray-700","dark:bg-gray-800","hover:scale-110","transition-all","hover:shadow-2xl","hover:cursor-pointer"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 12H8m12 0-4 4m4-4-4-4M9 4H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h2"],["routerLink","comprobantes",1,"rounded-lg","border","border-gray-200","bg-white","p-6","shadow-sm","dark:border-gray-700","dark:bg-gray-800","hover:scale-110","transition-all","hover:shadow-2xl","hover:cursor-pointer"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 18 20",1,"h-16","w-16","dark:hidden","text-gray-500","transition","duration-75","dark:text-gray-400","group-hover:text-gray-900","dark:group-hover:text-white"],["d","M17 5.923A1 1 0 0 0 16 5h-3V4a4 4 0 1 0-8 0v1H2a1 1 0 0 0-1 .923L.086 17.846A2 2 0 0 0 2.08 20h13.84a2 2 0 0 0 1.994-2.153L17 5.923ZM7 9a1 1 0 0 1-2 0V7h2v2Zm0-5a2 2 0 1 1 4 0v1H7V4Zm6 5a1 1 0 1 1-2 0V7h2v2Z"],["routerLink","pedidos",1,"rounded-lg","border","border-gray-200","bg-white","p-6","shadow-sm","dark:border-gray-700","dark:bg-gray-800","hover:scale-110","transition-all","hover:shadow-2xl","hover:cursor-pointer"],["routerLink","pedidos",1,"flex","flex-col","items-center","justify-center"],["fill-rule","evenodd","d","M20 10H4v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8ZM9 13v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1Z","clip-rule","evenodd"],["d","M2 6a2 2 0 0 1 2-2h16a2 2 0 1 1 0 4H4a2 2 0 0 1-2-2Z"],["routerLink","marca",1,"rounded-lg","border","border-gray-200","bg-white","p-6","shadow-sm","dark:border-gray-700","dark:bg-gray-800","hover:scale-110","transition-all","hover:shadow-2xl","hover:cursor-pointer"],["fill-rule","evenodd","d","M8 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1h2a2 2 0 0 1 2 2v15a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h2Zm6 1h-4v2H9a1 1 0 0 0 0 2h6a1 1 0 1 0 0-2h-1V4Zm-6 8a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1Zm1 3a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2H9Z","clip-rule","evenodd"],["routerLink","categoria",1,"rounded-lg","border","border-gray-200","bg-white","p-6","shadow-sm","dark:border-gray-700","dark:bg-gray-800","hover:scale-110","transition-all","hover:shadow-2xl","hover:cursor-pointer"],["routerLink","entidades",1,"rounded-lg","border","border-gray-200","bg-white","p-6","shadow-sm","dark:border-gray-700","dark:bg-gray-800","hover:scale-110","transition-all","hover:shadow-2xl","hover:cursor-pointer"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 18",1,"h-16","w-16","dark:hidden","text-gray-500","transition","duration-75","dark:text-gray-400","group-hover:text-gray-900","dark:group-hover:text-white"],["d","M14 2a3.963 3.963 0 0 0-1.4.267 6.439 6.439 0 0 1-1.331 6.638A4 4 0 1 0 14 2Zm1 9h-1.264A6.957 6.957 0 0 1 15 15v2a2.97 2.97 0 0 1-.184 1H19a1 1 0 0 0 1-1v-1a5.006 5.006 0 0 0-5-5ZM6.5 9a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9ZM8 10H5a5.006 5.006 0 0 0-5 5v2a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-2a5.006 5.006 0 0 0-5-5Z"],["routerLink","cotizaciones",1,"rounded-lg","border","border-gray-200","bg-white","p-6","shadow-sm","dark:border-gray-700","dark:bg-gray-800","hover:scale-110","transition-all","hover:shadow-2xl","hover:cursor-pointer"]],template:function(r,t){r&1&&(i(0,"p",0),a(1,` Dashboard
`),n(),i(2,"section",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"a",6),y(),i(8,"svg",7),m(9,"path",8),n(),S(),i(10,"span",9),a(11,"Inventario"),n()()()(),i(12,"div",10)(13,"div",5)(14,"a",6),y(),i(15,"svg",11),m(16,"path",12),n(),S(),i(17,"span",9),a(18,"Ingreso"),n()()()(),i(19,"div",13)(20,"div",5)(21,"a",6),y(),i(22,"svg",11),m(23,"path",14),n(),S(),i(24,"span",9),a(25,"Salida"),n()()()(),i(26,"div",15)(27,"div",5)(28,"a",6),y(),i(29,"svg",16),m(30,"path",17),n(),S(),i(31,"span",9),a(32,"Comprobantes"),n()()()(),i(33,"div",18)(34,"div",5)(35,"a",19),y(),i(36,"svg",11),m(37,"path",20)(38,"path",21),n(),S(),i(39,"span",9),a(40,"Pedidos"),n()()()(),i(41,"div",22)(42,"div",5)(43,"a",6),y(),i(44,"svg",11),m(45,"path",23),n(),S(),i(46,"span",9),a(47,"Marcas"),n()()()(),i(48,"div",24)(49,"div",5)(50,"a",6),y(),i(51,"svg",11),m(52,"path",23),n(),S(),i(53,"span",9),a(54,"Categorias"),n()()()(),i(55,"div",25)(56,"div",5)(57,"a",6),y(),i(58,"svg",26),m(59,"path",27),n(),S(),i(60,"span",9),a(61,"Entidades"),n()()()(),i(62,"div",28)(63,"div",5)(64,"a",6),y(),i(65,"svg",11),m(66,"path",14),n(),S(),i(67,"span",9),a(68,"Cotizaciones"),n()()()()()()())},dependencies:[D,Ue,we],encapsulation:2})}return l})();var nr=(l,c)=>({"translate-x-0":l,"-translate-x-full":c}),ar=l=>({"sm:ml-64":l}),gi=(()=>{class l{router;tenantService;isSidebarOpen=!0;tenant=null;constructor(e,r){this.router=e,this.tenantService=r}ngOnInit(){this.router.events.subscribe(e=>{e instanceof Ce&&tt()}),this.tenantService.tenant$.subscribe(e=>{this.tenant=e})}toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}Logout(){localStorage.removeItem("User"),localStorage.removeItem("authToken"),this.router.navigate(["/"])}static \u0275fac=function(r){return new(r||l)(_(ee),_(Xe))};static \u0275cmp=M({type:l,selectors:[["app-layout"]],standalone:!0,features:[I],decls:107,vars:8,consts:[[1,"fixed","top-0","z-50","w-full","bg-white","border-b","border-gray-200","dark:bg-gray-800","dark:border-gray-700"],[1,"px-3","py-3","lg:px-5","lg:pl-3"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","justify-start","rtl:justify-end"],["type","button",1,"inline-flex","items-center","p-2","text-sm","text-gray-500","rounded-lg","hover:bg-gray-100","focus:outline-none","focus:ring-2","focus:ring-gray-200","dark:text-gray-400","dark:hover:bg-gray-700","dark:focus:ring-gray-600",3,"click"],[1,"sr-only"],["aria-hidden","true","fill","currentColor","viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["clip-rule","evenodd","fill-rule","evenodd","d","M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"],["routerLink","/dashboard",1,"flex","ms-2","md:me-24"],["alt","PR-Fact",1,"h-14","me-3",3,"src"],[1,"self-center","text-xl","font-semibold","sm:text-2xl","whitespace-nowrap","dark:text-white"],["id","logo-sidebar","aria-label","Sidebar",1,"fixed","top-0","left-0","z-40","w-64","h-screen","pt-20","transition-transform","bg-white","border-r","border-gray-200","dark:bg-gray-800","dark:border-gray-700",3,"ngClass"],[1,"h-full","px-3","pb-4","overflow-y-auto","bg-white","dark:bg-gray-800"],[1,"space-y-2","font-medium"],["routerLink","/dashboard",1,"flex","items-center","p-2","text-gray-900","rounded-lg","dark:text-white","hover:bg-gray-100","dark:hover:bg-gray-700","group"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 22 21",1,"w-5","h-5","text-gray-500","transition","duration-75","dark:text-gray-400","group-hover:text-gray-900","dark:group-hover:text-white"],["d","M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z"],["d","M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z"],[1,"ms-3"],["routerLink","inventario",1,"flex","items-center","p-2","text-gray-900","rounded-lg","dark:text-white","hover:bg-gray-100","dark:hover:bg-gray-700","group"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 18 18",1,"flex-shrink-0","w-5","h-5","text-gray-500","transition","duration-75","dark:text-gray-400","group-hover:text-gray-900","dark:group-hover:text-white"],["d","M6.143 0H1.857A1.857 1.857 0 0 0 0 1.857v4.286C0 7.169.831 8 1.857 8h4.286A1.857 1.857 0 0 0 8 6.143V1.857A1.857 1.857 0 0 0 6.143 0Zm10 0h-4.286A1.857 1.857 0 0 0 10 1.857v4.286C10 7.169 10.831 8 11.857 8h4.286A1.857 1.857 0 0 0 18 6.143V1.857A1.857 1.857 0 0 0 16.143 0Zm-10 10H1.857A1.857 1.857 0 0 0 0 11.857v4.286C0 17.169.831 18 1.857 18h4.286A1.857 1.857 0 0 0 8 16.143v-4.286A1.857 1.857 0 0 0 6.143 10Zm10 0h-4.286A1.857 1.857 0 0 0 10 11.857v4.286c0 1.026.831 1.857 1.857 1.857h4.286A1.857 1.857 0 0 0 18 16.143v-4.286A1.857 1.857 0 0 0 16.143 10Z"],[1,"flex-1","ms-3","whitespace-nowrap"],["routerLink","publicitarias",1,"flex","items-center","p-2","text-gray-900","rounded-lg","dark:text-white","hover:bg-gray-100","dark:hover:bg-gray-700","group"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 18",1,"flex-shrink-0","w-5","h-5","text-gray-500","transition","duration-75","dark:text-gray-400","group-hover:text-gray-900","dark:group-hover:text-white"],["d","M14 2a3.963 3.963 0 0 0-1.4.267 6.439 6.439 0 0 1-1.331 6.638A4 4 0 1 0 14 2Zm1 9h-1.264A6.957 6.957 0 0 1 15 15v2a2.97 2.97 0 0 1-.184 1H19a1 1 0 0 0 1-1v-1a5.006 5.006 0 0 0-5-5ZM6.5 9a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9ZM8 10H5a5.006 5.006 0 0 0-5 5v2a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-2a5.006 5.006 0 0 0-5-5Z"],["routerLink","salida",1,"flex","items-center","p-2","text-gray-900","rounded-lg","dark:text-white","hover:bg-gray-100","dark:hover:bg-gray-700","group"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"flex-shrink-0","w-6","h-6","text-gray-500","transition","duration-75","dark:text-gray-400","group-hover:text-gray-900","dark:group-hover:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 12H8m12 0-4 4m4-4-4-4M9 4H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h2"],["routerLink","ingreso",1,"flex","items-center","p-2","text-gray-900","rounded-lg","dark:text-white","hover:bg-gray-100","dark:hover:bg-gray-700","group"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 12H4m12 0-4 4m4-4-4-4m3-4h2a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-2"],["routerLink","cotizaciones",1,"flex","items-center","p-2","text-gray-900","rounded-lg","dark:text-white","hover:bg-gray-100","dark:hover:bg-gray-700","group"],["routerLink","comprobantes",1,"flex","items-center","p-2","text-gray-900","rounded-lg","dark:text-white","hover:bg-gray-100","dark:hover:bg-gray-700","group"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 18 20",1,"flex-shrink-0","w-5","h-5","text-gray-500","transition","duration-75","dark:text-gray-400","group-hover:text-gray-900","dark:group-hover:text-white"],["d","M17 5.923A1 1 0 0 0 16 5h-3V4a4 4 0 1 0-8 0v1H2a1 1 0 0 0-1 .923L.086 17.846A2 2 0 0 0 2.08 20h13.84a2 2 0 0 0 1.994-2.153L17 5.923ZM7 9a1 1 0 0 1-2 0V7h2v2Zm0-5a2 2 0 1 1 4 0v1H7V4Zm6 5a1 1 0 1 1-2 0V7h2v2Z"],["routerLink","pedidos",1,"flex","items-center","p-2","text-gray-900","rounded-lg","dark:text-white","hover:bg-gray-100","dark:hover:bg-gray-700","group"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 24 24",1,"flex-shrink-0","w-6","h-6","text-gray-500","transition","duration-75","dark:text-gray-400","group-hover:text-gray-900","dark:group-hover:text-white"],["fill-rule","evenodd","d","M20 10H4v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8ZM9 13v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1Z","clip-rule","evenodd"],["d","M2 6a2 2 0 0 1 2-2h16a2 2 0 1 1 0 4H4a2 2 0 0 1-2-2Z"],["routerLink","reportes",1,"flex","items-center","p-2","text-gray-900","rounded-lg","dark:text-white","hover:bg-gray-100","dark:hover:bg-gray-700","group"],["routerLink","categoria",1,"flex","items-center","p-2","text-gray-900","rounded-lg","dark:text-white","hover:bg-gray-100","dark:hover:bg-gray-700","group"],["d","M18.045 3.007 12.31 3a1.965 1.965 0 0 0-1.4.585l-7.33 7.394a2 2 0 0 0 0 2.805l6.573 6.631a1.957 1.957 0 0 0 1.4.585 1.965 1.965 0 0 0 1.4-.585l7.409-7.477A2 2 0 0 0 21 11.479v-5.5a2.972 2.972 0 0 0-2.955-2.972Zm-2.452 6.438a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"],["routerLink","marca",1,"flex","items-center","p-2","text-gray-900","rounded-lg","dark:text-white","hover:bg-gray-100","dark:hover:bg-gray-700","group"],["routerLink","entidades",1,"flex","items-center","p-2","text-gray-900","rounded-lg","dark:text-white","hover:bg-gray-100","dark:hover:bg-gray-700","group"],[1,"pt-4","mt-4","space-y-2","font-medium","border-t","border-gray-200","dark:border-gray-700"],["routerLink","admin-user",1,"flex","items-center","p-2","text-gray-900","transition","duration-75","rounded-lg","hover:bg-gray-100","dark:hover:bg-gray-700","dark:text-white","group"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"flex-shrink-0","w-6","h-6","text-gray-500","transition","duration-75","dark:text-gray-400","group-hover:text-gray-900","dark:group-hover:text-white"],["fill-rule","evenodd","d","M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Zm9.408-5.5a1 1 0 1 0 0 2h.01a1 1 0 1 0 0-2h-.01ZM10 10a1 1 0 1 0 0 2h1v3h-1a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2h-1v-4a1 1 0 0 0-1-1h-2Z","clip-rule","evenodd"],[1,"flex","items-center","w-full","p-2","text-gray-900","transition","duration-75","rounded-lg","hover:bg-gray-100","dark:hover:bg-gray-700","dark:text-white","group",3,"click"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 16.881V7.119a1 1 0 0 0-1.636-.772l-5.927 4.881a1 1 0 0 0 0 1.544l5.927 4.88a1 1 0 0 0 1.636-.77Z"],[1,"p-4",3,"ngClass"],[1,"p-4","border-2","border-gray-200","border-dashed","rounded-lg","dark:border-gray-700","mt-14"]],template:function(r,t){r&1&&(i(0,"nav",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),h("click",function(){return t.toggleSidebar()}),i(5,"span",5),a(6,"Alternar sidebar"),n(),y(),i(7,"svg",6),m(8,"path",7),n()(),S(),i(9,"a",8),m(10,"img",9),i(11,"span",10),a(12," | Dashboard"),n()()()()()(),i(13,"aside",11)(14,"div",12)(15,"ul",13)(16,"li")(17,"a",14),y(),i(18,"svg",15),m(19,"path",16)(20,"path",17),n(),S(),i(21,"span",18),a(22,"Dashboard"),n()()(),i(23,"li")(24,"a",19),y(),i(25,"svg",20),m(26,"path",21),n(),S(),i(27,"span",22),a(28,"Inventario"),n()()(),i(29,"li")(30,"a",23),y(),i(31,"svg",24),m(32,"path",25),n(),S(),i(33,"span",22),a(34,"Publicitarias"),n()()(),i(35,"li")(36,"a",26),y(),i(37,"svg",27),m(38,"path",28),n(),S(),i(39,"span",22),a(40,"Salida"),n()()(),i(41,"li")(42,"a",29),y(),i(43,"svg",27),m(44,"path",30),n(),S(),i(45,"span",22),a(46,"Ingreso"),n()()(),i(47,"li")(48,"a",31),y(),i(49,"svg",27),m(50,"path",28),n(),S(),i(51,"span",22),a(52,"Cotizaciones"),n()()(),i(53,"li")(54,"a",32),y(),i(55,"svg",33),m(56,"path",34),n(),S(),i(57,"span",22),a(58,"Comprobantes"),n()()(),i(59,"li")(60,"a",35),y(),i(61,"svg",36),m(62,"path",37)(63,"path",38),n(),S(),i(64,"span",22),a(65,"Pedidos"),n()()(),i(66,"li")(67,"a",39),y(),i(68,"svg",36),m(69,"path",37)(70,"path",38),n(),S(),i(71,"span",22),a(72,"Reportes"),n()()(),i(73,"li")(74,"a",40),y(),i(75,"svg",36),m(76,"path",41),n(),S(),i(77,"span",22),a(78,"Categoria"),n()()(),i(79,"li")(80,"a",42),y(),i(81,"svg",36),m(82,"path",41),n(),S(),i(83,"span",22),a(84,"Marca"),n()()(),i(85,"li")(86,"a",43),y(),i(87,"svg",24),m(88,"path",25),n(),S(),i(89,"span",22),a(90,"Entidad"),n()()()(),i(91,"ul",44)(92,"li")(93,"a",45),y(),i(94,"svg",46),m(95,"path",47),n(),S(),i(96,"span",18),a(97,"Perfil"),n()()(),i(98,"li")(99,"button",48),h("click",function(){return t.Logout()}),y(),i(100,"svg",46),m(101,"path",49),n(),S(),i(102,"span",18),a(103,"Salir"),n()()()()()(),i(104,"div",50)(105,"div",51),m(106,"router-outlet"),n()()),r&2&&(d(10),b("src",t.tenant.urllogo,de),d(3),b("ngClass",Ye(3,nr,t.isSidebarOpen,!t.isSidebarOpen)),d(91),b("ngClass",$e(6,ar,t.isSidebarOpen)))},dependencies:[D,Ie,ti,we],encapsulation:2})}return l})();var ut=ge(pe());var or=["busqueda"],lr=(l,c,e)=>({"inicial-style":l,"expand-animation-container":c,"supress-container":e});function dr(l,c){if(l&1){let e=w();i(0,"li",11)(1,"div",13),h("click",function(t){let o=g(e).$implicit,s=u();return p(s.seleccionar(t,o.id))})("keydown.enter",function(t){let o=g(e).$implicit,s=u();return p(s.seleccionar(t,o.id))})("keydown.space",function(t){let o=g(e).$implicit,s=u();return p(s.seleccionar(t,o.id))}),a(2),n()()}if(l&2){let e=c.$implicit;d(2),C(" ",e.nombre," ")}}var We=(()=>{class l{lista=[];title="";rutacreate="";Tipo="producto";emitterSelectedValue=new re;emitterSearchText=new re;inputBusqueda;SearchText="INGRENSA NUEVA CONSULTA";SelectedText="BUSCADOR";SelectedValue="";flagbusqueda;inicial=!0;debounceTimer;constructor(){this.flagbusqueda=!1}ngOnInit(){this.SelectedText=="null | null"&&(this.SelectedText="BUSCADOR")}onBusquedaChange(e){let t=e.target.value.toLowerCase();this.SearchText=t,clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.emitterSearchText.emit(this.SearchText)},300)}tooglebusqueda(){this.flagbusqueda=!this.flagbusqueda,this.inicial&&(this.inicial=!1)}seleccionar(e,r){let o=e.target.innerText;this.inputBusqueda&&(this.inputBusqueda.nativeElement.value=""),this.tooglebusqueda();let s=this.lista.find(V=>V.id===r)||null;this.Tipo==="producto"?this.SelectedText=o:this.Tipo==="cliente"&&(this.SelectedText=`${s.documento} | ${o}`),s&&(this.SelectedValue=s.id,this.emitterSelectedValue.emit(this.SelectedValue))}static \u0275fac=function(r){return new(r||l)};static \u0275cmp=M({type:l,selectors:[["app-select-search"]],viewQuery:function(r,t){if(r&1&&ve(or,7),r&2){let o;ye(o=_e())&&(t.inputBusqueda=o.first)}},inputs:{lista:"lista",title:"title",rutacreate:"rutacreate",Tipo:"Tipo",SelectedText:"SelectedText"},outputs:{emitterSelectedValue:"emitterSelectedValue",emitterSearchText:"emitterSearchText"},standalone:!0,features:[I],decls:19,vars:10,consts:[["busqueda",""],[1,"mb-6","w-full"],["for","entidad",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],[1,"flex","flex-row","items-center","justify-between","gap-2","w-full"],[1,"relative","w-full"],["tabindex","0",1,"bg-gray-50","border","border-gray-300","text-gray-900","rounded-lg","flex","flex-row","flex-nowrap","items-center","justify-between","gap-4","text-sm","cursor-pointer","w-full","h-10","p-2",3,"click","keydown.enter","keydown.space"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 8",1,"w-4","h-4","text-gray-800","transition-all",3,"ngClass"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 7 7.674 1.3a.91.91 0 0 0-1.348 0L1 7"],[1,"absolute","top-full","border","border-gray-950","rounded-lg","p-2","bg-white","shadow-lg","z-50",3,"ngClass"],["id","busqueda","type","text","spellcheck","false","aria-expanded","true","autocomplete","off","autocapitalize","none","aria-autocomplete","list","aria-owns","resultado","aria-activedescendant","select-1",1,"w-full","border","border-gray-950","rounded-md","shadow-md","pl-1",3,"change"],["id","resultado","role","listbox",1,"h-96","w-full","overflow-y-scroll","expand-animation",3,"ngClass"],["role","presentation"],["type","button",1,"inline-flex","items-center","rounded-lg","bg-blue-700","px-5","py-2.5","text-sm","font-medium","text-white","hover:bg-blue-800","focus:outline-none","focus:ring-4","focus:ring-blue-300","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"routerLink"],["tabindex","0",1,"hover:bg-blue-700","hover:text-white","rounded-lg","p-2","cursor-pointer","transition-colors","text-sm",3,"click","keydown.enter","keydown.space"]],template:function(r,t){if(r&1){let o=w();i(0,"div",1)(1,"label",2),a(2),n(),i(3,"div",3)(4,"div",4)(5,"div",5),h("click",function(){return g(o),p(t.tooglebusqueda())})("keydown.enter",function(){return g(o),p(t.tooglebusqueda())})("keydown.space",function(){return g(o),p(t.tooglebusqueda())}),i(6,"span"),a(7),n(),y(),i(8,"svg",6),m(9,"path",7),n()(),S(),i(10,"div",8)(11,"div")(12,"input",9,0),h("change",function(V){return g(o),p(t.onBusquedaChange(V))}),n()(),i(14,"ul",10),P(15,dr,3,1,"li",11,A),n()()(),i(17,"button",12),a(18," Nuevo "),n()()()}r&2&&(d(2),k(t.title),d(5),k(t.SelectedText===""?"SELECIONA UN PRODUCTO":t.SelectedText),d(),b("ngClass",t.flagbusqueda?"rotate-0":"rotate-180"),d(2),b("ngClass",Qt(6,lr,t.inicial,t.flagbusqueda&&!t.inicial,!t.flagbusqueda&&!t.inicial)),d(4),b("ngClass",t.flagbusqueda?"expand-animation":"supress"),d(),T(t.lista),d(2),b("routerLink",t.rutacreate))},dependencies:[D,Ie,we],styles:["@keyframes _ngcontent-%COMP%_expandHeight{0%{height:0;opacity:0;display:none}to{height:20rem;opacity:1;display:block}}@keyframes _ngcontent-%COMP%_supressHeight{0%{height:20rem;opacity:1;display:block}to{height:0;opacity:0;display:none}}.expand-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_expandHeight .3s ease-in-out forwards}.supress[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_supressHeight .3s ease-in-out forwards}@keyframes _ngcontent-%COMP%_expandHeightcontainer{0%{height:0;opacity:0;display:none}to{height:24rem;opacity:1;display:block}}@keyframes _ngcontent-%COMP%_supressHeightcontainer{0%{height:24rem;opacity:1;display:block}to{height:0;opacity:0;display:none}}.inicial-style[_ngcontent-%COMP%]{display:none}.expand-animation-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_expandHeightcontainer .3s ease-in-out forwards}.supress-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_supressHeightcontainer .3s ease-in-out forwards}"]})}return l})();var dt=(()=>{class l{http;authService;Url=H.API_URL+"/facturacion/tipado";headersAuthorization;headers;constructor(e,r){this.http=e,this.authService=r,this.headers=this.authService.getHeaders(),this.headersAuthorization=this.authService.getHeadersAuthorization()}getTipadoDocumentos(){return this.http.get(this.Url,{headers:this.headers})}informacionSubject=new Tt(null);enviarInformacion(e){this.informacionSubject.next(e)}obtenerInformacion(){return this.informacionSubject.asObservable()}static \u0275fac=function(r){return new(r||l)(O(U),O(ne))};static \u0275prov=q({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})();var ke=(()=>{class l{http;authService;apiUrl=H.API_URL+"/tenant/entidad";headersAuthorization;headers;constructor(e,r){this.http=e,this.authService=r,this.headers=this.authService.getHeaders(),this.headersAuthorization=this.authService.getHeadersAuthorization()}getEntidades(){return this.http.get(this.apiUrl,{headers:this.headers})}postEntidad(e){return this.http.post(this.apiUrl,e,{headers:this.headers})}search(e){return this.http.get(`${this.apiUrl}/search?search=${e}`,{headers:this.headers})}static \u0275fac=function(r){return new(r||l)(O(U),O(ne))};static \u0275prov=q({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})();var ct=(()=>{class l{http;authService;Url=H.API_URL+"/facturacion/compra";headersAuthorization;headers;constructor(e,r){this.http=e,this.authService=r,this.headers=this.authService.getHeaders(),this.headersAuthorization=this.authService.getHeadersAuthorization()}user={id:"",sub:"",name:"",given_name:"",family_name:"",picture:"",email:"",email_verified:!1,locale:"",password:"",tenantId:"",tenantName:"",regist:!1,tiponegocio:"",rol:null};registrar(e){return e.usuario_id=JSON.parse(localStorage.getItem("User")).id,this.http.post(this.Url,e,{headers:this.headers})}getCompra(e){return this.http.get(`${this.Url}/${e}`,{headers:this.headers})}Listar(){return this.http.get(this.Url,{headers:this.headers})}getpagedCompra(e,r){return this.http.get(`${this.Url}?page=${e}&size=${r}`,{headers:this.headers})}static \u0275fac=function(r){return new(r||l)(O(U),O(ne))};static \u0275prov=q({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})();function sr(l,c){if(l&1&&(i(0,"option",63),a(1),n()),l&2){let e=c.$implicit;b("value",e.id),d(),X(" ",e.id," | ",e.descripcion," ")}}function cr(l,c){if(l&1&&(i(0,"option",63),a(1),n()),l&2){let e=c.$implicit;b("value",e.id),d(),X(" ",e.id," | ",e.descripcion," ")}}function ur(l,c){if(l&1&&(i(0,"option",63),a(1),n()),l&2){let e=c.$implicit;b("value",e.id),d(),X(" ",e.id," | ",e.nombre," ")}}function mr(l,c){if(l&1){let e=w();i(0,"div",6),m(1,"div",30),i(2,"div",31)(3,"div",32)(4,"div",33)(5,"h3",34),a(6," Editar Tipado "),n(),i(7,"button",35),h("click",function(){g(e);let t=u();return p(t.EditOpen=!1)}),y(),i(8,"svg",36),m(9,"path",37),n(),S(),i(10,"span",38),a(11,"Close modal"),n()()(),i(12,"div",39)(13,"div",7)(14,"label",40),a(15,"Tipo Pago:"),n(),i(16,"select",41),v("ngModelChange",function(t){g(e);let o=u();return x(o.ventaData.id_tipopago,t)||(o.ventaData.id_tipopago=t),p(t)}),i(17,"option",42),a(18,"Elegir..."),n(),E(19,sr,2,3,"option",43),n()(),i(20,"div",7)(21,"label",44),a(22,"Tipo de Condici\xF3n"),n(),i(23,"div",45)(24,"select",46),v("ngModelChange",function(t){g(e);let o=u();return x(o.ventaData.id_tipocondicion,t)||(o.ventaData.id_tipocondicion=t),p(t)}),i(25,"option",42),a(26,"Elegir..."),n(),E(27,cr,2,3,"option",43),n(),i(28,"button",47),a(29," Agregar "),n()()(),i(30,"div",7)(31,"label",48),a(32,"Fecha de Emisi\xF3n"),n(),i(33,"input",49),v("ngModelChange",function(t){g(e);let o=u();return x(o.ventaData.fecha_emision,t)||(o.ventaData.fecha_emision=t),p(t)}),n()(),i(34,"div",7)(35,"label",50),a(36,"Fecha de Vencimiento"),n(),i(37,"input",51),v("ngModelChange",function(t){g(e);let o=u();return x(o.ventaData.fecha_vencimiento,t)||(o.ventaData.fecha_vencimiento=t),p(t)}),n()(),i(38,"div",7)(39,"label",52),a(40,"Fecha de Pago"),n(),i(41,"input",53),v("ngModelChange",function(t){g(e);let o=u();return x(o.ventaData.fechapago,t)||(o.ventaData.fechapago=t),p(t)}),n()(),i(42,"div",7)(43,"label",54),a(44,"Forma de Pago"),n(),i(45,"select",55),v("ngModelChange",function(t){g(e);let o=u();return x(o.ventaData.formapago,t)||(o.ventaData.formapago=t),p(t)}),i(46,"option",42),a(47,"Elegir..."),n(),i(48,"option",56),a(49,"Forma 1"),n(),i(50,"option",57),a(51,"Forma 2"),n(),i(52,"option",58),a(53,"Forma 3"),n()()(),i(54,"div",7)(55,"label",59),a(56,"Tipo Moneda"),n(),i(57,"select",60),v("ngModelChange",function(t){g(e);let o=u();return x(o.ventaData.id_tipomoneda,t)||(o.ventaData.id_tipomoneda=t),p(t)}),i(58,"option",42),a(59,"Elegir..."),n(),E(60,ur,2,3,"option",43),n()(),i(61,"div",7)(62,"label",61),a(63,"Tipo de Cambio"),n(),i(64,"input",62),v("ngModelChange",function(t){g(e);let o=u();return x(o.ventaData.tipo_cambio,t)||(o.ventaData.tipo_cambio=t),p(t)}),n()()()()()()}if(l&2){let e=u();d(16),f("ngModel",e.ventaData.id_tipopago),d(3),b("ngForOf",e.tipadoDocumentos==null?null:e.tipadoDocumentos.tipopagos),d(5),f("ngModel",e.ventaData.id_tipocondicion),d(3),b("ngForOf",e.tipadoDocumentos==null?null:e.tipadoDocumentos.tipocondiciones),d(6),f("ngModel",e.ventaData.fecha_emision),d(4),f("ngModel",e.ventaData.fecha_vencimiento),d(4),f("ngModel",e.ventaData.fechapago),d(4),f("ngModel",e.ventaData.formapago),d(12),f("ngModel",e.ventaData.id_tipomoneda),d(3),b("ngForOf",e.tipadoDocumentos==null?null:e.tipadoDocumentos.tipomonedas),d(4),f("ngModel",e.ventaData.tipo_cambio)}}function gr(l,c){if(l&1){let e=w();i(0,"tr")(1,"td",71),a(2),n(),i(3,"td",71)(4,"button",72),h("click",function(){let t=g(e).$implicit,o=u(2);return p(o.SeleccionarSeriesProducto(t))}),a(5," Eliminar "),n()()()}if(l&2){let e=c.$implicit;d(2),k(e)}}function pr(l,c){if(l&1){let e=w();i(0,"div",6),m(1,"div",30),i(2,"div",31)(3,"div",32)(4,"div",64)(5,"div",65)(6,"div")(7,"h3",34),a(8),n()(),i(9,"div")(10,"h4",34),a(11),n()()(),i(12,"button",35),h("click",function(){g(e);let t=u();return p(t.toggleInsertModal())}),y(),i(13,"svg",36),m(14,"path",37),n(),S(),i(15,"span",38),a(16,"Close modal"),n()()(),i(17,"div",39)(18,"div",7)(19,"label",66),a(20,"Serie del Producto"),n(),i(21,"input",67),h("keyup.enter",function(t){g(e);let o=u();return p(o.agregarProductoDetalle(t))}),n()(),i(22,"div",68)(23,"table",69)(24,"thead")(25,"tr")(26,"th",18),a(27,"Serie"),n(),i(28,"th",18),a(29,"Seleccionar"),n()()(),i(30,"tbody"),E(31,gr,6,1,"tr",70),n()()()()()()()}if(l&2){let e=u();d(8),C(" Producto: ",e.productoselected==null?null:e.productoselected.nombre," "),d(3),C(" Cant: ",e.SeriesProducto.length," "),d(20),b("ngForOf",e.SeriesProducto)}}function hr(l,c){if(l&1){let e=w();i(0,"tr",73)(1,"td",74),a(2),n(),i(3,"td",71),a(4),n(),i(5,"td",75),a(6),B(7,"currency"),n(),i(8,"td",76),a(9),B(10,"currency"),n(),i(11,"td",77),y(),i(12,"svg",78),h("click",function(){let t=g(e).$implicit,o=u(2);return p(o.deleteProducto(t.id_producto))}),m(13,"path",79),n(),i(14,"svg",80),h("click",function(){let t=g(e).$index,o=u(2);return p(o.verModalSeries(t))}),i(15,"g")(16,"g"),m(17,"path",81),n(),i(18,"g"),m(19,"path",82),n(),i(20,"g"),m(21,"path",83),n()()()()()}if(l&2){let e=c.$implicit;d(2),k(e.cantidad),d(2),k(e.nombre),d(2),C(" ",R(7,4,e.precio_unitario,"S/. ")," "),d(3),C(" ",R(10,7,e.precio_total,"S/. ")," ")}}function br(l,c){if(l&1&&(i(0,"tbody"),P(1,hr,22,10,"tr",73,A),n()),l&2){let e=u();d(),T(e.ventaData.detalles)}}var wt=(()=>{class l{productoService;tipadoService;entidadService;registroCompraService;route;listaProductos=[];listaEntidades=[];tipadoDocumentos;SeriesProducto=[];productoselected;clienteselected;flagEDICION=!0;constructor(e,r,t,o,s){this.productoService=e,this.tipadoService=r,this.entidadService=t,this.registroCompraService=o,this.route=s}ventaData={documento:"F001-0000",documento_cliente:"",usuario_id:"",id_tipocondicion:1,id_tipopago:1,id_tipomoneda:1,tipo_cambio:3,fecha_emision:"2024-06-01T15:30:00.000",fecha_vencimiento:"2024-06-01T15:30:00.000",nota:"",gravada:this.totalGravada,impuesto:this.igv,total:this.totalPagar,fechapago:"2024-06-01T15:30:00.000",formapago:"",detalles:[]};ngOnInit(){this.setFechaEmision(),this.cargarProductos(),this.cargarTipado(),this.cargarClientes();let e=this.route.snapshot.paramMap.get("id");e&&(this.flagEDICION=!1,this.cargarIngreso(e))}cargarIngreso(e){this.registroCompraService.getCompra(e).subscribe(r=>{this.ventaData=r,this.clienteselected=this.listaEntidades.find(t=>t.id===this.ventaData.documento_cliente)})}verModalSeries(e){this.SeriesProducto=this.ventaData.detalles[e].series,this.toggleInsertModal()}guardarProductos(){if(!this.flagEDICION){ut.default.fire({icon:"info",title:"NO SE PUEDE REGISTRAR",text:"no se puede modificar una compra ya registrada"});return}this.ventaData.gravada=this.totalGravada,this.ventaData.impuesto=this.igv,this.ventaData.total=this.totalPagar,this.ventaData.fecha_emision?.includes("T00:00:00.00")||(this.ventaData.fecha_emision=`${this.ventaData.fecha_emision}T00:00:00.00`),this.ventaData.fecha_vencimiento?.includes("T00:00:00.00")||(this.ventaData.fecha_vencimiento=`${this.ventaData.fecha_vencimiento}T00:00:00.00`),this.ventaData.fechapago?.includes("T00:00:00.00")||(this.ventaData.fechapago=`${this.ventaData.fechapago}T00:00:00.00`),this.registroCompraService.registrar(this.ventaData).subscribe(e=>{this.ventaData.detalles=[],ut.default.fire({icon:"success",title:"Compra Registrada",text:e.message,timer:1e3})},e=>{ut.default.fire({icon:"error",title:"Error en Compra",text:e.error.message})})}cargarProductos(){this.productoService.getListaProductosFact().subscribe(e=>{this.listaProductos=e},e=>{console.error("Error al obtener los productos:",e)})}cargarTipado(){this.tipadoService.getTipadoDocumentos().subscribe(e=>{this.tipadoDocumentos=e,this.ventaData.id_tipocondicion=e.tipocondiciones[0].id,this.ventaData.id_tipopago=e.tipopagos[0].id,this.ventaData.id_tipomoneda=e.tipomonedas[0].id},e=>{console.error("Error al obtener los tipos de documentos:",e)})}cargarClientes(){this.entidadService.getEntidades().subscribe(e=>{this.listaEntidades=e})}agregarProductoDetalle(e){let r=e.target,t=r.value.trim();r.value="";let o=this.ventaData.detalles.findIndex(s=>s.id_producto===this.productoselected?.id);if(t!=="")if(o!==-1){if(!this.ventaData.detalles[o].series.includes(t)){this.ventaData.detalles[o].series.push(t);let s=this.ventaData.detalles[o].cantidad+1;this.ventaData.detalles[o].cantidad=s,this.ventaData.detalles[o].precio_total=this.ventaData.detalles[o].precio_unitario*s,this.SeriesProducto=this.ventaData.detalles[o].series}}else{let s={id_producto:this.productoselected.id,nombre:this.productoselected.nombre,cantidad:1,series:[t],precio_unitario:this.productoselected.precio,precio_total:this.productoselected.precio};this.ventaData.detalles.push(s),this.SeriesProducto=[t]}}productSearch(e){this.productoService.getProductoSearch(e).subscribe(r=>{this.listaProductos=r},r=>{console.error("Error al obtener los productos:",r)})}seleccionarProducto(e){if(e){let r=this.ventaData.detalles.find(t=>t.id_producto==e);r?this.SeriesProducto=r.series:this.SeriesProducto=[],this.productoselected=this.listaProductos.find(t=>t.id==e),this.toggleInsertModal()}}deleteProducto(e){this.ventaData.detalles=this.ventaData.detalles.filter(r=>r.id_producto!=e)}clienteSearch(e){this.entidadService.search(e).subscribe(r=>{this.listaEntidades=r})}clienteSelect(e){e&&(this.ventaData.documento_cliente=e)}setFechaEmision(){let e=new Date,r=e.getDate().toString().padStart(2,"0"),t=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getFullYear();this.ventaData.fecha_emision=`${o}-${t}-${r}`,this.ventaData.fecha_vencimiento=`${o}-${t}-${r}`,this.ventaData.fechapago=`${o}-${t}-${r}`}SeleccionarSeriesProducto(e){let r=this.ventaData.detalles.find(t=>t.id_producto===this.productoselected?.id);if(r)if(r.cantidad==1)this.ventaData.detalles=this.ventaData.detalles.filter(t=>t!=r),this.SeriesProducto=[];else{r.series=r.series.filter(o=>o!=e);let t=r.cantidad-1;r.cantidad=t,r.precio_total=r.precio_unitario*t,this.SeriesProducto=r.series}}get totalGravada(){return this.totalPagar/1.18}get igv(){return this.totalGravada*.18}get totalPagar(){return this.ventaData?.detalles.reduce((e,r)=>e+r.precio_total,0)}EditOpen=!1;InsertOpen=!1;openEModal(){this.EditOpen=!0}toggleInsertModal(){this.InsertOpen=!this.InsertOpen}router=W(ee);CrearNuevaEntidad(){this.router.navigate(["/dashboard/entidades"])}static \u0275fac=function(r){return new(r||l)(_(ae),_(dt),_(ke),_(ct),_(Ae))};static \u0275cmp=M({type:l,selectors:[["app-fac-ingreso"]],standalone:!0,features:[I],decls:65,vars:25,consts:[[1,"text-2xl","text-center","font-extrabold","text-gray-800","dark:text-white"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-3"],["role","button","tabindex","0","aria-label","Abrir modal",1,"icon-container",3,"click","keydown.enter","keydown.space"],["xmlns","http://www.w3.org/2000/svg","height","40px","viewBox","0 -960 960 960","width","30px","fill","#000000"],["d","m382-80-18.67-126.67q-17-6.33-34.83-16.66-17.83-10.34-32.17-21.67L178-192.33 79.33-365l106.34-78.67q-1.67-8.33-2-18.16-.34-9.84-.34-18.17 0-8.33.34-18.17.33-9.83 2-18.16L79.33-595 178-767.67 296.33-715q14.34-11.33 32.34-21.67 18-10.33 34.66-16L382-880h196l18.67 126.67q17 6.33 35.16 16.33 18.17 10 31.84 22L782-767.67 880.67-595l-106.34 77.33q1.67 9 2 18.84.34 9.83.34 18.83 0 9-.34 18.5Q776-452 774-443l106.33 78-98.66 172.67-118-52.67q-14.34 11.33-32 22-17.67 10.67-35 16.33L578-80H382Zm55.33-66.67h85l14-110q32.34-8 60.84-24.5T649-321l103.67 44.33 39.66-70.66L701-415q4.33-16 6.67-32.17Q710-463.33 710-480q0-16.67-2-32.83-2-16.17-7-32.17l91.33-67.67-39.66-70.66L649-638.67q-22.67-25-50.83-41.83-28.17-16.83-61.84-22.83l-13.66-110h-85l-14 110q-33 7.33-61.5 23.83T311-639l-103.67-44.33-39.66 70.66L259-545.33Q254.67-529 252.33-513 250-497 250-480q0 16.67 2.33 32.67 2.34 16 6.67 32.33l-91.33 67.67 39.66 70.66L311-321.33q23.33 23.66 51.83 40.16 28.5 16.5 60.84 24.5l13.66 110Zm43.34-200q55.33 0 94.33-39T614-480q0-55.33-39-94.33t-94.33-39q-55.67 0-94.5 39-38.84 39-38.84 94.33t38.84 94.33q38.83 39 94.5 39ZM480-480Z"],["tabindex","-1","aria-hidden","true",1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"mb-6"],["for","co",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","co","name","co","placeholder","0","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],[1,"w-full",3,"emitterSearchText","emitterSelectedValue","lista","title","rutacreate","Tipo","SelectedText"],["for","nota",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","nota","name","nota","placeholder","Nota venta",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],[3,"emitterSearchText","emitterSelectedValue","lista","title","rutacreate"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3","max-w-16"],["scope","col",1,"px-6","py-3"],["scope","col",1,"px-6","py-3","max-w-32"],["scope","col",1,"px-6","py-3","w-fit"],[1,"grid","gap-6","mb-6","md:grid-cols-2"],["for","gra",1,"form-label"],["type","text","id","gra","disabled","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"value"],["for","igv",1,"form-label"],["type","text","id","igv","disabled","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"value"],["for","pagar",1,"form-label"],["type","text","id","pagar","disabled","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"value"],[1,"my-4"],["type","submit",1,"w-full","items-center","rounded-lg","bg-blue-700","px-5","py-2.5","text-sm","font-medium","text-white","hover:bg-blue-800","focus:outline-none","focus:ring-4","focus:ring-blue-300","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],[1,"fixed","inset-0","bg-black","bg-opacity-50"],[1,"relative","flex","items-center","justify-center","min-h-screen","p-4"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700","max-w-2xl","w-full"],[1,"flex","items-center","justify-between","p-4","md:p-5","border-b","rounded-t","dark:border-gray-600"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],["type","button",1,"text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","inline-flex","justify-center","items-center","dark:hover:bg-gray-600","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],[1,"p-4","md:p-5","space-y-4"],["for","tipoPagoSelec",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","tipoPagoSelec","name","tipoPagoSelec",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["for","tipoCondSelec",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],[1,"flex","items-center","space-x-2"],["id","tipoCondSelec","name","tipoCondSelec",1,"block","w-full","p-2","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["type","submit",1,"h-10","text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-3","py-1","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800"],["for","fecha-emision",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","date","id","fecha-emision","name","fechaEmision","placeholder","yyyy-mm-dd",1,"w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","fecha-venci",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","date","id","fecha-vencimiento","name","fechaVencimiento","placeholder","yyyy-mm-dd",1,"w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","fecha-pago",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","date","id","fecha-pago","name","fechaPago","placeholder","yyyy-mm-dd",1,"w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","formaPago",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","formaPago","name","formaPago",1,"block","w-full","p-2","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["value","1"],["value","2"],["value","3"],["for","tipoMoneda",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","tipoMoneda","name","tipoMoneda",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","tipoCambio",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","tipoCambio","name","tipoCambio","placeholder","Tipo de Cambio...",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],[3,"value"],[1,"flex","items-center","justify-between","p-4","md:p-5","border-b","rounded-t","dark:border-gray-600","gap-8"],[1,"flex","flex-row","justify-between","w-full"],["for","inputserie",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","inputserie","name","inputserie","spellcheck","false","aria-expanded","false","autocomplete","off","autocapitalize","none","placeholder","Ingrese la serie del producto...",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup.enter"],[2,"max-height","300px","overflow-y","auto","margin","auto"],[2,"margin","auto","width","100%"],[4,"ngFor","ngForOf"],[1,"px-6","py-4"],["type","button",1,"focus:outline-none","text-white","bg-red-700","hover:bg-red-800","focus:ring-4","focus:ring-red-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","me-2","mb-2","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-900",3,"click"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600"],[1,"px-6","py-4","max-w-16"],[1,"px-6","py-4","max-w-32"],[1,"px-6","py-4","w-fit"],[1,"px-6","py-4","w-fit","flex","flex-row","flex-nowrap","items-center","justify-start","gap-2"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-red-600","dark:text-red-600","hover:scale-110","hover:cursor-pointer",3,"click"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M5 7h14m-9 3v8m4-8v8M10 3h4a1 1 0 0 1 1 1v3H9V4a1 1 0 0 1 1-1ZM6 7h12v13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7Z"],["fill","#1a56db","version","1.1","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","width","24","height","24","viewBox","0 0 442.04 442.04",0,"xml","space","preserve",1,"w-6","h-6","hover:scale-110","hover:cursor-pointer",3,"click"],["d",`M221.02,341.304c-49.708,0-103.206-19.44-154.71-56.22C27.808,257.59,4.044,230.351,3.051,229.203
			c-4.068-4.697-4.068-11.669,0-16.367c0.993-1.146,24.756-28.387,63.259-55.881c51.505-36.777,105.003-56.219,154.71-56.219
			c49.708,0,103.207,19.441,154.71,56.219c38.502,27.494,62.266,54.734,63.259,55.881c4.068,4.697,4.068,11.669,0,16.367
			c-0.993,1.146-24.756,28.387-63.259,55.881C324.227,321.863,270.729,341.304,221.02,341.304z M29.638,221.021
			c9.61,9.799,27.747,27.03,51.694,44.071c32.83,23.361,83.714,51.212,139.688,51.212s106.859-27.851,139.688-51.212
			c23.944-17.038,42.082-34.271,51.694-44.071c-9.609-9.799-27.747-27.03-51.694-44.071
			c-32.829-23.362-83.714-51.212-139.688-51.212s-106.858,27.85-139.688,51.212C57.388,193.988,39.25,211.219,29.638,221.021z`],["d",`M221.02,298.521c-42.734,0-77.5-34.767-77.5-77.5c0-42.733,34.766-77.5,77.5-77.5c18.794,0,36.924,6.814,51.048,19.188
			c5.193,4.549,5.715,12.446,1.166,17.639c-4.549,5.193-12.447,5.714-17.639,1.166c-9.564-8.379-21.844-12.993-34.576-12.993
			c-28.949,0-52.5,23.552-52.5,52.5s23.551,52.5,52.5,52.5c28.95,0,52.5-23.552,52.5-52.5c0-6.903,5.597-12.5,12.5-12.5
			s12.5,5.597,12.5,12.5C298.521,263.754,263.754,298.521,221.02,298.521z`],["d","M221.02,246.021c-13.785,0-25-11.215-25-25s11.215-25,25-25c13.786,0,25,11.215,25,25S234.806,246.021,221.02,246.021z"]],template:function(r,t){r&1&&(i(0,"p",0),a(1,` Facturaci\xF3n: Ingreso
`),n(),m(2,"br"),i(3,"div",1)(4,"h2",2)(5,"b"),a(6,"Informaci\xF3n"),n()(),i(7,"div",3),h("click",function(){return t.openEModal()})("keydown.enter",function(){return t.openEModal()})("keydown.space",function(){return t.openEModal()}),y(),i(8,"svg",4),m(9,"path",5),n()()(),E(10,mr,65,11,"div",6)(11,pr,32,3,"div",6),S(),i(12,"form")(13,"div",7)(14,"label",8),a(15,"Correlativo"),n(),i(16,"input",9),v("ngModelChange",function(s){return x(t.ventaData.documento,s)||(t.ventaData.documento=s),s}),n()(),i(17,"app-select-search",10),h("emitterSearchText",function(s){return t.clienteSearch(s)})("emitterSelectedValue",function(s){return t.clienteSelect(s)}),n(),i(18,"div",7)(19,"label",11),a(20,"Nota (Opcional)"),n(),i(21,"input",12),v("ngModelChange",function(s){return x(t.ventaData.nota,s)||(t.ventaData.nota=s),s}),n()(),i(22,"app-select-search",13),h("emitterSearchText",function(s){return t.productSearch(s)})("emitterSelectedValue",function(s){return t.seleccionarProducto(s)}),n()(),m(23,"hr"),i(24,"div",14)(25,"table",15)(26,"thead",16)(27,"tr")(28,"th",17),a(29,"Cantidad"),n(),i(30,"th",18),a(31,"Nombre"),n(),i(32,"th",19),a(33,"P. Unit"),n(),i(34,"th",20),a(35,"P. Total"),n(),i(36,"th",17),a(37,"Accion"),n()()(),E(38,br,3,0,"tbody"),n()(),m(39,"hr")(40,"br"),i(41,"div",21)(42,"div")(43,"label",22),a(44,"Gravada (sin IGV)"),n()(),i(45,"div"),m(46,"input",23),B(47,"currency"),n()(),i(48,"div",21)(49,"div")(50,"label",24),a(51,"Impuesto IGV (18%)"),n()(),i(52,"div"),m(53,"input",25),B(54,"currency"),n()(),i(55,"div",21)(56,"div")(57,"label",26),a(58,"Total Pagar"),n()(),i(59,"div"),m(60,"input",27),B(61,"currency"),n()(),m(62,"hr",28),i(63,"button",29),h("click",function(){return t.guardarProductos()}),a(64,` Continuar con la compra
`),n()),r&2&&(d(10),K(t.EditOpen?10:-1),d(),K(t.InsertOpen?11:-1),d(5),f("ngModel",t.ventaData.documento),d(),b("lista",t.listaEntidades)("title","Cliente")("rutacreate","/dashboard/entidades")("Tipo","cliente")("SelectedText",(t.clienteselected==null?null:t.clienteselected.documento)+" | "+(t.clienteselected==null?null:t.clienteselected.nombre)),d(4),f("ngModel",t.ventaData.nota),d(),b("lista",t.listaProductos)("title","Producto")("rutacreate","/dashboard/inventario"),d(16),K(t.ventaData.detalles&&t.ventaData.detalles.length>0?38:-1),d(8),b("value",R(47,16,t.totalGravada,"S/. ")),d(7),b("value",R(54,19,t.igv,"S/. ")),d(7),b("value",R(61,22,t.totalPagar,"S/. ")))},dependencies:[ue,L,J,te,ie,G,oe,z,Z,me,j,Q,D,he,We]})}return l})();var mt=(()=>{class l{http;authService;Url=H.API_URL+"/facturacion/venta";headersAuthorization;headers;constructor(e,r){this.http=e,this.authService=r,this.headers=this.authService.getHeaders(),this.headersAuthorization=this.authService.getHeadersAuthorization()}user={id:"",sub:"",name:"",given_name:"",family_name:"",picture:"",email:"",email_verified:!1,locale:"",password:"",tenantId:"",tenantName:"",regist:!1,tiponegocio:"",rol:null};registrar(e){return e.usuario_id=JSON.parse(localStorage.getItem("User")).id,this.http.post(this.Url,e,{headers:this.headers})}Listar(){return this.http.get(this.Url,{headers:this.headers})}getVenta(e){return this.http.get(`${this.Url}/${e}`,{headers:this.headers})}getpagedVenta(e,r){return this.http.get(`${this.Url}?page=${e}&size=${r}`,{headers:this.headers})}static \u0275fac=function(r){return new(r||l)(O(U),O(ne))};static \u0275prov=q({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})();function fr(l,c){if(l&1){let e=w();i(0,"tr",10)(1,"th",14),a(2),n(),i(3,"td",15),a(4),n(),i(5,"td",15),a(6),n(),i(7,"td",15),a(8),n(),i(9,"td",15),a(10),n(),i(11,"td",15),a(12),B(13,"currency"),n(),i(14,"td",16)(15,"a",17),h("click",function(){let t=g(e).$index,o=u();return p(o.redireccionar(t))})("keydown.enter",function(){let t=g(e).$index,o=u();return p(o.redireccionar(t))})("keydown.space",function(){let t=g(e).$index,o=u();return p(o.redireccionar(t))}),a(16,"Ver"),n()()()}if(l&2){let e=c.$implicit;d(2),C(" ",e.fecha_emision.split("T")[0]," "),d(2),k(e.negocio.nombre),d(2),k(e.documento),d(2),k(e.cliente.documento),d(2),k(e.cliente.nombre),d(2),k(R(13,6,e.total,"S/. "))}}var fi=(()=>{class l{ventaService;compraService;router;Documentos=[];tipo="venta";page=1;pageSize=15;totalPages=0;constructor(e,r,t){this.ventaService=e,this.compraService=r,this.router=t}ngOnInit(){this.consulta(this.tipo)}consulta(e){if(typeof e=="string")this.realizarConsulta(e);else{let r=e.target;this.tipo!=r.value&&(this.page=1),this.realizarConsulta(r.value)}}realizarConsulta(e){e==="venta"?(this.tipo="venta",this.ventaService.getpagedVenta(this.page,this.pageSize).subscribe(r=>{this.Documentos=r.documentos,this.totalPages=r.totalPages})):e==="compra"&&(this.tipo="compra",this.compraService.getpagedCompra(this.page,this.pageSize).subscribe(r=>{this.Documentos=r.documentos,this.totalPages=r.totalPages}))}redireccionar(e){let r=this.Documentos[e].id;console.log(r),this.tipo==="compra"?this.router.navigate(["/dashboard/ingreso",r]):this.tipo==="venta"&&this.router.navigate(["/dashboard/salida",r])}onPageChange(e){this.page=e,this.consulta(this.tipo)}static \u0275fac=function(r){return new(r||l)(_(mt),_(ct),_(ee))};static \u0275cmp=M({type:l,selectors:[["app-comprobantes"]],standalone:!0,features:[I],decls:37,vars:4,consts:[[1,"max-w-sm","mx-auto"],["for","comprobante",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["name","comprobante","id","comprobante",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"change"],["value","venta"],["value","compra"],[1,"my-4"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600"],[1,"flex","justify-center","mt-4"],[1,"px-3","py-1","mx-1","text-sm","font-medium","text-white","bg-blue-500","rounded-md","hover:bg-blue-600",3,"click","disabled"],[1,"px-3","py-1","mx-1","text-sm","font-medium"],["scope","row",1,"px-6","py-4","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"px-6","py-4"],[1,"px-6","py-4","text-right"],["tabindex","0",1,"font-medium","text-blue-600","dark:text-blue-500","hover:underline","cursor-pointer",3,"click","keydown.enter","keydown.space"]],template:function(r,t){r&1&&(i(0,"form",0)(1,"label",1),a(2," Seleccionar Comprobante "),n(),i(3,"select",2),h("change",function(s){return t.consulta(s)}),i(4,"option",3),a(5,"Venta"),n(),i(6,"option",4),a(7,"Compra"),n()()(),m(8,"hr",5),i(9,"div",6)(10,"table",7)(11,"thead",8)(12,"tr")(13,"th",9),a(14,"Fecha"),n(),i(15,"th",9),a(16,"Emisor"),n(),i(17,"th",9),a(18,"Numeracion"),n(),i(19,"th",9),a(20,"RUC/DNI/ETC"),n(),i(21,"th",9),a(22,"Denominaci\xF3n"),n(),i(23,"th",9),a(24,"Total"),n(),i(25,"th",9),a(26,"Acci\xF3n"),n()()(),i(27,"tbody"),P(28,fr,17,9,"tr",10,A),n()(),i(30,"div",11)(31,"button",12),h("click",function(){return t.onPageChange(t.page-1)}),a(32," Anterior "),n(),i(33,"span",13),a(34),n(),i(35,"button",12),h("click",function(){return t.onPageChange(t.page+1)}),a(36," Siguiente "),n()()()),r&2&&(d(28),T(t.Documentos),d(3),b("disabled",t.page===1),d(3),X(" P\xE1gina ",t.page," de ",t.totalPages," "),d(),b("disabled",t.page===t.totalPages))},dependencies:[L,J,te,ie,Z,Q,D,ue],encapsulation:2})}return l})();var kt=ge(pe());var gt=(()=>{class l{http;apiUrl=H.API_URL+"/tenant/entidad";constructor(e){this.http=e}user={id:"",sub:"",name:"",given_name:"",family_name:"",picture:"",email:"",email_verified:!1,locale:"",password:"",tenantId:"",tenantName:"",regist:!1,tiponegocio:"",rol:null};headers=new Se({Authorization:`Bearer ${localStorage.getItem("authToken")}`});getUsuario(){return this.http.get(`${this.apiUrl}/byusername/${localStorage.getItem("username")}`,{headers:this.headers})}putUsuario(e){return this.http.put(`${this.apiUrl}/asignarrol`,e,{headers:this.headers})}getUsuariosDeshboard(){return this.http.get(`${this.apiUrl}/dashboard`,{headers:this.headers})}static \u0275fac=function(r){return new(r||l)(O(U))};static \u0275prov=q({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})();var vi=(()=>{class l{usuarioService;constructor(e){this.usuarioService=e}usuario;selectedRole=null;ngOnInit(){this.selectedRole=this.usuario.Rol.id}asignarRol(){if(this.usuario!=null&&this.selectedRole!=null){let e={id:this.usuario.id,rolId:this.selectedRole?this.selectedRole:0};this.usuarioService.putUsuario(e).subscribe(r=>{kt.default.fire({icon:"success",title:"Rol Actualizado Correctamente",text:r.message})},r=>{kt.default.fire({icon:"error",title:r.error.message})})}}static \u0275fac=function(r){return new(r||l)(_(gt))};static \u0275cmp=M({type:l,selectors:[["app-asignar-rol"]],inputs:{usuario:"usuario"},standalone:!0,features:[I],decls:13,vars:1,consts:[[1,"flex","flex-col","gap-5"],[1,"input-group"],["id","marca","name","marca",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["value","1"],["value","2"],["value","3"],["value","4"],["type","submit",1,"block","text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"]],template:function(r,t){r&1&&(i(0,"div",0)(1,"div",1)(2,"select",2),v("ngModelChange",function(s){return x(t.selectedRole,s)||(t.selectedRole=s),s}),i(3,"option",3),a(4,"administrador"),n(),i(5,"option",4),a(6,"vendedor"),n(),i(7,"option",5),a(8,"almacenero"),n(),i(9,"option",6),a(10,"cliente"),n()()(),i(11,"button",7),h("click",function(){return t.asignarRol()}),a(12,"Asignar"),n()()),r&2&&(d(2),f("ngModel",t.selectedRole))},dependencies:[L,te,ie,oe,z,j,D]})}return l})();function xr(l,c){if(l&1){let e=w();i(0,"div",0),m(1,"div",18),i(2,"div",19)(3,"div",20)(4,"div",21)(5,"h3",22),a(6," A\xF1adir Producto "),n(),i(7,"button",23),h("click",function(){g(e);let t=u();return p(t.DetalleOpen=!1)}),y(),i(8,"svg",24),m(9,"path",25),n(),S(),i(10,"span",26),a(11,"Close modal"),n()()(),i(12,"div",27),m(13,"app-asignar-rol",28),n()()()()}if(l&2){let e=u();d(13),b("usuario",e.UsuarioSelect)}}function vr(l,c){if(l&1){let e=w();i(0,"tr",32)(1,"th",33),a(2),n(),i(3,"td",34),a(4),n(),i(5,"td",34),a(6),n(),i(7,"td")(8,"button",35),h("click",function(){let t=g(e).$implicit,o=u(2);return p(o.EditarRol(t))}),a(9," Asignar rol "),n()()()}if(l&2){let e=c.$implicit;d(2),C(" ",e.documento," "),d(2),X("",e.nombre," ",e.apellido,""),d(2),k(e.Rol.nombre)}}function yr(l,c){if(l&1&&(i(0,"div",17)(1,"table",29)(2,"thead",30)(3,"tr")(4,"th",31),a(5,"Documento"),n(),i(6,"th",31),a(7,"Nombre"),n(),i(8,"th",31),a(9,"Rol"),n(),i(10,"th",31),a(11,"Asignar"),n()()(),i(12,"tbody"),P(13,vr,10,4,"tr",32,A),n()()()),l&2){let e=u();d(13),T(e.Usuarios)}}var yi=(()=>{class l{usuarioService;tenantService;constructor(e,r){this.usuarioService=e,this.tenantService=r}DetalleOpen=!1;Usuarios=[];UsuarioSelect;UsuarioPrincipal;Pasarela={username:"",password:"",hash:"",publickey:""};ngOnInit(){this.usuarioService.getUsuariosDeshboard().subscribe(e=>{this.Usuarios=e,this.UsuarioPrincipal=JSON.parse(localStorage.getItem("User"))})}EditarRol(e){this.UsuarioSelect=e,this.UsuarioSelect&&(this.DetalleOpen=!0)}ActualizarPasarella(){console.log("holis"),this.tenantService.postPasarela(this.Pasarela).subscribe(e=>{console.log(e)})}static \u0275fac=function(r){return new(r||l)(_(gt),_(Xe))};static \u0275cmp=M({type:l,selectors:[["app-admin-users"]],standalone:!0,features:[I],decls:45,vars:11,consts:[["tabindex","-1","aria-hidden","true",1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"container"],[1,"container",2,"margin","auto"],[1,"text-2xl","text-center","font-extrabold","text-gray-800","dark:text-white","mb-6"],[2,"font-weight","bold"],[1,"my-4"],[1,"text-2xl","text-center","font-extrabold","text-gray-800","dark:text-white","my-6"],[1,"mb-6"],["for","Username",1,"block"],["type","text","id","Username","name","Username",1,"border","border-gray-200","rounded-md","w-full",3,"ngModelChange","ngModel"],["for","Password",1,"block"],["type","text","id","Password","name","Password",1,"border","border-gray-200","rounded-md","w-full",3,"ngModelChange","ngModel"],["for","Hash",1,"block"],["type","text","id","Hash","name","Hash",1,"border","border-gray-200","rounded-md","w-full",3,"ngModelChange","ngModel"],["for","Public-Key",1,"block"],["type","text","id","Public-Key","name","Public-Key",1,"border","border-gray-200","rounded-md","w-full",3,"ngModelChange","ngModel"],["type","button",1,"block","text-white","bg-blue-700","hover:bg-blue-800","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center",3,"click"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"fixed","inset-0","bg-black","bg-opacity-50"],[1,"relative","flex","items-center","justify-center","min-h-screen","p-4"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700","max-w-2xl","w-full"],[1,"flex","items-center","justify-between","p-4","md:p-5","border-b","rounded-t","dark:border-gray-600"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],["type","button",1,"text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","inline-flex","justify-center","items-center","dark:hover:bg-gray-600","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],[1,"p-4","md:p-5","space-y-4"],[3,"usuario"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600"],["scope","row",1,"px-6","py-4","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"px-6","py-4"],["data-modal-target","default-modal","data-modal-toggle","default-modal","type","button",1,"block","text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"]],template:function(r,t){r&1&&(E(0,xr,14,1,"div",0),i(1,"div",1)(2,"div",2)(3,"p",3),a(4," Informacion de Usuario Actual "),n(),i(5,"p")(6,"span",4),a(7,"Email: "),n(),a(8),n(),i(9,"p")(10,"span",4),a(11,"Nombre: "),n(),a(12),n(),i(13,"p")(14,"span",4),a(15,"Documento: "),n(),a(16),n(),i(17,"p")(18,"span",4),a(19,"Direccion: "),n(),a(20),n()(),m(21,"hr",5),i(22,"div",2)(23,"p",6),a(24," Configuracion Pasarela de Pagos Izipay "),n(),i(25,"div",7)(26,"label",8),a(27,"Username:"),n(),i(28,"input",9),v("ngModelChange",function(s){return x(t.Pasarela.username,s)||(t.Pasarela.username=s),s}),n()(),i(29,"div",7)(30,"label",10),a(31,"Password:"),n(),i(32,"input",11),v("ngModelChange",function(s){return x(t.Pasarela.password,s)||(t.Pasarela.password=s),s}),n()(),i(33,"div",7)(34,"label",12),a(35,"Hash:"),n(),i(36,"input",13),v("ngModelChange",function(s){return x(t.Pasarela.hash,s)||(t.Pasarela.hash=s),s}),n()(),i(37,"div",7)(38,"label",14),a(39,"Public Key:"),n(),i(40,"input",15),v("ngModelChange",function(s){return x(t.Pasarela.publickey,s)||(t.Pasarela.publickey=s),s}),n()(),i(41,"button",16),h("click",function(){return t.ActualizarPasarella()}),a(42," Actualizar Pasarela "),n()(),m(43,"hr",5),E(44,yr,15,0,"div",17),n()),r&2&&(K(t.DetalleOpen?0:-1),d(8),C("",t.UsuarioPrincipal.email," "),d(4),X("",t.UsuarioPrincipal.nombre," ",t.UsuarioPrincipal.apellido," "),d(4),C("",t.UsuarioPrincipal.documento," "),d(4),C("",t.UsuarioPrincipal.direccion," "),d(8),f("ngModel",t.Pasarela.username),d(4),f("ngModel",t.Pasarela.password),d(4),f("ngModel",t.Pasarela.hash),d(4),f("ngModel",t.Pasarela.publickey),d(4),K(t.UsuarioPrincipal.Rol.nombre==="administrador"?44:-1))},dependencies:[vi,L,G,z,j,D],encapsulation:2,changeDetection:0})}return l})();function _r(l,c){if(l&1&&(i(0,"tr",16)(1,"td",19),a(2),n(),i(3,"td",19),a(4),n(),i(5,"td",19),m(6,"img",20),n()()),l&2){let e=c.$implicit;d(2),k(e==null?null:e.product.nombre),d(2),k(e==null?null:e.quantity),d(2),b("src",e==null||e.product==null?null:e.product.imagen_principal,de)}}function Sr(l,c){if(l&1){let e=w();i(0,"div",1)(1,"label",21),a(2,"Email"),n(),i(3,"select",22),v("ngModelChange",function(t){g(e);let o=u();return x(o.pedidoselect.estado,t)||(o.pedidoselect.estado=t),p(t)}),i(4,"option",23),a(5,"NINGUNO"),n(),i(6,"option",24),a(7,"NUEVO"),n(),i(8,"option",25),a(9,"PROCESADO"),n(),i(10,"option",26),a(11,"ENVIADO"),n()()()}if(l&2){let e=u();d(3),f("ngModel",e.pedidoselect.estado)}}var _i=(()=>{class l{pedidoselect;pedidoService=W(ze);cambiorealizado=!1;onRemoveModal=Bt();ngOnChanges(e){e.pedidoselect&&this.pedidoselect&&(this.cambiorealizado=!0)}Cambios(){this.pedidoselect&&this.pedidoService.aplicarcambio(this.pedidoselect.id,this.pedidoselect.estado).subscribe(e=>this.onRemoveModal.emit(!1))}static \u0275fac=function(r){return new(r||l)};static \u0275cmp=M({type:l,selectors:[["app-detallepedido"]],inputs:{pedidoselect:"pedidoselect"},outputs:{onRemoveModal:"onRemoveModal"},standalone:!0,features:[Oe,I],decls:44,vars:6,consts:[[1,"grid","grid-cols-1","md:grid-cols-3","gap-3"],[1,"mb-6"],["for","Nombre",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","Nombre","name","Nombre",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","dni",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","dni","name","dni",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","direccion",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","direccion","name","direccion",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","celular",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","celular","name","celular",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","email","name","email",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],[1,"relative"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600"],[1,""],[1,"flex","w-full","items-center","justify-center","rounded-lg","bg-blue-700","px-5","py-2.5","text-sm","font-medium","text-white","hover:bg-blue-800","focus:outline-none","focus:ring-4","focus:ring-blue-300","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800","hover:cursor-pointer",3,"click"],[1,"px-6","py-4"],["alt","",1,"max-w-full","rounded-lg","w-20",3,"src"],["for","estadopedido",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["name","estadopedido","id","estadopedido",3,"ngModelChange","ngModel"],["value","NINGUNO"],["value","NUEVO"],["value","PROCESADO"],["value","ENVIADO"]],template:function(r,t){r&1&&(i(0,"form")(1,"div",0)(2,"div",1)(3,"label",2),a(4,"Nombre Comprador"),n(),i(5,"p",3),a(6),n()(),i(7,"div",1)(8,"label",4),a(9,"DNI"),n(),i(10,"p",5),a(11),n()(),i(12,"div",1)(13,"label",6),a(14,"Direccion"),n(),i(15,"p",7),a(16),n()(),i(17,"div",1)(18,"label",8),a(19,"Celular"),n(),i(20,"p",9),a(21),n()(),i(22,"div",1)(23,"label",10),a(24,"Email"),n(),i(25,"p",11),a(26),n()()(),i(27,"div",12)(28,"table",13)(29,"thead",14)(30,"tr")(31,"th",15),a(32,"Nombre"),n(),i(33,"th",15),a(34,"Cantidad"),n(),i(35,"th",15),a(36,"Imagen"),n()()(),i(37,"tbody"),P(38,_r,7,3,"tr",16,A),n()()(),E(40,Sr,12,1,"div",1),i(41,"div",17)(42,"button",18),h("click",function(){return t.Cambios()}),a(43,"APLICAR"),n()()()),r&2&&(d(6),k((t.pedidoselect==null||t.pedidoselect.datospago==null||t.pedidoselect.datospago.customer==null||t.pedidoselect.datospago.customer.billingDetails==null?null:t.pedidoselect.datospago.customer.billingDetails.firstName)+" "+(t.pedidoselect==null||t.pedidoselect.datospago==null||t.pedidoselect.datospago.customer==null||t.pedidoselect.datospago.customer.billingDetails==null?null:t.pedidoselect.datospago.customer.billingDetails.lastName)),d(5),k(t.pedidoselect==null||t.pedidoselect.datospago==null||t.pedidoselect.datospago.customer==null||t.pedidoselect.datospago.customer.billingDetails==null?null:t.pedidoselect.datospago.customer.billingDetails.identityCode),d(5),k(t.pedidoselect==null||t.pedidoselect.datospago==null||t.pedidoselect.datospago.customer==null||t.pedidoselect.datospago.customer.billingDetails==null?null:t.pedidoselect.datospago.customer.billingDetails.address),d(5),k(t.pedidoselect==null||t.pedidoselect.datospago==null||t.pedidoselect.datospago.customer==null||t.pedidoselect.datospago.customer.billingDetails==null?null:t.pedidoselect.datospago.customer.billingDetails.cellPhoneNumber),d(5),k(t.pedidoselect==null||t.pedidoselect.datospago==null||t.pedidoselect.datospago.customer==null?null:t.pedidoselect.datospago.customer.email),d(12),T(t.pedidoselect==null?null:t.pedidoselect.productos),d(2),K(t.pedidoselect?40:-1))},dependencies:[L,J,te,ie,oe,z,Z,j,Q]})}return l})();function Cr(l,c){if(l&1){let e=w();i(0,"div",7),m(1,"div",8),i(2,"div",9)(3,"div",10)(4,"div",11)(5,"h3",12),a(6," A\xF1adir Producto "),n(),i(7,"button",13),h("click",function(){g(e);let t=u();return p(t.DetalleOpen=!1)}),y(),i(8,"svg",14),m(9,"path",15),n(),S(),i(10,"span",16),a(11,"Close modal"),n()()(),i(12,"div",17)(13,"app-detallepedido",18),h("onRemoveModal",function(t){g(e);let o=u();return p(o.onRemoveModal(t))}),n()()()()()}if(l&2){let e=u();d(13),b("pedidoselect",e.pedidoSelected)}}function wr(l,c){if(l&1){let e=w();i(0,"tr",19)(1,"th",20),a(2),n(),i(3,"td",21),a(4),n(),i(5,"td",21),a(6),n(),i(7,"td",21),a(8),n(),i(9,"td",21),a(10),n(),i(11,"td",21),a(12),n(),i(13,"td")(14,"button",22),h("click",function(){let t=g(e).$implicit,o=u();return p(o.Detalles(t.id))}),a(15," Detalle "),n()()()}if(l&2){let e=c.$implicit;d(2),C(" ",e.fecha.split("T")[0]," "),d(2),k(e.datospago.orderId),d(2),C(" ",e.datospago.customer.billingDetails.firstName+" "+e.datospago.customer.billingDetails.lastName," "),d(2),C(" ",e.datospago.customer.billingDetails.cellPhoneNumber," "),d(2),k(e.datospago.amount/100),d(2),k(e.estado)}}var Si=(()=>{class l{pedidosService;constructor(e){this.pedidosService=e}DetalleOpen=!1;pedidos=[];pedidoSelected;ngOnInit(){this.pedidosService.listar().subscribe(e=>{this.pedidos=e,console.log(this.pedidos)})}Detalles(e){this.pedidoSelected=this.pedidos.find(r=>r.id==e),this.DetalleOpen=!!this.pedidoSelected}onRemoveModal(e){this.DetalleOpen=e}static \u0275fac=function(r){return new(r||l)(_(ze))};static \u0275cmp=M({type:l,selectors:[["app-pedidos"]],standalone:!0,features:[I],decls:23,vars:2,consts:[["tabindex","-1","aria-hidden","true","class","fixed inset-0 z-50 overflow-y-auto",4,"ngIf"],[1,"text-2xl","text-center","font-extrabold","text-gray-800","dark:text-white"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],["class","bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",4,"ngFor","ngForOf"],["tabindex","-1","aria-hidden","true",1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"fixed","inset-0","bg-black","bg-opacity-50"],[1,"relative","flex","items-center","justify-center","min-h-screen","p-4"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700","max-w-2xl","w-full"],[1,"flex","items-center","justify-between","p-4","md:p-5","border-b","rounded-t","dark:border-gray-600"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],["type","button",1,"text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","inline-flex","justify-center","items-center","dark:hover:bg-gray-600","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],[1,"p-4","md:p-5","space-y-4"],[3,"onRemoveModal","pedidoselect"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600"],["scope","row",1,"px-6","py-4","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"px-6","py-4"],["type","button",1,"text-blue-800","hover:text-blue-600","underline","bg-teal-600","hover:cursor-pointer",3,"click"]],template:function(r,t){r&1&&(E(0,Cr,14,1,"div",0),i(1,"p",1),a(2,` Lista Pedidos
`),n(),i(3,"div",2)(4,"table",3)(5,"thead",4)(6,"tr")(7,"th",5),a(8,"Fecha"),n(),i(9,"th",5),a(10,"Order"),n(),i(11,"th",5),a(12,"Cliente"),n(),i(13,"th",5),a(14,"Celular"),n(),i(15,"th",5),a(16,"Cantidad Pagada"),n(),i(17,"th",5),a(18,"Estado"),n(),i(19,"th",5),a(20,"Acci\xF3n"),n()()(),i(21,"tbody"),E(22,wr,16,6,"tr",6),n()()()),r&2&&(b("ngIf",t.DetalleOpen),d(22),b("ngForOf",t.pedidos))},dependencies:[L,D,he,$,_i]})}return l})();var ht=ge(pe());var pt=(()=>{class l{http;authService;apiUrl=H.API_URL+"/inventario/productoserie";headersAuthorization;headers;constructor(e,r){this.http=e,this.authService=r,this.headers=this.authService.getHeaders(),this.headersAuthorization=this.authService.getHeadersAuthorization()}getListaProductoSerie(){return this.http.get(this.apiUrl)}getProductoSerie(e){return this.http.get(`${this.apiUrl}/belong/${e}`,{headers:this.headers})}getSeriesByProductoId(e){return this.http.get(`${this.apiUrl}/stock/${e}`,{headers:this.headers})}delete(e){return this.http.delete(`${this.apiUrl}/${e}`,{headers:this.headers})}static \u0275fac=function(r){return new(r||l)(O(U),O(ne))};static \u0275prov=q({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})();var Ci=(()=>{class l{http;apiUrl=H.API_URL+"/inventory/correlativo/siguiente";constructor(e){this.http=e}headers=new Se({Authorization:`Bearer ${localStorage.getItem("authToken")}`});getCorrelativoSiguiente(e,r){let t=new Xt().set("prefijo",e).set("numeracion",r.toString());return this.http.get(this.apiUrl,{params:t,headers:this.headers})}static \u0275fac=function(r){return new(r||l)(O(U))};static \u0275prov=q({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})();var Mr=(l,c)=>({"bg-red-800 hover:bg-red-700 focus:ring-red-300 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900":l,"bg-green-700 hover:bg-green-800 focus:ring-green-300 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-900":c});function Ir(l,c){if(l&1&&(i(0,"option",68),a(1),n()),l&2){let e=c.$implicit;b("value",e.id),d(),X(" ",e.id," | ",e.descripcion," ")}}function Pr(l,c){if(l&1&&(i(0,"option",68),a(1),n()),l&2){let e=c.$implicit;b("value",e.id),d(),X(" ",e.id," | ",e.descripcion," ")}}function Tr(l,c){if(l&1&&(i(0,"option",68),a(1),n()),l&2){let e=c.$implicit;b("value",e.id),d(),X(" ",e.id," | ",e.nombre," ")}}function Vr(l,c){if(l&1){let e=w();i(0,"div",6),m(1,"div",35),i(2,"div",36)(3,"div",37)(4,"div",38)(5,"h3",39),a(6," Editar Tipado "),n(),i(7,"button",40),h("click",function(){g(e);let t=u();return p(t.EditOpen=!1)}),y(),i(8,"svg",41),m(9,"path",42),n(),S(),i(10,"span",43),a(11,"Close modal"),n()()(),i(12,"div",44)(13,"div",14)(14,"label",45),a(15,"Tipo Pago:"),n(),i(16,"select",46),v("ngModelChange",function(t){g(e);let o=u();return x(o.ventaData.id_tipopago,t)||(o.ventaData.id_tipopago=t),p(t)}),i(17,"option",47),a(18,"Elegir..."),n(),E(19,Ir,2,3,"option",48),n()(),i(20,"div",14)(21,"label",49),a(22,"Tipo de Condici\xF3n"),n(),i(23,"div",50)(24,"select",51),v("ngModelChange",function(t){g(e);let o=u();return x(o.ventaData.id_tipocondicion,t)||(o.ventaData.id_tipocondicion=t),p(t)}),i(25,"option",47),a(26,"Elegir..."),n(),E(27,Pr,2,3,"option",48),n(),i(28,"button",52),a(29," Agregar "),n()()(),i(30,"div",14)(31,"label",53),a(32,"Fecha de Emisi\xF3n"),n(),i(33,"input",54),v("ngModelChange",function(t){g(e);let o=u();return x(o.ventaData.fecha_emision,t)||(o.ventaData.fecha_emision=t),p(t)}),n()(),i(34,"div",14)(35,"label",55),a(36,"Fecha de Vencimiento"),n(),i(37,"input",56),v("ngModelChange",function(t){g(e);let o=u();return x(o.ventaData.fecha_vencimiento,t)||(o.ventaData.fecha_vencimiento=t),p(t)}),n()(),i(38,"div",14)(39,"label",57),a(40,"Fecha de Pago"),n(),i(41,"input",58),v("ngModelChange",function(t){g(e);let o=u();return x(o.ventaData.fechapago,t)||(o.ventaData.fechapago=t),p(t)}),n()(),i(42,"div",14)(43,"label",59),a(44,"Forma de Pago"),n(),i(45,"select",60),v("ngModelChange",function(t){g(e);let o=u();return x(o.ventaData.formapago,t)||(o.ventaData.formapago=t),p(t)}),i(46,"option",47),a(47,"Elegir..."),n(),i(48,"option",61),a(49,"Forma 1"),n(),i(50,"option",62),a(51,"Forma 2"),n(),i(52,"option",63),a(53,"Forma 3"),n()()(),i(54,"div",14)(55,"label",64),a(56,"Tipo Moneda"),n(),i(57,"select",65),v("ngModelChange",function(t){g(e);let o=u();return x(o.ventaData.id_tipomoneda,t)||(o.ventaData.id_tipomoneda=t),p(t)}),i(58,"option",47),a(59,"Elegir..."),n(),E(60,Tr,2,3,"option",48),n()(),i(61,"div",14)(62,"label",66),a(63,"Tipo de Cambio"),n(),i(64,"input",67),v("ngModelChange",function(t){g(e);let o=u();return x(o.ventaData.tipo_cambio,t)||(o.ventaData.tipo_cambio=t),p(t)}),n()()()()()()}if(l&2){let e=u();d(16),f("ngModel",e.ventaData.id_tipopago),d(3),b("ngForOf",e.tipadoDocumentos==null?null:e.tipadoDocumentos.tipopagos),d(5),f("ngModel",e.ventaData.id_tipocondicion),d(3),b("ngForOf",e.tipadoDocumentos==null?null:e.tipadoDocumentos.tipocondiciones),d(6),f("ngModel",e.ventaData.fecha_emision),d(4),f("ngModel",e.ventaData.fecha_vencimiento),d(4),f("ngModel",e.ventaData.fechapago),d(4),f("ngModel",e.ventaData.formapago),d(12),f("ngModel",e.ventaData.id_tipomoneda),d(3),b("ngForOf",e.tipadoDocumentos==null?null:e.tipadoDocumentos.tipomonedas),d(4),f("ngModel",e.ventaData.tipo_cambio)}}function Dr(l,c){if(l&1){let e=w();i(0,"tr")(1,"td",73),a(2),n(),i(3,"td",73)(4,"button",74),h("click",function(){let t=g(e).$implicit,o=u(2);return p(o.SeleccionarSeriesProducto(t))}),a(5),n()()()}if(l&2){let e=c.$implicit,r=u(2);d(2),k(e),d(2),b("ngClass",Ye(3,Mr,r.isSerieSeleccionada(e),!r.isSerieSeleccionada(e))),d(),C(" ",r.isSerieSeleccionada(e)?"Deseleccionar":"Seleccionar"," ")}}function Fr(l,c){if(l&1){let e=w();i(0,"div",6),m(1,"div",35),i(2,"div",36)(3,"div",37)(4,"div",38)(5,"div",69)(6,"div")(7,"h3",39),a(8),n()(),i(9,"div")(10,"h4",39),a(11),n()()(),i(12,"button",40),h("click",function(){g(e);let t=u();return p(t.InsertOpen=!1)}),y(),i(13,"svg",41),m(14,"path",42),n(),S(),i(15,"span",43),a(16,"Close modal"),n()()(),i(17,"div",70)(18,"div",71)(19,"table",22)(20,"thead",23)(21,"tr")(22,"th",24),a(23,"Serie"),n(),i(24,"th",24),a(25,"Seleccionar"),n()()(),i(26,"tbody",72),P(27,Dr,6,6,"tr",null,A),n()()()()()()()}if(l&2){let e=u();d(8),C(" Producto: ",e.productoselected==null?null:e.productoselected.nombre," "),d(3),C(" Cant Selected: ",e.SeriesProducto.length," "),d(16),T(e.SeriesProducto)}}function Or(l,c){if(l&1){let e=w();i(0,"tr",72)(1,"td",73),a(2),n(),i(3,"td",73),a(4),n(),i(5,"td",73),a(6),B(7,"currency"),n(),i(8,"td",73),a(9),B(10,"currency"),n(),i(11,"td",75),y(),i(12,"svg",76),h("click",function(){let t=g(e).$index,o=u(2);return p(o.deleteProducto(t))}),m(13,"path",77),n(),i(14,"svg",78),h("click",function(){let t=g(e).$implicit,o=u(2);return p(o.verModalSeries(t==null?null:t.id_producto))}),i(15,"g")(16,"g"),m(17,"path",79),n(),i(18,"g"),m(19,"path",80),n(),i(20,"g"),m(21,"path",81),n()()()()()}if(l&2){let e=c.$implicit;d(2),k(e.cantidad),d(2),k(e.nombre),d(2),C(" ",R(7,4,e.precio_unitario,"S/. ")," "),d(3),C(" ",R(10,7,e.precio_total,"S/. ")," ")}}function Ar(l,c){if(l&1&&(i(0,"tbody"),P(1,Or,22,10,"tr",72,A),n()),l&2){let e=u();d(),T(e.ventaData.detalles)}}var Et=(()=>{class l{productoService;productoSerieService;tipadoService;entidadService;correlativoService;registroVentaService;router;route;listaProductos=[];listaEntidades=[];tipadoDocumentos;SeriesProducto=[];productoselected;clienteselected;flagEDICION=!0;constructor(e,r,t,o,s,V,Y,le){this.productoService=e,this.productoSerieService=r,this.tipadoService=t,this.entidadService=o,this.correlativoService=s,this.registroVentaService=V,this.router=Y,this.route=le}toggleDatePicker(e){let r=document.getElementById(e);r.focus(),r.click()}ventaData={prefijo:"",numeracion:0,documento_cliente:"",usuario_id:"",id_tipocondicion:1,id_tipopago:1,id_tipomoneda:1,tipo_cambio:1,fecha_emision:new Date().toISOString(),fecha_vencimiento:new Date().toISOString(),nota:"",gravada:this.totalGravada,impuesto:this.igv,total:this.totalPagar,fechapago:new Date().toISOString(),formapago:"",detalles:[]};ngOnInit(){this.setFechaEmision(),this.cargarProductos(),this.cargarTipado(),this.cargarClientes();let e=this.route.snapshot.paramMap.get("id");e&&(this.flagEDICION=!1,this.cargarIngreso(e))}cargarIngreso(e){this.registroVentaService.getVenta(e).subscribe(r=>{this.ventaData=r,this.clienteselected=this.listaEntidades.find(t=>t.id===this.ventaData.documento_cliente)})}guardarProductos(){if(!this.flagEDICION){ht.default.fire({icon:"info",title:"NO SE PUEDE REGISTRAR",text:"no se puede modificar una venta ya registrada"});return}this.ventaData.gravada=this.totalGravada,this.ventaData.impuesto=this.igv,this.ventaData.total=this.totalPagar,this.ventaData.fecha_emision?.includes("T00:00:00.00")||(this.ventaData.fecha_emision=`${this.ventaData.fecha_emision}T00:00:00.00`),this.ventaData.fecha_vencimiento?.includes("T00:00:00.00")||(this.ventaData.fecha_vencimiento=`${this.ventaData.fecha_vencimiento}T00:00:00.00`),this.ventaData.fechapago?.includes("T00:00:00.00")||(this.ventaData.fechapago=`${this.ventaData.fechapago}T00:00:00.00`),this.registroVentaService.registrar(this.ventaData).subscribe(e=>{this.ventaData.detalles=[],this.setFechaEmision(),ht.default.fire({icon:"success",title:"Venta Registrada",text:e.message,timer:1e3})},e=>{ht.default.fire({icon:"error",title:"Error en Venta",text:e.error.message})})}cargarProductos(){this.productoService.getListaProductos().subscribe(e=>{this.listaProductos=e},e=>{console.error("Error al obtener los productos:",e)})}cargarTipado(){this.tipadoService.getTipadoDocumentos().subscribe(e=>{this.tipadoDocumentos=e,this.ventaData.id_tipocondicion=e.tipocondiciones[0].id,this.ventaData.id_tipopago=e.tipopagos[0].id,this.ventaData.id_tipomoneda=e.tipomonedas[0].id},e=>{console.error("Error al obtener los tipos de documentos:",e)})}cargarClientes(){this.entidadService.getEntidades().subscribe(e=>{this.listaEntidades=e})}productSearch(e){this.productoService.getProductoSearch(e).subscribe(r=>{this.listaProductos=r},r=>{console.error("Error al obtener los productos:",r)})}seleccionarProducto(e){e&&this.productoSerieService.getSeriesByProductoId(e).subscribe(r=>{this.SeriesProducto=r.map(t=>t.sn),this.productoselected=this.listaProductos.find(t=>t.id===e),this.openIModal()},r=>{console.error("Error al obtener las series del producto:",r)})}buscarProducto(e){let r=e.target,t=r.value.trim();r.value="",this.productoSerieService.getProductoSerie(t).subscribe(o=>{if(o==null)return;this.productoselected=o;let s=this.ventaData.detalles.find(Y=>Y.id_producto==this.productoselected?.id);s||(s={id_producto:this.productoselected.id,nombre:this.productoselected.nombre,cantidad:0,series:[],precio_unitario:this.productoselected.precio,precio_total:0},this.ventaData.detalles.push(s)),s.series.includes(t)||(s.series.push(t),s.cantidad+=1,s.precio_total=s.cantidad*s.precio_unitario)},o=>{console.error("Producto no encontrado",o)})}deleteProducto(e){this.ventaData.detalles.splice(e,1)}clienteSearch(e){this.entidadService.search(e).subscribe(r=>{this.listaEntidades=r})}clienteSelect(e){e&&(this.ventaData.documento_cliente=e)}SeleccionarSeriesProducto(e){if(!this.productoselected)return;let r=this.ventaData.detalles.find(o=>o.id_producto===this.productoselected?.id);r||(r={id_producto:this.productoselected?.id,nombre:this.productoselected?.nombre,cantidad:0,series:[],precio_unitario:this.productoselected?.precio,precio_total:0},this.ventaData.detalles.push(r));let t=r.series.indexOf(e);t>-1?(r.series.splice(t,1),r.cantidad-=1,r.precio_total=r.cantidad*r.precio_unitario,r.cantidad===0&&(this.ventaData.detalles=this.ventaData.detalles.filter(o=>o!==r))):(r.series.push(e),r.cantidad+=1,r.precio_total=r.cantidad*r.precio_unitario),this.ventaData.total=this.totalPagar}isSerieSeleccionada(e){let r=this.ventaData.detalles.find(t=>t.id_producto===this.productoselected?.id);return r?r.series.includes(e):!1}setFechaEmision(){let e=new Date,r=e.getDate().toString().padStart(2,"0"),t=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getFullYear();this.ventaData.fecha_emision=`${o}-${t}-${r}`,this.ventaData.fecha_vencimiento=`${o}-${t}-${r}`,this.ventaData.fechapago=`${o}-${t}-${r}`}get totalGravada(){return this.totalPagar/1.18}get igv(){return this.totalGravada*.18}get totalPagar(){return this.ventaData?.detalles.reduce((e,r)=>e+r.precio_total,0)}verModalSeries(e){e&&(this.seleccionarProducto(e),this.openIModal())}EditOpen=!1;InsertOpen=!1;openEModal(){this.EditOpen=!0}openIModal(){this.InsertOpen=!0}CrearNuevaEntidad(){this.router.navigate(["/dashboard/entidades"])}static \u0275fac=function(r){return new(r||l)(_(ae),_(pt),_(dt),_(ke),_(Ci),_(mt),_(ee),_(Ae))};static \u0275cmp=M({type:l,selectors:[["app-fac-salida"]],standalone:!0,features:[I],decls:75,vars:25,consts:[[1,"text-2xl","text-center","font-extrabold","text-gray-800","dark:text-white"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-3"],["role","button","tabindex","0","aria-label","Abrir modal",1,"icon-container",3,"click","keydown.enter","keydown.space"],["xmlns","http://www.w3.org/2000/svg","height","40px","viewBox","0 -960 960 960","width","30px","fill","#000000"],["d","m382-80-18.67-126.67q-17-6.33-34.83-16.66-17.83-10.34-32.17-21.67L178-192.33 79.33-365l106.34-78.67q-1.67-8.33-2-18.16-.34-9.84-.34-18.17 0-8.33.34-18.17.33-9.83 2-18.16L79.33-595 178-767.67 296.33-715q14.34-11.33 32.34-21.67 18-10.33 34.66-16L382-880h196l18.67 126.67q17 6.33 35.16 16.33 18.17 10 31.84 22L782-767.67 880.67-595l-106.34 77.33q1.67 9 2 18.84.34 9.83.34 18.83 0 9-.34 18.5Q776-452 774-443l106.33 78-98.66 172.67-118-52.67q-14.34 11.33-32 22-17.67 10.67-35 16.33L578-80H382Zm55.33-66.67h85l14-110q32.34-8 60.84-24.5T649-321l103.67 44.33 39.66-70.66L701-415q4.33-16 6.67-32.17Q710-463.33 710-480q0-16.67-2-32.83-2-16.17-7-32.17l91.33-67.67-39.66-70.66L649-638.67q-22.67-25-50.83-41.83-28.17-16.83-61.84-22.83l-13.66-110h-85l-14 110q-33 7.33-61.5 23.83T311-639l-103.67-44.33-39.66 70.66L259-545.33Q254.67-529 252.33-513 250-497 250-480q0 16.67 2.33 32.67 2.34 16 6.67 32.33l-91.33 67.67 39.66 70.66L311-321.33q23.33 23.66 51.83 40.16 28.5 16.5 60.84 24.5l13.66 110Zm43.34-200q55.33 0 94.33-39T614-480q0-55.33-39-94.33t-94.33-39q-55.67 0-94.5 39-38.84 39-38.84 94.33t38.84 94.33q38.83 39 94.5 39ZM480-480Z"],["tabindex","-1","aria-hidden","true",1,"fixed","inset-0","z-50","overflow-y-auto"],["tabindex","-1","aria-hidden","true","class","fixed inset-0 z-50 overflow-y-auto",4,"ngIf"],[1,"grid","gap-6","mb-6","md:grid-cols-3"],["for","tipoComprobante",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","tipoComprobante","name","tipoComprobante",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["value","F","selected",""],["value","B"],[1,"w-full",3,"emitterSearchText","emitterSelectedValue","lista","title","rutacreate","Tipo","SelectedText"],[1,"mb-6"],["for","nota",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","nota","name","nota","placeholder","Nota venta",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],[1,"col-span-1"],["for","serie",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","serie","name","serie","placeholder","Ingrese serie...","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup.enter"],[1,"col-span-2",3,"emitterSearchText","emitterSelectedValue","lista","title","rutacreate"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],["scope","col",1,"px-6","py-3","max-w-16"],[1,"grid","gap-6","mb-6","md:grid-cols-2"],["for","gra",1,"form-label"],["type","text","id","gra","disabled","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"value"],["for","igv",1,"form-label"],["type","text","id","igv","disabled","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"value"],["for","pagar",1,"form-label"],["type","text","id","pagar","disabled","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"value"],[1,"my-4"],["type","submit",1,"w-full","items-center","rounded-lg","bg-blue-700","px-5","py-2.5","text-sm","font-medium","text-white","hover:bg-blue-800","focus:outline-none","focus:ring-4","focus:ring-blue-300","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],[1,"fixed","inset-0","bg-black","bg-opacity-50"],[1,"relative","flex","items-center","justify-center","min-h-screen","p-4"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700","max-w-2xl","w-full"],[1,"flex","items-center","justify-between","p-4","md:p-5","border-b","rounded-t","dark:border-gray-600"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],["type","button",1,"text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","inline-flex","justify-center","items-center","dark:hover:bg-gray-600","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],[1,"p-4","md:p-5","space-y-4"],["for","tipoPagoSelec",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","tipoPagoSelec","name","tipoPagoSelec",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["for","tipoCondSelec",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],[1,"flex","items-center","space-x-2"],["id","tipoCondSelec","name","tipoCondSelec",1,"block","w-full","p-2","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["type","submit",1,"h-10","text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-3","py-1","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800"],["for","fecha-emision",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","date","id","fecha-emision","name","fechaEmision","placeholder","yyyy-mm-dd",1,"w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","fecha-venci",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","date","id","fecha-venci","name","fechaVencimiento","placeholder","yyyy-mm-dd",1,"w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","fecha-pago",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","date","id","fecha-pago","name","fechaPago","placeholder","yyyy-mm-dd",1,"w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","formaPago",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","formaPago","name","formaPago",1,"block","w-full","p-2","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["value","1"],["value","2"],["value","3"],["for","tipoMoneda",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","tipoMoneda","name","tipoMoneda",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","tipoCambio",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","tipoCambio","name","tipoCambio","placeholder","Tipo de Cambio...",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],[3,"value"],[1,"flex","flex-row","justify-between","w-full"],[1,"flex","w-full","p-4","md:p-5","space-y-4","justify-center"],[1,"max-h-96","overflow-y-auto","w-full"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600"],[1,"px-6","py-4"],["type","button",1,"focus:outline-none","text-white","focus:ring-4","font-medium","rounded-lg","text-sm","px-5","py-2.5","me-2","mb-2","cursor-pointer",3,"click","ngClass"],[1,"px-6","py-4","w-fit","flex","flex-row","flex-nowrap","items-center","justify-start","gap-2"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-red-600","dark:text-red-600","hover:scale-110","hover:cursor-pointer",3,"click"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M5 7h14m-9 3v8m4-8v8M10 3h4a1 1 0 0 1 1 1v3H9V4a1 1 0 0 1 1-1ZM6 7h12v13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7Z"],["fill","#1a56db","version","1.1","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","width","24","height","24","viewBox","0 0 442.04 442.04",0,"xml","space","preserve",1,"w-6","h-6","hover:scale-110","hover:cursor-pointer",3,"click"],["d",`M221.02,341.304c-49.708,0-103.206-19.44-154.71-56.22C27.808,257.59,4.044,230.351,3.051,229.203
			c-4.068-4.697-4.068-11.669,0-16.367c0.993-1.146,24.756-28.387,63.259-55.881c51.505-36.777,105.003-56.219,154.71-56.219
			c49.708,0,103.207,19.441,154.71,56.219c38.502,27.494,62.266,54.734,63.259,55.881c4.068,4.697,4.068,11.669,0,16.367
			c-0.993,1.146-24.756,28.387-63.259,55.881C324.227,321.863,270.729,341.304,221.02,341.304z M29.638,221.021
			c9.61,9.799,27.747,27.03,51.694,44.071c32.83,23.361,83.714,51.212,139.688,51.212s106.859-27.851,139.688-51.212
			c23.944-17.038,42.082-34.271,51.694-44.071c-9.609-9.799-27.747-27.03-51.694-44.071
			c-32.829-23.362-83.714-51.212-139.688-51.212s-106.858,27.85-139.688,51.212C57.388,193.988,39.25,211.219,29.638,221.021z`],["d",`M221.02,298.521c-42.734,0-77.5-34.767-77.5-77.5c0-42.733,34.766-77.5,77.5-77.5c18.794,0,36.924,6.814,51.048,19.188
			c5.193,4.549,5.715,12.446,1.166,17.639c-4.549,5.193-12.447,5.714-17.639,1.166c-9.564-8.379-21.844-12.993-34.576-12.993
			c-28.949,0-52.5,23.552-52.5,52.5s23.551,52.5,52.5,52.5c28.95,0,52.5-23.552,52.5-52.5c0-6.903,5.597-12.5,12.5-12.5
			s12.5,5.597,12.5,12.5C298.521,263.754,263.754,298.521,221.02,298.521z`],["d","M221.02,246.021c-13.785,0-25-11.215-25-25s11.215-25,25-25c13.786,0,25,11.215,25,25S234.806,246.021,221.02,246.021z"]],template:function(r,t){r&1&&(i(0,"p",0),a(1,` Facturaci\xF3n: Salida
`),n(),m(2,"br"),i(3,"div",1)(4,"h2",2)(5,"b"),a(6,"Informaci\xF3n"),n()(),i(7,"div",3),h("click",function(){return t.openEModal()})("keydown.enter",function(){return t.openEModal()})("keydown.space",function(){return t.openEModal()}),y(),i(8,"svg",4),m(9,"path",5),n()()(),E(10,Vr,65,11,"div",6)(11,Fr,29,2,"div",7),S(),i(12,"form")(13,"div",8)(14,"div")(15,"label",9),a(16,"Tipo Comprobante"),n(),i(17,"select",10),v("ngModelChange",function(s){return x(t.ventaData.prefijo,s)||(t.ventaData.prefijo=s),s}),i(18,"option",11),a(19,"FACTURA"),n(),i(20,"option",12),a(21,"BOLETA"),n()()()(),i(22,"app-select-search",13),h("emitterSearchText",function(s){return t.clienteSearch(s)})("emitterSelectedValue",function(s){return t.clienteSelect(s)}),n(),i(23,"div",14)(24,"label",15),a(25,"Nota (Opcional)"),n(),i(26,"input",16),v("ngModelChange",function(s){return x(t.ventaData.nota,s)||(t.ventaData.nota=s),s}),n()(),i(27,"div",8)(28,"div",17)(29,"label",18),a(30,"Serie Producto"),n(),i(31,"input",19),h("keyup.enter",function(s){return t.buscarProducto(s)}),n()(),i(32,"app-select-search",20),h("emitterSearchText",function(s){return t.productSearch(s)})("emitterSelectedValue",function(s){return t.seleccionarProducto(s)}),n()()(),m(33,"hr"),i(34,"div",21)(35,"table",22)(36,"thead",23)(37,"tr")(38,"th",24),a(39,"Cantidad"),n(),i(40,"th",24),a(41,"Nombre"),n(),i(42,"th",24),a(43,"P. Unit"),n(),i(44,"th",24),a(45,"P. Total"),n(),i(46,"th",25),a(47,"Accion"),n()()(),E(48,Ar,3,0,"tbody"),n()(),m(49,"hr")(50,"br"),i(51,"div",26)(52,"div")(53,"label",27),a(54,"Gravada (sin IGV)"),n()(),i(55,"div"),m(56,"input",28),B(57,"currency"),n()(),i(58,"div",26)(59,"div")(60,"label",29),a(61,"Impuesto IGV (18%)"),n()(),i(62,"div"),m(63,"input",30),B(64,"currency"),n()(),i(65,"div",26)(66,"div")(67,"label",31),a(68,"Total Pagar"),n()(),i(69,"div"),m(70,"input",32),B(71,"currency"),n()(),m(72,"hr",33),i(73,"button",34),h("click",function(){return t.guardarProductos()}),a(74,` Continuar con la venta
`),n()),r&2&&(d(10),K(t.EditOpen?10:-1),d(),b("ngIf",t.InsertOpen),d(6),f("ngModel",t.ventaData.prefijo),d(5),b("lista",t.listaEntidades)("title","Cliente")("rutacreate","/dashboard/entidades")("Tipo","cliente")("SelectedText",(t.clienteselected==null?null:t.clienteselected.documento)+" | "+(t.clienteselected==null?null:t.clienteselected.nombre)),d(4),f("ngModel",t.ventaData.nota),d(6),b("lista",t.listaProductos)("title","Producto")("rutacreate","/dashboard/inventario"),d(16),K(t.ventaData.detalles&&t.ventaData.detalles.length>0?48:-1),d(8),b("value",R(57,16,t.totalGravada,"S/. ")),d(7),b("value",R(64,19,t.igv,"S/. ")),d(7),b("value",R(71,22,t.totalPagar,"S/. ")))},dependencies:[ue,L,J,te,ie,G,oe,z,Z,j,Q,D,Ie,he,$,We],encapsulation:2})}return l})();var qe=ge(pe());function Lr(l,c){if(l&1){let e=w();i(0,"div",25),m(1,"img",26),n(),i(2,"button",27),h("click",function(){let t=g(e).$implicit,o=u(2);return p(o.eliminarImagen(o.imagenescargadas.indexOf(t)))}),a(3,"Eliminar"),n()}if(l&2){let e=c.$implicit;d(),b("src",e,de)}}function Nr(l,c){if(l&1){let e=w();i(0,"div",3),m(1,"div",4),i(2,"div",5)(3,"div",6)(4,"div",7)(5,"h3",8),a(6," A\xF1adir Producto "),n(),i(7,"button",9),h("click",function(){g(e);let t=u();return p(t.CreateOpen=!1)}),y(),i(8,"svg",10),m(9,"path",11),n(),S(),i(10,"span",12),a(11,"Close modal"),n()()(),i(12,"div",13)(13,"form")(14,"div",14)(15,"label",15),a(16,"Tipo de Imagen"),n(),i(17,"select",16),h("change",function(t){g(e);let o=u();return p(o.onSelectTipo(t))}),i(18,"option",17),a(19,"Elegir..."),n(),i(20,"option",18),a(21,"flyer principal"),n(),i(22,"option",19),a(23,"flyer lateral"),n(),i(24,"option",20),a(25,"flyer barra"),n()()(),i(26,"div",14)(27,"label",21),a(28,"Seleccionar Archivo"),n(),i(29,"input",22),h("change",function(t){g(e);let o=u();return p(o.onFileChange(t))}),n()(),i(30,"div",23),P(31,Lr,4,1,null,null,A),n(),m(33,"br"),i(34,"button",24),h("click",function(){g(e);let t=u();return p(t.guardarimagenes())}),a(35,"Guardar Cambios"),n()()()()()()}if(l&2){let e=u();d(31),T(e.imagenescargadas)}}function zr(l,c){if(l&1){let e=w();i(0,"div",30)(1,"div",31),m(2,"img",32),n(),i(3,"button",27),h("click",function(){let t=g(e).$index,o=u().$implicit,s=u();return p(s.Eliminar(o,t))}),a(4,"Eliminar"),n()()}if(l&2){let e=c.$implicit;d(2),b("src",e,de)}}function jr(l,c){if(l&1&&(i(0,"h2",28),a(1),n(),i(2,"div",29),P(3,zr,5,1,"div",30,A),n()),l&2){let e=c.$implicit,r=u();d(),k(e),d(2),T(r.archivosAgrupados[e])}}var wi=(()=>{class l{router;archivosService;constructor(e,r){this.router=e,this.archivosService=r}selectedTipo="";imagenescargadas=[];selectedFiles=[];archivosAgrupados={};CreateOpen=!1;openCModal(){this.CreateOpen=!0}ngOnInit(){this.router.events.subscribe(e=>{e instanceof Ce&&setTimeout(()=>initFlowbite(),0)}),this.cargarimagenes()}cargarimagenes(){this.archivosService.getImagenesPublicitarias().subscribe(e=>{this.archivosAgrupados=e})}guardarimagenes(){let e=new FormData;e.append("tipo","flyer_publicitaria"),e.append("descripcion",this.selectedTipo),this.selectedFiles.forEach(r=>{e.append("files",r)}),this.archivosService.postarchivoPublicitaria(e).subscribe(r=>{qe.default.fire({icon:"success",title:"Imagen Registrada",text:r.message}),this.cargarimagenes(),this.imagenescargadas=[],this.selectedFiles=[],this.CreateOpen=!1},r=>{qe.default.fire({icon:"error",title:"Error en Registro Imagen",text:r.error.message})})}Eliminar(e,r){qe.default.fire({title:"Estas Seguro de Eliminar?",text:"No se podra revertir!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&this.archivosService.deleteArchivo(this.archivosAgrupados[e][r]).subscribe(o=>{qe.default.fire({icon:"success",title:"Eliminado!",text:o.message}),this.archivosAgrupados[e].splice(r,1)},o=>{qe.default.fire({icon:"error",title:"Error al Eliminar",text:o.error.message})})})}onSelectTipo(e){let r=e.target;this.selectedTipo=r.value}eliminarImagen(e){this.imagenescargadas.splice(e,1)}onFileChange(e){e.target.files.length>0&&(this.selectedFiles=Array.from(e.target.files),this.selectedFiles.forEach(r=>{let t=new FileReader;t.onload=o=>{this.imagenescargadas.push(o.target.result)},t.readAsDataURL(r)}))}ObjectKeys(e){return Object.keys(e)}static \u0275fac=function(r){return new(r||l)(_(ee),_(ri))};static \u0275cmp=M({type:l,selectors:[["app-imagenes-ublicitarias"]],standalone:!0,features:[I],decls:8,vars:1,consts:[["tabindex","-1","aria-hidden","true","class","fixed inset-0 z-50 overflow-y-auto",4,"ngIf"],[1,"text-2xl","text-center","font-extrabold","text-gray-800","dark:text-white"],["type","submit",1,"w-full","items-center","rounded-lg","bg-blue-700","px-5","py-2.5","text-sm","font-medium","text-white","hover:bg-blue-800","focus:outline-none","focus:ring-4","focus:ring-blue-300","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],["tabindex","-1","aria-hidden","true",1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"fixed","inset-0","bg-black","bg-opacity-50"],[1,"relative","flex","items-center","justify-center","min-h-screen","p-4"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700","max-w-2xl","w-full"],[1,"flex","items-center","justify-between","p-4","md:p-5","border-b","rounded-t","dark:border-gray-600"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],["type","button",1,"text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","inline-flex","justify-center","items-center","dark:hover:bg-gray-600","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],[1,"p-4","md:p-5","space-y-4"],[1,"mb-6"],["for","ImgP",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","ImgP","name","ImgP",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"change"],["value","","disabled","","selected",""],["value","flyer principal"],["value","flyer lateral"],["value","flyer barra"],["for","archivo1",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","file","id","archivo1","name","archivo1","multiple","","required","",1,"block","w-full","text-sm","text-gray-900","border","border-gray-300","rounded-lg","cursor-pointer","bg-gray-50","dark:text-gray-400","focus:outline-none","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400",3,"change"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],["type","button",1,"w-full","items-center","rounded-lg","bg-blue-700","px-5","py-2.5","text-sm","font-medium","text-white","hover:bg-blue-800","focus:outline-none","focus:ring-4","focus:ring-blue-300","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],[1,"w-full","items-center","py-2","px-2","rounded-t-lg","text-gray-900","bg-white","border-3","border-gray-300","focus:outline-none","hover:bg-gray-100","focus:ring-4","focus:ring-gray-100","font-medium","text-sm","dark:bg-gray-800","dark:text-white","dark:border-gray-600","dark:hover:bg-gray-700","dark:hover:border-gray-600","dark:focus:ring-gray-700"],["alt","",1,"w-auto","max-w-full","rounded-lg",3,"src"],["type","button",1,"w-full","items-center","rounded-b-lg","bg-red-700","px-5","py-2.5","text-sm","font-medium","text-white","hover:bg-red-800","focus:outline-none","focus:ring-4","focus:ring-red-300","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-800",3,"click"],[1,"text-2xl","font-bold","uppercase"],[1,"flex","flex-row","flex-wrap","gap-3"],[1,"min-w-xs","max-w-sm"],[1,"relative","w-full","items-center","rounded","text-gray-900","bg-white","border-3","border-gray-300","focus:outline-none","hover:bg-gray-100","focus:ring-4","focus:ring-gray-100","font-medium","text-sm","dark:bg-gray-800","dark:text-white","dark:border-gray-600","dark:hover:bg-gray-700","dark:hover:border-gray-600","dark:focus:ring-gray-700"],["alt","",1,"h-auto","max-w-full","rounded-t-lg",3,"src"]],template:function(r,t){r&1&&(E(0,Nr,36,0,"div",0),i(1,"p",1),a(2,"Imagenes Publicitarias"),n(),m(3,"br"),i(4,"button",2),h("click",function(){return t.openCModal()}),a(5,`Crear Nuevo Imagen
`),n(),P(6,jr,5,1,null,null,A)),r&2&&(b("ngIf",t.CreateOpen),d(6),T(t.ObjectKeys(t.archivosAgrupados)))},dependencies:[D,$],encapsulation:2})}return l})();var Mt=ge(pe());var Wr=(l,c)=>c.id;function qr(l,c){if(l&1){let e=w();i(0,"div",5),m(1,"div",6),i(2,"div",7)(3,"div",8)(4,"div",9)(5,"h3",10),a(6," A\xF1adir Entidad "),n(),i(7,"button",11),h("click",function(){g(e);let t=u();return p(t.CreateOpen=!1)}),y(),i(8,"svg",12),m(9,"path",13),n(),S(),i(10,"span",14),a(11,"Close modal"),n()()(),i(12,"div",15)(13,"form")(14,"div",16)(15,"div",17)(16,"label",18),a(17,"Nombre Entidad"),n(),i(18,"input",19),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevoCliente.nombre,t)||(o.nuevoCliente.nombre=t),p(t)}),n()(),i(19,"div",17)(20,"label",20),a(21,"Apellido Entidad"),n(),i(22,"input",21),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevoCliente.apellido,t)||(o.nuevoCliente.apellido=t),p(t)}),n()()(),i(23,"div",16)(24,"div",17)(25,"label",22),a(26,"Nro. Documento"),n(),i(27,"input",23),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevoCliente.documento,t)||(o.nuevoCliente.documento=t),p(t)}),n()(),i(28,"div",17)(29,"label",24),a(30,"Tipo de Entidad"),n(),i(31,"select",25),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevoCliente.id_tipoEntidad,t)||(o.nuevoCliente.id_tipoEntidad=t),p(t)}),i(32,"option",26),a(33,"Elegir..."),n(),i(34,"option",27),a(35,"DNI"),n(),i(36,"option",27),a(37,"CARNET EXTRANJERIA"),n(),i(38,"option",27),a(39,"RUC"),n(),i(40,"option",27),a(41,"PASAPORTE"),n()()()(),i(42,"div",17)(43,"label",28),a(44,"Rol"),n(),i(45,"select",29),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevoCliente.RolId,t)||(o.nuevoCliente.RolId=t),p(t)}),i(46,"option",26),a(47,"Elegir..."),n(),i(48,"option",27),a(49,"ADMINISTRADOR"),n(),i(50,"option",27),a(51,"VENDEDOR"),n(),i(52,"option",27),a(53,"ALMACENERO"),n(),i(54,"option",27),a(55,"CLIENTE"),n()()(),i(56,"div",17)(57,"label",30),a(58,"Direcci\xF3n"),n(),i(59,"input",31),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevoCliente.direccion,t)||(o.nuevoCliente.direccion=t),p(t)}),n()(),i(60,"div",17)(61,"label",32),a(62,"Nro. Telefono"),n(),i(63,"input",33),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevoCliente.telefono,t)||(o.nuevoCliente.telefono=t),p(t)}),n()(),i(64,"div",17)(65,"label",34),a(66,"Email"),n(),i(67,"input",35),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevoCliente.email,t)||(o.nuevoCliente.email=t),p(t)}),n()(),i(68,"div",17)(69,"label",36),a(70,"Password"),n(),i(71,"input",37),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevoCliente.password,t)||(o.nuevoCliente.password=t),p(t)}),n()(),i(72,"button",1),h("click",function(){g(e);let t=u();return p(t.crearEntidad())}),a(73,"Crear Nueva Entidad "),n()()()()()()}if(l&2){let e=u();d(18),f("ngModel",e.nuevoCliente.nombre),d(4),f("ngModel",e.nuevoCliente.apellido),d(5),f("ngModel",e.nuevoCliente.documento),d(4),f("ngModel",e.nuevoCliente.id_tipoEntidad),d(3),b("value",1),d(2),b("value",4),d(2),b("value",6),d(2),b("value",7),d(5),f("ngModel",e.nuevoCliente.RolId),d(3),b("value",1),d(2),b("value",2),d(2),b("value",3),d(2),b("value",4),d(5),f("ngModel",e.nuevoCliente.direccion),d(4),f("ngModel",e.nuevoCliente.telefono),d(4),f("ngModel",e.nuevoCliente.email),d(4),f("ngModel",e.nuevoCliente.password)}}function Br(l,c){if(l&1&&(i(0,"div",4)(1,"div",38)(2,"h5",39),a(3),n()(),i(4,"div",40)(5,"p",41)(6,"b"),a(7,"EMAIL: "),n(),a(8),n(),i(9,"p",41)(10,"b"),a(11,"TELEFONO: "),n(),a(12),n()(),i(13,"div",42)(14,"button",43),y(),i(15,"svg",44),m(16,"path",45),n()(),S(),i(17,"button",46),y(),i(18,"svg",44),m(19,"path",47),n()()()()),l&2){let e=c.$implicit;d(3),k(e.nombre),d(5),k(e.email),d(4),k(e.telefono)}}var ki=(()=>{class l{entidadService;nuevoCliente={nombre:"",apellido:"",documento:"",direccion:"",telefono:"",email:"",password:"",id_tipoEntidad:1,RolId:2};entidades=[];constructor(e){this.entidadService=e}ngOnInit(){this.cargarEntidades()}CreateOpen=!1;openCModal(){this.CreateOpen=!0}cargarEntidades(){this.entidadService.getEntidades().subscribe(e=>{this.entidades=e},e=>{console.error("Error al obtener entidades:",e)})}crearEntidad(){this.entidadService.postEntidad(this.nuevoCliente).subscribe(e=>{Mt.default.fire({icon:"success",title:"Venta Registrada",text:e.message}),this.cargarEntidades()},e=>{Mt.default.fire({icon:"error",title:"Error en Compra",text:e.error.message})})}static \u0275fac=function(r){return new(r||l)(_(ke))};static \u0275cmp=M({type:l,selectors:[["app-crear-entidad"]],standalone:!0,features:[I],decls:11,vars:1,consts:[[1,"text-2xl","text-center","font-extrabold","text-gray-800","dark:text-white"],["type","submit",1,"w-full","items-center","rounded-lg","bg-blue-700","px-5","py-2.5","text-sm","font-medium","text-white","hover:bg-blue-800","focus:outline-none","focus:ring-4","focus:ring-blue-300","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],["tabindex","-1","aria-hidden","true","class","fixed inset-0 z-50 overflow-y-auto",4,"ngIf"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],[1,"relative","w-full","items-center","py-2","px-2","rounded","text-gray-900","bg-white","border-3","border-gray-300","focus:outline-none","hover:bg-gray-100","focus:ring-4","focus:ring-gray-100","font-medium","text-sm","dark:bg-gray-800","dark:text-white","dark:border-gray-600","dark:hover:bg-gray-700","dark:hover:border-gray-600","dark:focus:ring-gray-700"],["tabindex","-1","aria-hidden","true",1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"fixed","inset-0","bg-black","bg-opacity-50"],[1,"relative","flex","items-center","justify-center","min-h-screen","p-4"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700","max-w-2xl","w-full"],[1,"flex","items-center","justify-between","p-4","md:p-5","border-b","rounded-t","dark:border-gray-600"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],["type","button",1,"text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","inline-flex","justify-center","items-center","dark:hover:bg-gray-600","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],[1,"p-4","md:p-5","space-y-4"],[1,"grid","gap-6","md:grid-cols-2"],[1,"mb-6"],["for","nombre",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","nombre","name","nombre","placeholder","Ingrese el nombre...","autocomplete","name","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","apellido",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","apellido","name","apellido","placeholder","Ingrese el apellido...","autocomplete","name","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","document",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","document","name","document","placeholder","Ingrese el nro. documento ...","autocomplete","document","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","nro",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","nro","name","nro",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],[3,"value"],["for","rol",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","rol","name","rol",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","direc",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","direc","name","direc","placeholder","Ingrese la direcci\xF3n...","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","telf",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","tel","id","telf","name","telf","placeholder","Ingrese nro. telefono...","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","email","name","email","placeholder","Ingrese email...","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","password","id","password","name","password","placeholder","Ingrese email...","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],[1,"p-2","text-center"],[1,"mb-2","text-2xl","font-bold","tracking-tight","text-gray-900","dark:text-white"],[1,"py-2.5"],[1,"font-normal","text-gray-700","dark:text-gray-400"],[1,"flex","gap-2"],["type","button",1,"flex-1","flex","items-center","justify-center","rounded-lg","bg-yellow-400","px-5","py-2.5","text-sm","font-medium","text-white","hover:bg-yellow-500","focus:outline-none","focus:ring-4","focus:ring-yellow-300","dark:bg-yellow-600","dark:hover:bg-yellow-700","dark:focus:ring-yellow-800"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-white-800","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m14.304 4.844 2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565 6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"],["type","button",1,"flex-1","flex","items-center","justify-center","rounded-lg","bg-red-700","px-5","py-2.5","text-sm","font-medium","text-white","hover:bg-red-800","focus:outline-none","focus:ring-4","focus:ring-red-300","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-800"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m15 9-6 6m0-6 6 6m6-3a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"]],template:function(r,t){r&1&&(i(0,"p",0),a(1,"Entidad"),n(),m(2,"br"),i(3,"button",1),h("click",function(){return t.openCModal()}),a(4,"Crear Nueva Entidad"),n(),E(5,qr,74,17,"div",2),m(6,"br")(7,"hr"),i(8,"div",3),P(9,Br,20,3,"div",4,Wr),n()),r&2&&(d(5),b("ngIf",t.CreateOpen),d(4),T(t.entidades))},dependencies:[D,$,L,J,te,ie,G,oe,z,Z,me,j,Q]})}return l})();var bt=ge(pe());function Rr(l,c){if(l&1&&(i(0,"option",15),a(1),n()),l&2){let e=c.$implicit;b("value",e.id),d(),k(e.nombre)}}function Ur(l,c){if(l&1&&(i(0,"option",15),a(1),n()),l&2){let e=c.$implicit;b("value",e.id),d(),C(" ",e.nombre," ")}}function Hr(l,c){if(l&1&&(i(0,"option",15),a(1),n()),l&2){let e=c.$implicit;b("value",e.id),d(),k(e.nombre)}}function Gr(l,c){if(l&1&&(i(0,"option",15),a(1),n()),l&2){let e=c.$implicit;b("value",e.id),d(),k(e.nombre)}}function Zr(l,c){if(l&1){let e=w();i(0,"div",37)(1,"div",38),m(2,"img",39),n(),i(3,"button",40),h("click",function(){let t=g(e).index,o=u(2);return p(o.eliminarImagen(t))}),a(4," Eliminar "),n()()}if(l&2){let e=c.$implicit;d(2),b("src",e,de)}}function Qr(l,c){if(l&1){let e=w();i(0,"tbody")(1,"tr",49)(2,"th",50),a(3),n(),i(4,"th",50),a(5),n(),i(6,"th",51),y(),i(7,"svg",52),h("click",function(){let t=g(e).$implicit,o=u(3);return p(o.deleteSerie(t.sn,t.EstadoProducto.nombre))}),m(8,"path",53),n()()()()}if(l&2){let e=c.$implicit;d(3),C(" ",e.sn," "),d(2),C(" ",e.EstadoProducto.nombre," ")}}function Jr(l,c){if(l&1&&(i(0,"div",41)(1,"h4",42),a(2),n()(),i(3,"div",43)(4,"div",44)(5,"table",45)(6,"thead",46)(7,"tr")(8,"th",47),a(9,"Serie"),n(),i(10,"th",47),a(11,"Estado"),n(),i(12,"th",47),a(13,"Accion"),n()()(),E(14,Qr,9,2,"tbody",48),n()()()),l&2){let e=u(2);d(2),C(" Cantidad: ",e.seriesProducto.length," "),d(12),b("ngForOf",e.seriesProducto)}}function Kr(l,c){l&1&&(i(0,"div")(1,"p"),a(2,"Cargando detalles del producto..."),n()())}function $r(l,c){if(l&1){let e=w();i(0,"div")(1,"h1",1),a(2),n(),i(3,"form")(4,"div",2)(5,"div",3)(6,"label",4),a(7,"Nombre Producto"),n(),i(8,"input",5),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevoActua.nombre,t)||(o.nuevoActua.nombre=t),p(t)}),n()(),i(9,"div",3)(10,"label",6),a(11,"PN Producto"),n(),i(12,"input",7),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevoActua.pn,t)||(o.nuevoActua.pn=t),p(t)}),n()(),i(13,"div",3)(14,"label",8),a(15,"Stock"),n(),i(16,"input",9),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevoActua.stock,t)||(o.nuevoActua.stock=t),p(t)}),n()(),i(17,"div",3)(18,"label",10),a(19,"Precio"),n(),i(20,"input",11),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevoActua.precio,t)||(o.nuevoActua.precio=t),p(t)}),n()(),i(21,"div",3)(22,"label",12),a(23,"Seleccionar Marca"),n(),i(24,"select",13),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevoActua.MarcaId,t)||(o.nuevoActua.MarcaId=t),p(t)}),h("change",function(){g(e);let t=u();return p(t.buscarSubM(t.nuevoActua.MarcaId))}),i(25,"option",14),a(26,"Elegir..."),n(),P(27,Rr,2,2,"option",15,A),n()(),i(29,"div",3)(30,"label",16),a(31,"Seleccionar Categoria Marca"),n(),i(32,"select",17),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevoActua.CategoriaMarcaId,t)||(o.nuevoActua.CategoriaMarcaId=t),p(t)}),i(33,"option",14),a(34,"Elegir..."),n(),P(35,Ur,2,2,"option",15,A),n()(),i(37,"div",3)(38,"label",18),a(39,"Seleccionar Categoria"),n(),i(40,"select",19),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevoActua.CategoriaId,t)||(o.nuevoActua.CategoriaId=t),p(t)}),h("change",function(){g(e);let t=u();return p(t.buscarSubC(t.nuevoActua.CategoriaId))}),i(41,"option",14),a(42,"Elegir..."),n(),P(43,Hr,2,2,"option",15,A),n()(),i(45,"div",3)(46,"label",20),a(47,"Seleccionar Sub Categoria"),n(),i(48,"select",21),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevoActua.SubCategoriaId,t)||(o.nuevoActua.SubCategoriaId=t),p(t)}),i(49,"option",14),a(50,"Elegir..."),n(),P(51,Gr,2,2,"option",15,A),n()()(),i(53,"div",3)(54,"label",22),a(55,"Descripci\xF3n"),n(),i(56,"quill-editor",23),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevoActua.descripcion,t)||(o.nuevoActua.descripcion=t),p(t)}),n()(),i(57,"div",24)(58,"div",3)(59,"label",25),a(60,"Garantia Cliente"),n(),i(61,"input",26),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevoActua.garantia_cliente,t)||(o.nuevoActua.garantia_cliente=t),p(t)}),n()(),i(62,"div",3)(63,"label",27),a(64,"Garantia Total"),n(),i(65,"input",28),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevoActua.garantia_total,t)||(o.nuevoActua.garantia_total=t),p(t)}),n()()(),i(66,"div",3)(67,"label",29),a(68,"Seleccionar Archivo Principal"),n(),i(69,"input",30),h("change",function(t){g(e);let o=u();return p(o.onFileChangePrincipal(t))}),n()(),i(70,"div",3)(71,"label",31),a(72,"Seleccionar Archivo"),n(),i(73,"input",32),h("change",function(t){g(e);let o=u();return p(o.onFileChange(t))}),n()(),i(74,"div",33),E(75,Zr,5,1,"div",34),n(),m(76,"br"),i(77,"button",35),h("click",function(){g(e);let t=u();return p(t.guardarCambios())}),a(78," Guardar Cambios "),n()(),i(79,"div",36)(80,"button",35),h("click",function(){g(e);let t=u();return p(t.verSeries(t.nuevoActua.id))}),a(81," Ver Series "),n(),E(82,Jr,15,2),n(),E(83,Kr,3,0,"div",0),n()}if(l&2){let e=u();d(2),C(" ",e.nuevoActua.nombre," "),d(6),f("ngModel",e.nuevoActua.nombre),d(4),f("ngModel",e.nuevoActua.pn),d(4),f("ngModel",e.nuevoActua.stock),d(4),f("ngModel",e.nuevoActua.precio),d(4),f("ngModel",e.nuevoActua.MarcaId),d(3),T(e.marcas),d(5),f("ngModel",e.nuevoActua.CategoriaMarcaId),d(3),T(e.ListaCategoriaMarcaSeleccionada),d(5),f("ngModel",e.nuevoActua.CategoriaId),d(3),T(e.categorias),d(5),f("ngModel",e.nuevoActua.SubCategoriaId),d(3),T(e.ListasSubcategoriaSeleccionada),d(5),f("ngModel",e.nuevoActua.descripcion),d(5),f("ngModel",e.nuevoActua.garantia_cliente),d(4),f("ngModel",e.nuevoActua.garantia_total),d(10),b("ngForOf",e.nuevoActua.imageurl),d(7),K(e.seriesProducto?82:-1),d(),b("ngIf",!e.nuevoActua)}}var Ei=(()=>{class l{route;productoService;productos=[];categorias=[];marcas=[];categoriaservice=W(Le);marcaservice=W(Ne);url=et.API_URL;productService=W(ae);id="";nuevoActua={id:"",nombre:"",pn:"",descripcion:"",stock:1,precio:1,MarcaId:1,CategoriaMarcaId:1,CategoriaId:1,SubCategoriaId:1,garantia_cliente:0,garantia_total:0,cantidad:0,imagen_principal:"",imageurl:[]};constructor(e,r){this.route=e,this.productoService=r}ListaCategoriaMarcaSeleccionada;ListasSubcategoriaSeleccionada;buscarSubM(e){this.ListaCategoriaMarcaSeleccionada=this.marcas.find(r=>r.id==e)?.CategoriaMarcas}buscarSubC(e){this.ListasSubcategoriaSeleccionada=this.categorias.find(r=>r.id==e)?.subcategorias}ngOnInit(){this.categorias.length==0&&this.categoriaservice.getAll().subscribe(e=>{this.categorias=e}),this.marcas.length==0&&this.marcaservice.getAll().subscribe(e=>{this.marcas=e}),this.route.paramMap.subscribe(e=>{let r=e.get("id")??"";this.productService.getProductoById(r).subscribe(t=>{this.nuevoActua=t,console.log(this.nuevoActua),this.buscarSubC(this.nuevoActua.CategoriaId),this.buscarSubM(this.nuevoActua.MarcaId)})})}productoSerieService=W(pt);seriesProducto=[];ListOpen=!1;verSeries(e){this.productoSerieService.getSeriesByProductoId(e).subscribe({next:r=>{this.seriesProducto=r,console.log("Series del producto:",this.seriesProducto)},error:r=>{console.error("Error al obtener las series del producto:",r)}})}imagencargadaPrincipal="";imagencarga=[];selectedFiles=[];selectedFilePrincipal=null;onFileChange(e){e.target.files.length>0&&(this.selectedFiles=Array.from(e.target.files),this.selectedFiles.forEach(r=>{let t=new FileReader;t.onload=o=>{this.imagencarga.push(o.target.result)},t.readAsDataURL(r)}))}onFileChangePrincipal(e){if(e.target.files.length>0&&(this.selectedFilePrincipal=e.target.files[0],this.selectedFilePrincipal)){let r=new FileReader;r.onload=t=>{this.imagencarga.push(t.target.result)},r.readAsDataURL(this.selectedFilePrincipal)}}eliminarImagen(e){this.nuevoActua.imageurl.splice(e,1),console.log("Lista imagenes: ",this.nuevoActua.imageurl)}guardarCambios(){let e=new FormData;e.append("producto",JSON.stringify(this.nuevoActua)),this.selectedFiles.length>0?this.selectedFiles.forEach(r=>{e.append("files",r)}):e.append("files",new Blob,""),this.selectedFilePrincipal?e.append("file",this.selectedFilePrincipal):e.append("file",new Blob,""),this.productoService.putProducto(e).subscribe({next:()=>{this.imagencargadaPrincipal="",this.imagencarga=[],this.selectedFilePrincipal=null,this.selectedFiles=[],bt.default.fire({icon:"success",title:"Producto Actualizado",showConfirmButton:!1,timer:1e3})},error:r=>{console.error("Error al actualizar el producto:",r)}})}deleteSerie(e,r){r==="stock"?this.productoSerieService.delete(e).subscribe({next:()=>{this.verSeries(this.nuevoActua.id),bt.default.fire({icon:"success",title:"Serie Eliminada",showConfirmButton:!1,timer:1e3})},error:t=>{console.error("Error al eliminar la serie:",t)}}):bt.default.fire({icon:"info",title:"No puede eliminar la serie",text:"no puedes elimar una serie que esta relacionada con una venta o en rma",timer:2500})}static \u0275fac=function(r){return new(r||l)(_(Ae),_(ae))};static \u0275cmp=M({type:l,selectors:[["app-inventario-detalle"]],standalone:!0,features:[I],decls:1,vars:1,consts:[[4,"ngIf"],[1,"text-5xl","font-extrabold","dark:text-white"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-3"],[1,"mb-6"],["for","editNombre",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","editNombre","name","editNombre","placeholder","Ingrese nombre del producto...","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","editPn",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","editPn","name","editPn","placeholder","Ingrese nombre del PN del producto...","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","editStock",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","number","id","editStock","name","editStock","placeholder","Ingrese stock del producto...","readonly","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","editPrecio",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","number","id","editPrecio","name","editPrecio","placeholder","Ingrese el precio del producto...","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","marcaSelect",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","marcaSelect","name","marcaSelect",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","change","ngModel"],["value","","disabled","","selected",""],[3,"value"],["for","categoriaMSelect",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","categoriaMSelect","name","categoriaMSelect",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","categoriaSelect",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","categoriaSelect","name","categoriaSelect",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","change","ngModel"],["for","ScategoriaSelect",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","ScategoriaSelect","name","ScategoriaSelect",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","editDescripcion",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["id","editDescripcion","name","editDescripcion",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-2"],["for","editGarantiaCliente",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","number","id","editGarantiaCliente","name","editGarantiaCliente","placeholder","Ingrese la garant\xEDa cliente...","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","editGarantiaTotal",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","number","id","editGarantiaTotal","name","editGarantiaTotal","placeholder","Ingrese la garant\xEDa total...","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["for","archivo",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","file","id","archivo","name","archivo","multiple","","required","",1,"block","w-full","text-sm","text-gray-900","border","border-gray-300","rounded-lg","cursor-pointer","bg-gray-50","dark:text-gray-400","focus:outline-none","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400",3,"change"],["for","archivo1",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","file","id","archivo1","name","archivo1","multiple","","required","",1,"block","w-full","text-sm","text-gray-900","border","border-gray-300","rounded-lg","cursor-pointer","bg-gray-50","dark:text-gray-400","focus:outline-none","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400",3,"change"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],["class","relative",4,"ngFor","ngForOf"],["type","button",1,"w-full","items-center","rounded-lg","bg-blue-700","px-5","py-2.5","text-sm","font-medium","text-white","hover:bg-blue-800","focus:outline-none","focus:ring-4","focus:ring-blue-300","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],[1,"mt-6"],[1,"relative"],[1,"w-full","items-center","py-2","px-2","rounded-t-lg","text-gray-900","bg-white","border-3","border-gray-300","focus:outline-none","hover:bg-gray-100","focus:ring-4","focus:ring-gray-100","font-medium","text-sm","dark:bg-gray-800","dark:text-white","dark:border-gray-600","dark:hover:bg-gray-700","dark:hover:border-gray-600","dark:focus:ring-gray-700"],["alt","",1,"w-auto","max-w-full","rounded-lg",3,"src"],["type","button",1,"w-full","items-center","rounded-b-lg","bg-red-700","px-5","py-2.5","text-sm","font-medium","text-white","hover:bg-red-800","focus:outline-none","focus:ring-4","focus:ring-red-300","dark:bg-red-600","dark:hover:bg-red-700","dark:focus:ring-red-800",3,"click"],[1,"mt-5"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],[1,"p-4","md:p-5","space-y-4"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],[4,"ngFor","ngForOf"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600"],["scope","row",1,"px-6","py-4","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],["scope","row",1,"px-6","py-4"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","text-red-600","dark:text-red-600","hover:scale-110","hover:cursor-pointer",3,"click"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 7h14m-9 3v8m4-8v8M10 3h4a1 1 0 0 1 1 1v3H9V4a1 1 0 0 1 1-1ZM6 7h12v13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7Z"]],template:function(r,t){r&1&&E(0,$r,84,15,"div",0),r&2&&b("ngIf",t.nuevoActua)},dependencies:[D,he,$,L,J,te,ie,G,it,oe,z,Z,me,j,Q,ot,at],encapsulation:2})}return l})();var ft=(()=>{class l{http;authService;Url=H.API_URL+"/facturacion/cotizacion";headersAuthorization;headers;constructor(e,r){this.http=e,this.authService=r,this.headers=this.authService.getHeaders(),this.headersAuthorization=this.authService.getHeadersAuthorization()}registrar(e){return e.usuario_id=JSON.parse(localStorage.getItem("User")).id,this.http.post(this.Url,e,{headers:this.headers})}getPagedCotizaciones(e,r){return this.http.get(`${this.Url}?page=${e}&size=${r}`,{headers:this.headers})}getCotizacionById(e){return this.http.get(`${this.Url}/${e}`,{headers:this.headers})}static \u0275fac=function(r){return new(r||l)(O(U),O(ne))};static \u0275prov=q({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})();var Mi=ge(pe());function Xr(l,c){if(l&1&&(i(0,"tr",10)(1,"td",14),a(2),n(),i(3,"td",14),a(4),n(),i(5,"td",14),a(6),n(),i(7,"td",14),a(8),B(9,"currency"),n(),i(10,"td",15)(11,"a",16),a(12,"Pdf"),n()()()),l&2){let e=c.$implicit;d(2),C(" ",e.id.toString().padStart(6,"0")," "),d(2),C(" ",e.fecha_emision.split("T")[0]," "),d(2),C(" ",e.negocio.nombre," "),d(2),C(" ",R(9,5,e.total,"S/. ")," "),d(3),b("href",e.url_pdf,de)}}var Ii=(()=>{class l{router=W(ee);cotizaciones=[];cotizacionService=W(ft);totalCotizaciones=0;page=1;pageSize=15;totalPages=0;searchId="";ngOnInit(){this.getCotizaciones(this.page,this.pageSize)}getCotizaciones(e,r){this.cotizacionService.getPagedCotizaciones(e,r).subscribe(t=>{this.cotizaciones=t.cotizaciones,this.totalCotizaciones=t.total,this.totalPages=t.totalPages})}searchCotizacionById(){this.searchId?this.cotizacionService.getCotizacionById(this.searchId).subscribe(e=>{this.cotizaciones=[e],this.totalPages=1},e=>{console.error(e),Mi.default.fire({icon:"error",title:"Error",text:e.error?.message||"Ocurri\xF3 un error al buscar la cotizaci\xF3n."})}):this.getCotizaciones(this.page,this.pageSize)}refresh(){this.getCotizaciones(this.page,this.pageSize)}onPageChange(e){this.page=e,this.getCotizaciones(this.page,this.pageSize)}CrearNuevaCotizacion(){this.router.navigate(["/dashboard/cotizaciones/nuevo"])}listaPage(){return[...Array(this.totalPages).keys()]}static \u0275fac=function(r){return new(r||l)};static \u0275cmp=M({type:l,selectors:[["app-list-cotizacion"]],standalone:!0,features:[I],decls:36,vars:5,consts:[[1,"text-2xl","text-center","font-extrabold","text-gray-800","dark:text-white"],[1,"flex","justify-between","items-center","mb-4"],["type","text","placeholder","Buscar por ID de cotizaci\xF3n",1,"px-4","py-2","border","border-gray-300","rounded-md",3,"ngModelChange","keydown.enter","ngModel"],[1,"px-3","py-2","ml-2","text-white","bg-blue-500","rounded-md","hover:bg-blue-600",3,"click"],[1,"px-3","py-2","ml-2","text-blue-600","bg-transparent","border-[1px]","border-blue-600","rounded-md","hover:bg-blue-600","hover:text-white",3,"click"],[1,"px-3","py-2","text-white","bg-green-500","rounded-md","hover:bg-green-600",3,"click"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600"],[1,"flex","justify-center","mt-4"],[1,"px-3","py-1","mx-1","text-sm","font-medium","text-white","bg-blue-500","rounded-md","hover:bg-blue-600",3,"click","disabled"],[1,"px-3","py-1","mx-1","text-sm","font-medium"],[1,"px-6","py-3","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"px-6","py-3"],["target","_blank",1,"font-medium","text-blue-600","dark:text-blue-500","hover:underline",3,"href"]],template:function(r,t){r&1&&(i(0,"h2",0),a(1,` Cotizaciones
`),n(),m(2,"br"),i(3,"div",1)(4,"div")(5,"input",2),v("ngModelChange",function(s){return x(t.searchId,s)||(t.searchId=s),s}),h("keydown.enter",function(){return t.searchCotizacionById()}),n(),i(6,"button",3),h("click",function(){return t.searchCotizacionById()}),a(7," Buscar "),n(),i(8,"button",4),h("click",function(){return t.refresh()}),a(9," Refresh "),n()(),i(10,"button",5),h("click",function(){return t.CrearNuevaCotizacion()}),a(11," Crear Nueva Cotizaci\xF3n "),n()(),i(12,"div",6)(13,"table",7)(14,"thead",8)(15,"tr")(16,"th",9),a(17,"Numeracion"),n(),i(18,"th",9),a(19,"Fecha"),n(),i(20,"th",9),a(21,"Emisor"),n(),i(22,"th",9),a(23,"Total"),n(),i(24,"th",9),a(25,"Acci\xF3n"),n()()(),i(26,"tbody"),P(27,Xr,13,8,"tr",10,A),n()()(),i(29,"div",11)(30,"button",12),h("click",function(){return t.onPageChange(t.page-1)}),a(31," Anterior "),n(),i(32,"span",13),a(33),n(),i(34,"button",12),h("click",function(){return t.onPageChange(t.page+1)}),a(35," Siguiente "),n()()),r&2&&(d(5),f("ngModel",t.searchId),d(22),T(t.cotizaciones),d(3),b("disabled",t.page===1),d(3),X(" P\xE1gina ",t.page," de ",t.totalPages," "),d(),b("disabled",t.page===t.totalPages))},dependencies:[ue,L,G,z,j]})}return l})();var en=["busqueda"];function tn(l,c){if(l&1){let e=w();i(0,"div",6),m(1,"div",30),i(2,"div",31)(3,"div",32)(4,"div",33)(5,"h3",34),a(6," Editar Tipado "),n(),i(7,"button",35),h("click",function(){g(e);let t=u();return p(t.ToggleEModal())}),y(),i(8,"svg",36),m(9,"path",37),n(),S(),i(10,"span",38),a(11,"Close modal"),n()()(),i(12,"div",39)(13,"div",8)(14,"label",40),a(15,"Fecha de Emisi\xF3n"),n(),i(16,"input",41),v("ngModelChange",function(t){g(e);let o=u();return x(o.fechaEmision,t)||(o.fechaEmision=t),p(t)}),n()(),i(17,"div",8)(18,"label",42),a(19,"Fecha de Vencimiento"),n(),i(20,"input",43),v("ngModelChange",function(t){g(e);let o=u();return x(o.fechaVencimiento,t)||(o.fechaVencimiento=t),p(t)}),n()()()()()()}if(l&2){let e=u();d(16),f("ngModel",e.fechaEmision),d(4),f("ngModel",e.fechaVencimiento)}}function rn(l,c){if(l&1){let e=w();i(0,"tr",44)(1,"td",45)(2,"input",46),v("ngModelChange",function(t){let o=g(e).$implicit;return x(o.cantidad,t)||(o.cantidad=t),p(t)}),h("change",function(){let t=g(e).$index,o=u(2);return p(o.recalcularPrecio(t))}),n()(),i(3,"td",47)(4,"input",48),v("ngModelChange",function(t){let o=g(e).$implicit;return x(o.nombre,t)||(o.nombre=t),p(t)}),n()(),i(5,"td",49)(6,"span"),a(7,"S/."),n(),i(8,"input",50),v("ngModelChange",function(t){let o=g(e).$implicit;return x(o.precio_unitario,t)||(o.precio_unitario=t),p(t)}),h("change",function(){let t=g(e).$index,o=u(2);return p(o.recalcularPrecio(t))}),n()(),i(9,"td",51),a(10),B(11,"currency"),n()()}if(l&2){let e=c.$implicit,r=c.$index;d(2),b("name","cant_"+r)("id","cant_"+r),f("ngModel",e.cantidad),d(2),b("name","nombre_"+r)("id","nombre_"+r),f("ngModel",e.nombre),d(4),b("name","precio_unitario_"+r)("id","precio_unitario_"+r),f("ngModel",e.precio_unitario),d(2),C(" ",R(11,10,e.precio_total,"S/. ")," ")}}function nn(l,c){if(l&1&&(i(0,"tbody"),P(1,rn,12,13,"tr",44,A),n()),l&2){let e=u();d(),T(e.ventaData.detalles)}}var Pi=(()=>{class l{productoService;entidadService;cotizacionService;inputBusqueda;flagbusqueda;fechaEmision;fechaVencimiento;EditOpen=!1;detalleVenta=[];entidades=[];listaProductos=[];ventaData={cliente:{id:"",documento:"",nombre:"",direccion:""},usuario_id:"",fecha_emision:new Date().toISOString(),fecha_vencimiento:new Date().toISOString(),nota:"",gravada:this.totalGravada,impuesto:this.igv,total:this.totalPagar,detalles:this.detalleVenta};constructor(e,r,t){this.productoService=e,this.entidadService=r,this.cotizacionService=t,this.flagbusqueda=!1}ngOnInit(){this.setFechaEmision(),this.cargarProductos(),this.cargarClientes()}guardarProductos(){this.ventaData.gravada=this.totalGravada,this.ventaData.impuesto=this.igv,this.ventaData.total=this.totalPagar,console.log(this.ventaData),this.cotizacionService.registrar(this.ventaData).subscribe(e=>{console.log(e),window.open(e.ruta,"_blank")})}cargarProductos(){this.productoService.getListaProductos().subscribe(e=>{console.log(e),this.listaProductos=e},e=>{console.error("Error al obtener los productos:",e)})}cargarClientes(){this.entidadService.getEntidades().subscribe(e=>{this.entidades=e})}clienteSearch(e){this.entidadService.search(e).subscribe(r=>{this.entidades=r})}clienteSelect(e){let r=this.entidades.find(t=>t.id==e);this.ventaData.cliente.id=r?.id,this.ventaData.cliente.documento=r?.documento,this.ventaData.cliente.nombre=r?.nombre,this.ventaData.cliente.direccion=r?.direccion}productSearch(e){this.productoService.getProductoSearch(e).subscribe(r=>{this.listaProductos=r},r=>{console.error("Error al obtener los productos:",r)})}seleccionar(e){let r=this.ventaData.detalles.find(t=>t.id_producto===e);if(!r){let t=this.listaProductos.find(o=>o.id===e);r={id_producto:t?.id,nombre:t?.nombre,cantidad:1,series:[],precio_unitario:t?.precio,precio_total:t?.precio},this.ventaData.detalles.push(r)}}setFechaEmision(){let e=new Date,r=e.getDate().toString().padStart(2,"0"),t=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getFullYear();this.fechaEmision=`${o}-${t}-${r}`,this.fechaVencimiento=`${o}-${t}-${r}`}recalcularPrecio(e){let r=this.ventaData.detalles[e];r.cantidad&&r.precio_unitario?r.precio_total=r.cantidad*r.precio_unitario:r.precio_total=0}get totalGravada(){return this.totalPagar/1.18}get igv(){return this.totalGravada*.18}get totalPagar(){return this.detalleVenta.reduce((e,r)=>e+r.precio_total,0)}ToggleEModal(){this.EditOpen=!this.EditOpen}static \u0275fac=function(r){return new(r||l)(_(ae),_(ke),_(ft))};static \u0275cmp=M({type:l,selectors:[["app-cotizacion"]],viewQuery:function(r,t){if(r&1&&ve(en,7),r&2){let o;ye(o=_e())&&(t.inputBusqueda=o.first)}},standalone:!0,features:[I],decls:57,vars:22,consts:[[1,"text-2xl","text-center","font-extrabold","text-gray-800","dark:text-white"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-3"],["role","button","tabindex","0","aria-label","Abrir modal",1,"icon-container",3,"click","keydown.enter","keydown.space"],["xmlns","http://www.w3.org/2000/svg","height","40px","viewBox","0 -960 960 960","width","30px","fill","#000000"],["d","m382-80-18.67-126.67q-17-6.33-34.83-16.66-17.83-10.34-32.17-21.67L178-192.33 79.33-365l106.34-78.67q-1.67-8.33-2-18.16-.34-9.84-.34-18.17 0-8.33.34-18.17.33-9.83 2-18.16L79.33-595 178-767.67 296.33-715q14.34-11.33 32.34-21.67 18-10.33 34.66-16L382-880h196l18.67 126.67q17 6.33 35.16 16.33 18.17 10 31.84 22L782-767.67 880.67-595l-106.34 77.33q1.67 9 2 18.84.34 9.83.34 18.83 0 9-.34 18.5Q776-452 774-443l106.33 78-98.66 172.67-118-52.67q-14.34 11.33-32 22-17.67 10.67-35 16.33L578-80H382Zm55.33-66.67h85l14-110q32.34-8 60.84-24.5T649-321l103.67 44.33 39.66-70.66L701-415q4.33-16 6.67-32.17Q710-463.33 710-480q0-16.67-2-32.83-2-16.17-7-32.17l91.33-67.67-39.66-70.66L649-638.67q-22.67-25-50.83-41.83-28.17-16.83-61.84-22.83l-13.66-110h-85l-14 110q-33 7.33-61.5 23.83T311-639l-103.67-44.33-39.66 70.66L259-545.33Q254.67-529 252.33-513 250-497 250-480q0 16.67 2.33 32.67 2.34 16 6.67 32.33l-91.33 67.67 39.66 70.66L311-321.33q23.33 23.66 51.83 40.16 28.5 16.5 60.84 24.5l13.66 110Zm43.34-200q55.33 0 94.33-39T614-480q0-55.33-39-94.33t-94.33-39q-55.67 0-94.5 39-38.84 39-38.84 94.33t38.84 94.33q38.83 39 94.5 39ZM480-480Z"],["tabindex","-1","aria-hidden","true",1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"w-full",3,"emitterSearchText","emitterSelectedValue","lista","title","rutacreate","Tipo"],[1,"mb-6"],["for","nota",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","nota","name","nota","placeholder","Nota venta",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],[3,"emitterSearchText","emitterSelectedValue","lista","title","rutacreate"],[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg","mb-6"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3","max-w-16"],["scope","col",1,"px-6","py-3","min-w-80"],["scope","col",1,"px-6","py-3","max-w-32"],["scope","col",1,"px-6","py-3","w-fit"],[4,"ngIf"],[1,"grid","gap-6","my-6","md:grid-cols-2"],["for","gra",1,"form-label"],["type","text","id","gra","disabled","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"value"],[1,"grid","gap-6","mb-6","md:grid-cols-2"],["for","igv",1,"form-label"],["type","text","id","igv","disabled","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"value"],["for","pagar",1,"form-label"],["type","text","id","pagar","disabled","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"value"],[1,"my-4"],["type","submit",1,"w-full","items-center","rounded-lg","bg-blue-700","px-5","py-2.5","text-sm","font-medium","text-white","hover:bg-blue-800","focus:outline-none","focus:ring-4","focus:ring-blue-300","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],[1,"fixed","inset-0","bg-black","bg-opacity-50"],[1,"relative","flex","items-center","justify-center","min-h-screen","p-4"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700","max-w-2xl","w-full"],[1,"flex","items-center","justify-between","p-4","md:p-5","border-b","rounded-t","dark:border-gray-600"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],["type","button",1,"text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","inline-flex","justify-center","items-center","dark:hover:bg-gray-600","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],[1,"p-4","md:p-5","space-y-4"],["for","fecha-emision",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","date","id","fecha-emision","name","fechaEmision","placeholder","yyyy-mm-dd",1,"w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","fecha-venci",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","date","id","fecha-venci","name","fechaVencimiento","placeholder","yyyy-mm-dd",1,"w-full","p-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600"],[1,"pl-6","max-w-16"],["type","text","oninput","this.value = this.value.replace(/[^1-9]/g, '')",1,"inputcotizacion","max-w-16","text-sm",3,"ngModelChange","change","name","id","ngModel"],[1,"px-6","py-4","min-w-80"],["type","text",1,"inputcotizacion","w-full","text-sm",3,"ngModelChange","name","id","ngModel"],[1,"px-6","py-4","flex","flex-row","flex-nowrap","items-center","align-middle","max-w-32"],["type","text","oninput","this.value = this.value.replace(/[^0-9.]/g, '')",1,"inputcotizacion","max-w-32","text-sm",3,"ngModelChange","change","name","id","ngModel"],[1,"px-6","py-4","w-fit","text-sm"]],template:function(r,t){r&1&&(i(0,"h1",0),a(1,` Cotizacion
`),n(),m(2,"br"),i(3,"div",1)(4,"h2",2)(5,"b"),a(6,"Informaci\xF3n"),n()(),i(7,"div",3),h("click",function(){return t.ToggleEModal()})("keydown.enter",function(){return t.ToggleEModal()})("keydown.space",function(){return t.ToggleEModal()}),y(),i(8,"svg",4),m(9,"path",5),n()()(),E(10,tn,21,2,"div",6),S(),i(11,"form")(12,"app-select-search",7),h("emitterSearchText",function(s){return t.clienteSearch(s)})("emitterSelectedValue",function(s){return t.clienteSelect(s)}),n(),i(13,"div",8)(14,"label",9),a(15,"Nota (Opcional)"),n(),i(16,"input",10),v("ngModelChange",function(s){return x(t.ventaData.nota,s)||(t.ventaData.nota=s),s}),n()(),i(17,"app-select-search",11),h("emitterSearchText",function(s){return t.productSearch(s)})("emitterSelectedValue",function(s){return t.seleccionar(s)}),n()(),m(18,"hr"),i(19,"div",12)(20,"table",13)(21,"thead",14)(22,"tr")(23,"th",15),a(24,"Cantidad"),n(),i(25,"th",16),a(26,"Descripcion"),n(),i(27,"th",17),a(28,"P. Unit"),n(),i(29,"th",18),a(30,"P. Total"),n()()(),E(31,nn,3,0,"tbody",19),n()(),m(32,"hr"),i(33,"div",20)(34,"div")(35,"label",21),a(36,"Gravada (sin IGV)"),n()(),i(37,"div"),m(38,"input",22),B(39,"currency"),n()(),i(40,"div",23)(41,"div")(42,"label",24),a(43,"Impuesto IGV (18%)"),n()(),i(44,"div"),m(45,"input",25),B(46,"currency"),n()(),i(47,"div",23)(48,"div")(49,"label",26),a(50,"Total Pagar"),n()(),i(51,"div"),m(52,"input",27),B(53,"currency"),n()(),m(54,"hr",28),i(55,"button",29),h("click",function(){return t.guardarProductos()}),a(56,` Generar Cotizacion
`),n()),r&2&&(d(10),K(t.EditOpen?10:-1),d(2),b("lista",t.entidades)("title","Cliente")("rutacreate","/dashboard/entidades")("Tipo","cliente"),d(4),f("ngModel",t.ventaData.nota),d(),b("lista",t.listaProductos)("title","Producto")("rutacreate","/dashboard/inventario"),d(14),b("ngIf",t.ventaData.detalles&&t.ventaData.detalles.length>0),d(7),b("value",R(39,13,t.totalGravada,"S/. ")),d(7),b("value",R(46,16,t.igv,"S/. ")),d(7),b("value",R(53,19,t.totalPagar,"S/. ")))},dependencies:[ue,L,J,G,z,Z,j,Q,D,$,We],styles:[".inputcotizacion[_ngcontent-%COMP%]{border:0}@keyframes _ngcontent-%COMP%_expandHeight{0%{height:0;opacity:0;display:none}to{height:20rem;opacity:1;display:block}}@keyframes _ngcontent-%COMP%_supressHeight{0%{height:20rem;opacity:1;display:block}to{height:0;opacity:0;display:none}}.expand-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_expandHeight .3s ease-in-out forwards}.supress[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_supressHeight .3s ease-in-out forwards}@keyframes _ngcontent-%COMP%_expandHeightcontainer{0%{height:0;opacity:0;display:none}to{height:24rem;opacity:1;display:block}}@keyframes _ngcontent-%COMP%_supressHeightcontainer{0%{height:24rem;opacity:1;display:block}to{height:0;opacity:0;display:none}}.expand-animation-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_expandHeightcontainer .3s ease-in-out forwards}.supress-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_supressHeightcontainer .3s ease-in-out forwards}"]})}return l})();var Ee=ge(pe());var Ti=(()=>{class l{http;apiUrl=H.API_URL+"/inventory/subcategoria";constructor(e){this.http=e}headers=new Se({Authorization:`Bearer ${localStorage.getItem("authToken")}`});getSubCategorias(){return this.http.get(this.apiUrl,{headers:this.headers})}deleteSubCategoria(e){return this.http.delete(`${this.apiUrl}/${e}`,{headers:this.headers})}static \u0275fac=function(r){return new(r||l)(O(U))};static \u0275prov=q({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})();function on(l,c){if(l&1){let e=w();i(0,"tr",13),h("click",function(){let t=g(e).$implicit,o=u();return p(o.seleccionarCategoria(t.id))}),i(1,"th",14),a(2),n(),i(3,"td",15),a(4),n(),i(5,"td",15),a(6),n()()}if(l&2){let e=c.$implicit;d(2),C(" ",e.id," "),d(2),k(e.nombre),d(2),k(e.descripcion)}}function ln(l,c){if(l&1&&(i(0,"tr",11)(1,"th",14),a(2),n(),i(3,"td",15),a(4),n(),i(5,"td",15),a(6),n()()),l&2){let e=c.$implicit;d(2),C(" ",e.id," "),d(2),k(e.nombre),d(2),k(e.descripcion)}}function dn(l,c){if(l&1){let e=w();i(0,"div",16),m(1,"div",17),i(2,"div",18)(3,"div",19)(4,"div",20)(5,"h3",21),a(6),n(),i(7,"button",22),h("click",function(){g(e);let t=u();return p(t.CCOpen=!1)}),y(),i(8,"svg",23),m(9,"path",24),n(),S(),i(10,"span",25),a(11,"Close modal"),n()()(),i(12,"div",26)(13,"h3",27),a(14," A\xF1adir Categor\xEDa "),n(),i(15,"form",28)(16,"div")(17,"label",29),a(18,"Nombre:"),n(),i(19,"input",30),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevaCategoria.nombre,t)||(o.nuevaCategoria.nombre=t),p(t)}),n()(),i(20,"div")(21,"label",31),a(22,"Descripci\xF3n:"),n(),i(23,"input",32),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevaCategoria.descripcion,t)||(o.nuevaCategoria.descripcion=t),p(t)}),n()(),i(24,"button",33),h("click",function(){g(e);let t=u();return p(t.guardarCategoria())}),a(25," Guardar Categor\xEDa "),n()()()()()()}if(l&2){let e=u();d(6),C(" ",e.name_modal," "),d(13),f("ngModel",e.nuevaCategoria.nombre),d(4),f("ngModel",e.nuevaCategoria.descripcion)}}function sn(l,c){if(l&1){let e=w();i(0,"div",16),m(1,"div",17),i(2,"div",18)(3,"div",19)(4,"div",20)(5,"h3",21),a(6),n(),i(7,"button",22),h("click",function(){g(e);let t=u();return p(t.SCOpen=!1)}),y(),i(8,"svg",23),m(9,"path",24),n(),S(),i(10,"span",25),a(11,"Close modal"),n()()(),i(12,"div",26)(13,"h3",27),a(14," A\xF1adir SubCategor\xEDa "),n(),i(15,"form",28)(16,"div")(17,"label",34),a(18,"Nombre:"),n(),i(19,"input",35),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevaSubcategoria.nombre,t)||(o.nuevaSubcategoria.nombre=t),p(t)}),n()(),i(20,"div")(21,"label",36),a(22,"Descripci\xF3n:"),n(),i(23,"input",37),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevaSubcategoria.descripcion,t)||(o.nuevaSubcategoria.descripcion=t),p(t)}),n()(),i(24,"button",33),h("click",function(){g(e);let t=u();return p(t.guardarSubCategoria())}),a(25," Guardar SubCategor\xEDa "),n()()()()()()}if(l&2){let e=u();d(6),C(" ",e.name_modal," "),d(13),f("ngModel",e.nuevaSubcategoria.nombre),d(4),f("ngModel",e.nuevaSubcategoria.descripcion)}}var Vi=(()=>{class l{categoriaService;subcategoriaService;CategoriaSelect=0;Categoria=[];Subcategoria=[];nuevaCategoria={nombre:"",descripcion:""};nuevaSubcategoria={nombre:"",descripcion:"",id_categoria:0};constructor(e,r){this.categoriaService=e,this.subcategoriaService=r}ngOnInit(){this.cargarCategoria()}cargarCategoria(){this.categoriaService.getAll().subscribe(e=>{this.Categoria=e,this.seleccionarCategoria(e[0].id)},e=>{console.error("Error al obtener las categorias:",e)})}guardarCategoria(){console.log(this.nuevaCategoria),this.categoriaService.postCategoria(this.nuevaCategoria).subscribe({next:()=>{Ee.default.fire({icon:"success",title:"Categoria agregada",text:"La categoria ha sido agregado al inventario."}),this.cargarCategoria()},error:e=>{Ee.default.fire({icon:"error",title:"Categoria no agregada",text:e})}})}guardarSubCategoria(){this.nuevaSubcategoria.id_categoria=this.CategoriaSelect,this.categoriaService.postSubCategoria(this.nuevaSubcategoria).subscribe({next:()=>{Ee.default.fire({icon:"success",title:"Subcategor\xEDa agregada",text:"La subcategor\xEDa ha sido agregada correctamente."}),this.cargarSubcategorias()},error:e=>{Ee.default.fire({icon:"error",title:"Error al agregar subcategor\xEDa",text:e})}}),this.nuevaSubcategoria={nombre:"",descripcion:"",id_categoria:this.CategoriaSelect}}cargarSubcategorias(){this.categoriaService.getSubs(this.CategoriaSelect).subscribe(e=>{this.Subcategoria=e,console.log("Subcategoria cargada.")},e=>{console.error("Error al obtener subcategor\xEDas: ",e)})}seleccionarCategoria(e){this.CategoriaSelect=e,this.categoriaService.getSubs(this.CategoriaSelect).subscribe(r=>{this.Subcategoria=r},r=>{console.error("Error: ",r)})}eliminarSubCategoria(e){Ee.default.fire({title:"\xBFEst\xE1s seguro?",text:"No podr\xE1s revertir esto.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xED, eliminarlo"}).then(r=>{r.isConfirmed&&this.subcategoriaService.deleteSubCategoria(e).subscribe({next:()=>{Ee.default.fire("Eliminado","La subcategor\xEDa ha sido eliminada.","success"),this.cargarSubcategorias()},error:t=>{Ee.default.fire({icon:"error",title:"Error al eliminar subcategor\xEDa",text:t})}})})}CCOpen=!1;SCOpen=!1;name_modal="CREAR";openCCModal(){this.name_modal="CREAR",this.CCOpen=!0}openSCModal(){this.name_modal="CREAR",this.SCOpen=!0}static \u0275fac=function(r){return new(r||l)(_(Le),_(Ti))};static \u0275cmp=M({type:l,selectors:[["app-categoria"]],standalone:!0,features:[I],decls:43,vars:2,consts:[[1,"text-2xl","font-bold","mb-4","text-center"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-4"],[1,"bg-white","dark:bg-gray-800","overflow-hidden","shadow-sm","sm:rounded-lg"],[1,"p-4","text-gray-900","dark:text-gray-100"],[1,"text-xl","font-semibold","mb-4"],["type","button",1,"w-full","sm:w-auto","text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","mb-4","dark:bg-blue-600","dark:hover:bg-blue-700","focus:outline-none","dark:focus:ring-blue-800",3,"click"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600","hover:cursor-pointer"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600","cursor-pointer"],["tabindex","-1","aria-hidden","true","class","fixed inset-0 z-50 overflow-y-auto",4,"ngIf"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600","hover:cursor-pointer",3,"click"],["scope","row",1,"px-6","py-4","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"px-6","py-4"],["tabindex","-1","aria-hidden","true",1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"fixed","inset-0","bg-black","bg-opacity-50"],[1,"relative","flex","items-center","justify-center","min-h-screen","p-4"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700","max-w-2xl","w-full"],[1,"flex","items-center","justify-between","p-4","md:p-5","border-b","rounded-t","dark:border-gray-600"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],["type","button",1,"text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","inline-flex","justify-center","items-center","dark:hover:bg-gray-600","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],[1,"p-4","md:p-5","space-y-4"],[1,"mb-4","text-xl","font-medium","text-gray-900","dark:text-white"],["action","#",1,"space-y-6"],["for","nombreCategoria",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","nombreCategoria","name","nombre","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white",3,"ngModelChange","ngModel"],["for","descripcionCategoria",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","descripcionCategoria","name","descripcion","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white",3,"ngModelChange","ngModel"],["type","button",1,"w-full","text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],["for","nombre",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","nombre","name","nombre","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white",3,"ngModelChange","ngModel"],["for","descripcion",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","descripcion","name","descripcion","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white",3,"ngModelChange","ngModel"]],template:function(r,t){r&1&&(i(0,"h1",0),a(1,` Inventario Categor\xEDa / SubCategor\xEDa
`),n(),i(2,"div",1)(3,"div",2)(4,"div",3)(5,"h2",4),a(6,"Tabla Categor\xEDa"),n(),i(7,"button",5),h("click",function(){return t.openCCModal()}),a(8," Crear Categor\xEDa "),n(),i(9,"div",6)(10,"table",7)(11,"thead",8)(12,"tr")(13,"th",9),a(14,"ID"),n(),i(15,"th",9),a(16,"Nombre"),n(),i(17,"th",9),a(18,"Descripci\xF3n"),n()()(),i(19,"tbody"),P(20,on,7,3,"tr",10,A),n()()()()(),i(22,"div",2)(23,"div",3)(24,"h2",4),a(25,"Tabla SubCategor\xEDa"),n(),i(26,"button",5),h("click",function(){return t.openSCModal()}),a(27," Crear SubCategor\xEDa "),n(),i(28,"div",6)(29,"table",7)(30,"thead",8)(31,"tr")(32,"th",9),a(33,"ID"),n(),i(34,"th",9),a(35,"Nombre"),n(),i(36,"th",9),a(37,"Descripci\xF3n"),n()()(),i(38,"tbody"),P(39,ln,7,3,"tr",11,A),n()()()()()(),E(41,dn,26,3,"div",12)(42,sn,26,3,"div",12)),r&2&&(d(20),T(t.Categoria),d(19),T(t.Subcategoria),d(2),b("ngIf",t.CCOpen),d(),b("ngIf",t.SCOpen))},dependencies:[L,J,G,z,Z,me,j,Q,D,$]})}return l})();var Me=ge(pe());var Di=(()=>{class l{http;apiUrl=H.API_URL+"/inventory/categoriamarca";constructor(e){this.http=e}headers=new Se({Authorization:`Bearer ${localStorage.getItem("authToken")}`});getCategoriaMarcas(){return this.http.get(this.apiUrl,{headers:this.headers})}deleteCategoriaMarca(e){return this.http.delete(`${this.apiUrl}/${e}`,{headers:this.headers})}static \u0275fac=function(r){return new(r||l)(O(U))};static \u0275prov=q({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})();function un(l,c){if(l&1){let e=w();i(0,"tr",13),h("click",function(){let t=g(e).$implicit,o=u();return p(o.seleccionarMarca(t.id))}),i(1,"th",14),a(2),n(),i(3,"td",15),a(4),n()()}if(l&2){let e=c.$implicit;d(2),C(" ",e.id," "),d(2),k(e.nombre)}}function mn(l,c){if(l&1&&(i(0,"tr",11)(1,"th",14),a(2),n(),i(3,"td",15),a(4),n()()),l&2){let e=c.$implicit;d(2),C(" ",e.id," "),d(2),k(e.nombre)}}function gn(l,c){if(l&1){let e=w();i(0,"div",16),m(1,"div",17),i(2,"div",18)(3,"div",19)(4,"div",20)(5,"h3",21),a(6," CREAR "),n(),i(7,"button",22),h("click",function(){g(e);let t=u();return p(t.MCOpen=!1)}),y(),i(8,"svg",23),m(9,"path",24),n(),S(),i(10,"span",25),a(11,"Close modal"),n()()(),i(12,"div",26)(13,"h3",27),a(14," A\xF1adir Marca "),n(),i(15,"form",28)(16,"div")(17,"label",29),a(18,"Nombre:"),n(),i(19,"input",30),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevaMarca.nombre,t)||(o.nuevaMarca.nombre=t),p(t)}),n()(),i(20,"button",31),h("click",function(){g(e);let t=u();return p(t.guardarMarca())}),a(21," Guardar Marca "),n()()()()()()}if(l&2){let e=u();d(19),f("ngModel",e.nuevaMarca.nombre)}}function pn(l,c){if(l&1){let e=w();i(0,"div",16),m(1,"div",17),i(2,"div",18)(3,"div",19)(4,"div",20)(5,"h3",21),a(6," CREAR "),n(),i(7,"button",22),h("click",function(){g(e);let t=u();return p(t.SCOpen=!1)}),y(),i(8,"svg",23),m(9,"path",24),n(),S(),i(10,"span",25),a(11,"Close modal"),n()()(),i(12,"div",26)(13,"h3",27),a(14," A\xF1adir Categoria Marca "),n(),i(15,"form",28)(16,"div")(17,"label",32),a(18,"Nombre:"),n(),i(19,"input",33),v("ngModelChange",function(t){g(e);let o=u();return x(o.nuevaCategoriaMarca.nombre,t)||(o.nuevaCategoriaMarca.nombre=t),p(t)}),n()(),i(20,"button",31),h("click",function(){g(e);let t=u();return p(t.guardarCategoriaMarca())}),a(21," Guardar Categoria Marca "),n()()()()()()}if(l&2){let e=u();d(19),f("ngModel",e.nuevaCategoriaMarca.nombre)}}function hn(l,c){l&1&&(i(0,"div",34)(1,"h2",35),a(2,"Editar Categoria Marca"),n()(),m(3,"div",36))}var Fi=(()=>{class l{marcaService;categoriMarcarService;MarcaSelect=0;Marca=[];CategoriaMarca=[];nuevaMarca={nombre:""};nuevaCategoriaMarca={nombre:"",id_marca:0};constructor(e,r){this.marcaService=e,this.categoriMarcarService=r}ngOnInit(){this.cargarMarca()}cargarMarca(){this.marcaService.getAll().subscribe(e=>{this.Marca=e,console.log(this.Marca)},e=>{console.error("Error al obtener las marcas:",e)})}guardarMarca(){this.marcaService.postMarca(this.nuevaMarca).subscribe({next:()=>{Me.default.fire({icon:"success",title:"Marca agregada",text:"La Marca ha sido agregado al inventario.",timer:1e3}),this.cargarMarca(),this.openMCModal()},error:e=>{Me.default.fire({icon:"error",title:"Marca no agregada",text:e})}})}guardarCategoriaMarca(){this.nuevaCategoriaMarca.id_marca=this.MarcaSelect,this.marcaService.postCategoriaMarca(this.nuevaCategoriaMarca).subscribe({next:()=>{Me.default.fire({icon:"success",title:"Categoria Marca agregada",text:"La categoria marca ha sido agregada correctamente.",timer:1e3}),this.cargarCategoriaMarca(),this.openSCModal()},error:e=>{Me.default.fire({icon:"error",title:"Error al agregar categoria marca",text:e})}}),this.nuevaCategoriaMarca={nombre:"",id_marca:this.MarcaSelect}}cargarCategoriaMarca(){this.marcaService.getSubs(this.MarcaSelect).subscribe(e=>{this.CategoriaMarca=e,console.log("Categoria marca cargada.")},e=>{console.error("Error al obtener categoria marca: ",e)})}seleccionarMarca(e){this.MarcaSelect=e,this.marcaService.getSubs(this.MarcaSelect).subscribe(r=>{this.CategoriaMarca=r},r=>{console.error("Error: ",r)})}eliminarCategoriaMarca(e){Me.default.fire({title:"\xBFEst\xE1s seguro?",text:"No podr\xE1s revertir esto.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xED, eliminarlo"}).then(r=>{r.isConfirmed&&this.categoriMarcarService.deleteCategoriaMarca(e).subscribe({next:()=>{Me.default.fire("Eliminado","La categoria marca ha sido eliminada.","success"),this.cargarCategoriaMarca()},error:t=>{Me.default.fire({icon:"error",title:"Error al eliminar categoria marca",text:t})}})})}editarCategoriaMarca(e){console.log(e)}MCOpen=!1;SCOpen=!1;openMCModal(){this.MCOpen=!this.MCOpen}openSCModal(){this.SCOpen=!this.SCOpen}static \u0275fac=function(r){return new(r||l)(_(Ne),_(Di))};static \u0275cmp=M({type:l,selectors:[["app-marca"]],standalone:!0,features:[I],decls:41,vars:2,consts:[["modalEditarCategoriaMarca",""],[1,"text-2xl","font-bold","mb-4","text-center"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-4"],[1,"bg-white","dark:bg-gray-800","overflow-hidden","shadow-sm","sm:rounded-lg"],[1,"p-4","text-gray-900","dark:text-gray-100"],[1,"text-xl","font-semibold","mb-4"],["type","button",1,"w-full","sm:w-auto","text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","mb-4","dark:bg-blue-600","dark:hover:bg-blue-700","focus:outline-none","dark:focus:ring-blue-800",3,"click"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600","cursor-pointer"],["tabindex","-1","aria-hidden","true","class","fixed inset-0 z-50 overflow-y-auto",4,"ngIf"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600","cursor-pointer",3,"click"],["scope","row",1,"px-6","py-4","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"px-6","py-4"],["tabindex","-1","aria-hidden","true",1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"fixed","inset-0","bg-black","bg-opacity-50"],[1,"relative","flex","items-center","justify-center","min-h-screen","p-4"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700","max-w-2xl","w-full"],[1,"flex","items-center","justify-between","p-4","md:p-5","border-b","rounded-t","dark:border-gray-600"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],["type","button",1,"text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","inline-flex","justify-center","items-center","dark:hover:bg-gray-600","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],[1,"p-4","md:p-5","space-y-4"],[1,"mb-4","text-xl","font-medium","text-gray-900","dark:text-white"],["action","#",1,"space-y-6"],["for","nombreCategoria",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","nombreCategoria","name","nombre","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white",3,"ngModelChange","ngModel"],["type","button",1,"w-full","text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],["for","nombre",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","nombre","name","nombre","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white",3,"ngModelChange","ngModel"],[1,"modal-header","d-flex","justify-content-center","align-items-center"],[1,"modal-title"],[1,"modal-body"]],template:function(r,t){if(r&1){let o=w();i(0,"h1",1),a(1,` Inventario Marca / Categoria Marca
`),n(),i(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),a(6,"Tabla Marca"),n(),i(7,"button",6),h("click",function(){return g(o),p(t.openMCModal())}),a(8," Crear Marca "),n(),i(9,"div",7)(10,"table",8)(11,"thead",9)(12,"tr")(13,"th",10),a(14,"ID"),n(),i(15,"th",10),a(16,"Nombre"),n()()(),i(17,"tbody"),P(18,un,5,2,"tr",11,A),n()()()()(),i(20,"div",3)(21,"div",4)(22,"h2",5),a(23,"Tabla Categoria Marca"),n(),i(24,"button",6),h("click",function(){return g(o),p(t.openSCModal())}),a(25," Crear Categoria Marca "),n(),i(26,"div",7)(27,"table",8)(28,"thead",9)(29,"tr")(30,"th",10),a(31,"ID"),n(),i(32,"th",10),a(33,"Nombre"),n()()(),i(34,"tbody"),P(35,mn,5,2,"tr",11,A),n()()()()()(),E(37,gn,22,1,"div",12)(38,pn,22,1,"div",12)(39,hn,4,0,"ng-template",null,0,Jt)}r&2&&(d(18),T(t.Marca),d(17),T(t.CategoriaMarca),d(2),b("ngIf",t.MCOpen),d(),b("ngIf",t.SCOpen))},dependencies:[L,J,G,z,Z,me,j,Q,D,$]})}return l})();var bn=["chart"],Oi=(()=>{let c=class c{constructor(){this.autoUpdateSeries=!0,this.chartReady=new re,this.chartInstance=Je(null),this.ngZone=W(Re),this.isBrowser=$t(W(Qe))}ngOnChanges(r){this.isBrowser&&this.ngZone.runOutsideAngular(()=>{Vt.schedule(()=>this.hydrate(r))})}ngOnDestroy(){this.destroy()}hydrate(r){if(this.autoUpdateSeries&&Object.keys(r).filter(o=>o!=="series").length===0){this.updateSeries(this.series,!0);return}this.createElement()}createElement(){return Be(this,null,function*(){let{default:r}=yield import("./chunk-67YJL3SO.js");window.ApexCharts||=r;let t={};this.annotations&&(t.annotations=this.annotations),this.chart&&(t.chart=this.chart),this.colors&&(t.colors=this.colors),this.dataLabels&&(t.dataLabels=this.dataLabels),this.series&&(t.series=this.series),this.stroke&&(t.stroke=this.stroke),this.labels&&(t.labels=this.labels),this.legend&&(t.legend=this.legend),this.fill&&(t.fill=this.fill),this.tooltip&&(t.tooltip=this.tooltip),this.plotOptions&&(t.plotOptions=this.plotOptions),this.responsive&&(t.responsive=this.responsive),this.markers&&(t.markers=this.markers),this.noData&&(t.noData=this.noData),this.xaxis&&(t.xaxis=this.xaxis),this.yaxis&&(t.yaxis=this.yaxis),this.forecastDataPoints&&(t.forecastDataPoints=this.forecastDataPoints),this.grid&&(t.grid=this.grid),this.states&&(t.states=this.states),this.title&&(t.title=this.title),this.subtitle&&(t.subtitle=this.subtitle),this.theme&&(t.theme=this.theme),this.destroy();let o=this.ngZone.runOutsideAngular(()=>new r(this.chartElement.nativeElement,t));this.chartInstance.set(o),this.render(),this.chartReady.emit({chartObj:o})})}render(){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.render())}updateOptions(r,t,o,s){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.updateOptions(r,t,o,s))}updateSeries(r,t){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.updateSeries(r,t))}appendSeries(r,t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.appendSeries(r,t))}appendData(r){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.appendData(r))}highlightSeries(r){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.highlightSeries(r))}toggleSeries(r){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.toggleSeries(r))}showSeries(r){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.showSeries(r))}hideSeries(r){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.hideSeries(r))}resetSeries(){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.resetSeries())}zoomX(r,t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.zoomX(r,t))}toggleDataPointSelection(r,t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.toggleDataPointSelection(r,t))}destroy(){this.chartInstance()?.destroy(),this.chartInstance.set(null)}setLocale(r){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.setLocale(r))}paper(){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.paper())}addXaxisAnnotation(r,t,o){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addXaxisAnnotation(r,t,o))}addYaxisAnnotation(r,t,o){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addYaxisAnnotation(r,t,o))}addPointAnnotation(r,t,o){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addPointAnnotation(r,t,o))}removeAnnotation(r,t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.removeAnnotation(r,t))}clearAnnotations(r){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.clearAnnotations(r))}dataURI(r){return this.chartInstance()?.dataURI(r)}};c.\u0275fac=function(t){return new(t||c)},c.\u0275cmp=M({type:c,selectors:[["apx-chart"]],viewQuery:function(t,o){if(t&1&&ve(bn,7),t&2){let s;ye(s=_e())&&(o.chartElement=s.first)}},inputs:{chart:"chart",annotations:"annotations",colors:"colors",dataLabels:"dataLabels",series:"series",stroke:"stroke",labels:"labels",legend:"legend",markers:"markers",noData:"noData",fill:"fill",tooltip:"tooltip",plotOptions:"plotOptions",responsive:"responsive",xaxis:"xaxis",yaxis:"yaxis",forecastDataPoints:"forecastDataPoints",grid:"grid",states:"states",title:"title",subtitle:"subtitle",theme:"theme",autoUpdateSeries:"autoUpdateSeries"},outputs:{chartReady:"chartReady"},standalone:!0,features:[Oe,I],decls:2,vars:0,consts:[["chart",""]],template:function(t,o){t&1&&m(0,"div",null,0)},encapsulation:2,changeDetection:0});let l=c;return l})();var Ai=(()=>{let c=class c{};c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=Fe({type:c}),c.\u0275inj=De({});let l=c;return l})();var xn=["chartmultiline"],Li=(()=>{class l{reporteService;chartmultiline;chartOptionsMultiline;constructor(e){this.reporteService=e,this.chartOptionsMultiline={series:[],chart:{height:350,type:"line",dropShadow:{enabled:!0,color:"#000",top:18,left:7,blur:10,opacity:.2},zoom:{enabled:!1},toolbar:{show:!1}},colors:["#77B6EA","#545454"],dataLabels:{enabled:!0},stroke:{curve:"smooth"},title:{text:"Ventas diarias por usuario",align:"left"},grid:{borderColor:"#e7e7e7",row:{colors:["#f3f3f3","transparent"],opacity:.5}},markers:{size:1},xaxis:{categories:[],title:{text:"Date"}},yaxis:{title:{text:"Ventas"},min:0},legend:{position:"top",horizontalAlign:"right",floating:!0,offsetY:-25,offsetX:-5}}}ngOnInit(){this.reporteService.getVentasReporte().subscribe(e=>{console.log(e),this.chartOptionsMultiline.series=e.series,this.chartOptionsMultiline.xaxis.categories=e.fechas})}static \u0275fac=function(r){return new(r||l)(_(lt))};static \u0275cmp=M({type:l,selectors:[["app-reportes"]],viewQuery:function(r,t){if(r&1&&ve(xn,5),r&2){let o;ye(o=_e())&&(t.chartmultiline=o.first)}},standalone:!0,features:[I],decls:2,vars:10,consts:[["id","chartmultiline"],[3,"series","chart","colors","xaxis","yaxis","dataLabels","grid","stroke","title","legend"]],template:function(r,t){r&1&&(i(0,"div",0),m(1,"apx-chart",1),n()),r&2&&(d(),b("series",t.chartOptionsMultiline.series)("chart",t.chartOptionsMultiline.chart)("colors",t.chartOptionsMultiline.colors)("xaxis",t.chartOptionsMultiline.xaxis)("yaxis",t.chartOptionsMultiline.yaxis)("dataLabels",t.chartOptionsMultiline.dataLabels)("grid",t.chartOptionsMultiline.grid)("stroke",t.chartOptionsMultiline.stroke)("title",t.chartOptionsMultiline.title)("legend",t.chartOptionsMultiline.legend))},dependencies:[Ai,Oi]})}return l})();var wl=[{path:"",component:gi,children:[{path:"",component:mi},{path:"comprobantes",component:fi},{path:"admin-user",component:yi},{path:"pedidos",component:Si},{path:"inventario",component:ui},{path:"inventario/:id",component:Ei},{path:"ingreso",component:wt},{path:"ingreso/:id",component:wt},{path:"salida",component:Et},{path:"salida/:id",component:Et},{path:"publicitarias",component:wi},{path:"entidades",component:ki},{path:"cotizaciones",component:Ii},{path:"categoria",component:Vi},{path:"marca",component:Fi},{path:"cotizaciones/nuevo",component:Pi},{path:"reportes",component:Li}]}],kl=(()=>{class l{static \u0275fac=function(r){return new(r||l)};static \u0275mod=Fe({type:l});static \u0275inj=De({imports:[Ue.forRoot(oi),Ue]})}return l})();export{kl as AppRoutingModule,wl as default};
