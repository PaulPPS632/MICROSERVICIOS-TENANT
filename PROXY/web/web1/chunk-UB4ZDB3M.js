import{a as ie}from"./chunk-F7NXYMZD.js";import{a as ee}from"./chunk-AYLNQSQX.js";import{a as te}from"./chunk-A7ZA3IGE.js";import{b as Y,c as J,d as W}from"./chunk-XGW73OEQ.js";import{e as X}from"./chunk-4L4BNWNP.js";import{c as K}from"./chunk-VTA27IR3.js";import{Ab as Z,Bb as H,Cb as L,Eb as c,Gb as g,Hb as k,Lb as $,Mb as N,N as E,Na as z,Oa as S,Ra as l,Rb as _,S as y,Sa as b,Sb as w,X as T,Y as f,aa as V,eb as R,g as D,gb as u,ja as p,ka as s,kb as A,la as j,lb as B,ma as M,nb as F,ob as U,pb as a,q as I,qb as n,rb as v,ta as O,ub as C,uc as Q,vb as h,vc as q,wb as x,wc as G}from"./chunk-LXSEPEJS.js";import"./chunk-GAL4ENT6.js";var re=(()=>{class o{productsService=f(ee);initialState={product:null,status:"loading"};stateSubject=new D(this.initialState);state$=this.stateSubject.asObservable();state=Y({initialState:this.initialState,actionSources:{getById:(i,t)=>t.pipe(E(e=>this.productsService.getProduct(e)),I(e=>({product:e,status:"success"})))}});static \u0275fac=function(t){return new(t||o)};static \u0275prov=y({token:o,factory:o.\u0275fac})}return o})();var ne=(()=>{class o{http;apiURL="https://api.exchangerate-api.com/v4/latest/PEN";constructor(i){this.http=i}getCambio(){return this.http.get(this.apiURL)}static \u0275fac=function(t){return new(t||o)(T(K))};static \u0275prov=y({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var le=["imageRef"];function ce(o,P){if(o&1&&v(0,"div",7),o&2){let i=x();u("ngStyle",i.zoomStyle)}}function pe(o,P){if(o&1){let i=C();a(0,"div",10)(1,"img",11),h("click",function(e){p(i);let r=x();return s(r.mostrarimg(e))})("keyup.enter",function(e){p(i);let r=x();return s(r.mostrarimg(e))}),n()()}if(o&2){let i=P.$implicit;l(),u("src",i,S)}}var Ie=(()=>{class o{route;mond;url=W.API_URL;productService=f(ie);cartState=f(J).state;producto=null;imagenprincipal="";id=O.required();cambio=1;precioEnDolares=0;precios={precioOrigSol:0,precioOrigDolar:0,precio5Sol:0,precio5Dol:0};imageRef;zoomStyle={backgroundImage:"",backgroundPosition:"0% 0%",backgroundSize:"0%"};isZoomActive=!1;constructor(i,t){this.route=i,this.mond=t}ngOnInit(){te(),this.route.paramMap.subscribe(i=>{let t=i.get("id")??"";this.productService.getProductoById(t).subscribe(e=>{this.producto=e,this.imagenprincipal=this.producto.imagen_principal,this.mond.getCambio().subscribe(r=>{this.cambio=r.rates.USD,this.convertirADolares()})})})}convertirADolares(){this.producto&&this.producto.precio&&(this.precios.precioOrigSol=this.producto.precio,this.precios.precioOrigDolar=this.producto.precio*this.cambio,this.precios.precio5Sol=this.producto.precio*1.05,this.precios.precio5Dol=this.precios.precio5Sol*this.cambio)}addToCart(){this.cartState.add({product:this.producto,quantity:1})}mostrarimg(i){let t=i.target;this.imagenprincipal=t.src}zoomImage(i){this.isZoomActive=!0;let t=this.imageRef.nativeElement.getBoundingClientRect(),e=i.clientX-t.left,r=i.clientY-t.top,m=e/t.width*100,d=r/t.height*100;this.zoomStyle={backgroundImage:`url(${this.imagenprincipal})`,backgroundPosition:`${m}% ${d}%`,backgroundSize:"200%"}}resetZoom(){this.isZoomActive=!1}static \u0275fac=function(t){return new(t||o)(b(X),b(ne))};static \u0275cmp=V({type:o,selectors:[["app-producto-detalle"]],viewQuery:function(t,e){if(t&1&&Z(le,5),t&2){let r;H(r=L())&&(e.imageRef=r.first)}},inputs:{id:[1,"id"]},standalone:!0,features:[$([re]),N],decls:49,vars:25,consts:[["imageRef",""],[1,"py-8","bg-white","md:py-16","dark:bg-gray-900","antialiased"],[1,"max-w-screen-xl","px-4","mx-auto","2xl:px-0"],[1,"lg:grid","lg:grid-cols-2","lg:gap-8","xl:gap-16"],[1,"shrink-0","max-w-md","lg:max-w-lg","mx-auto"],[1,"w-full","h-full","image-container",3,"mousemove","mouseleave"],["alt","IMAGEN PRODUCTO",1,"w-full","product-image",3,"src"],[1,"zoom-area",3,"ngStyle"],[1,"flex","gap-3"],[1,"flex","flex-row","gap-2"],[1,"w-16","shadow-md"],["alt","imagen","tabindex","0",1,"w-full","object-cover","cursor-pointer",3,"click","keyup.enter","src"],[1,"mt-6","sm:mt-8","lg:mt-0"],[1,"text-xl","font-semibold","text-gray-900","sm:text-2xl","dark:text-white"],[1,"flex","flex-row","flex-nowrap","justify-between","mt-5"],[1,"flex","flex-col","flex-nowrap","justify-between"],[1,"text-sm","font-medium","leading-none","text-gray-500","dark:text-gray-400"],["title","","role","button","tabindex","0",1,"w-fit","inline-flex","items-center","rounded-lg","bg-blue-700","px-5","py-2.5","text-sm","font-medium","text-white","hover:bg-blue-800","focus:outline-none","focus:ring-4","focus:ring-blue-300","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click","keyup.enter"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-5","h-5","-ms-2","me-2"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4h1.5L8 16m0 0h8m-8 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm8 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm.75-3H7.5M11 7H6.312M17 4v6m-3-3h6"],[1,"flex","flex-col","flex-nowrap","my-2"],[1,"text-2xl","font-extrabold","text-gray-900","sm:text-3xl","dark:text-white"],[1,"my-6","md:my-8","border-gray-200","dark:border-gray-800"],[3,"innerHTML"]],template:function(t,e){if(t&1){let r=C();a(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),h("mousemove",function(d){return p(r),s(e.zoomImage(d))})("mouseleave",function(){return p(r),s(e.resetZoom())}),v(5,"img",6,0),R(7,ce,1,1,"div",7),n(),a(8,"div",8)(9,"div",9)(10,"div",10)(11,"img",11),h("click",function(d){return p(r),s(e.mostrarimg(d))})("keyup.enter",function(d){return p(r),s(e.mostrarimg(d))}),n()(),F(12,pe,2,1,"div",10,B),n()()(),a(14,"div",12)(15,"h1",13),c(16),n(),a(17,"div",14)(18,"div",15)(19,"p",16),c(20),n(),a(21,"p",16),c(22),n(),a(23,"p",16),c(24),n(),a(25,"p",16),c(26),n(),a(27,"a",17),h("click",function(){return p(r),s(e.addToCart())})("keyup.enter",function(){return p(r),s(e.addToCart())}),j(),a(28,"svg",18),v(29,"path",19),n(),M(),a(30,"span"),c(31,"A\xF1adir al carrito"),n()()(),a(32,"div")(33,"div",20)(34,"p",16),c(35," Pagando con Efectivo "),n(),a(36,"p",21),c(37),_(38,"currency"),_(39,"currency"),n()(),a(40,"div",20)(41,"p",16),c(42," Pagando con Tarjeta (+5%) "),n(),a(43,"p",21),c(44),_(45,"currency"),_(46,"currency"),n()()()(),v(47,"hr",22)(48,"div",23),n()()()()}t&2&&(l(5),u("src",e.imagenprincipal,S),l(2),A(e.isZoomActive?7:-1),l(4),u("src",e.producto==null?null:e.producto.imagen_principal,S),l(),U(e.producto==null?null:e.producto.imageurl),l(4),g(" ",e.producto==null?null:e.producto.nombre," "),l(4),g(" STOCK: ",e.producto==null?null:e.producto.stock," "),l(2),g(" PN: ",e.producto==null?null:e.producto.pn," "),l(2),g(" Marca: ",e.producto==null?null:e.producto.Marca," "),l(2),g(" Categoria: ",e.producto==null?null:e.producto.Categoria," "),l(11),k(" ",w(38,13,e.precios.precioOrigSol,"S/. ")," - ",w(39,16,e.precios.precioOrigDolar,"$ ")," "),l(7),k(" ",w(45,19,e.precios.precio5Sol,"S/. ")," - ",w(46,22,e.precios.precio5Dol,"$ ")," "),l(4),u("innerHTML",e.producto==null?null:e.producto.descripcion,z))},dependencies:[q,G,Q],styles:[".image-container[_ngcontent-%COMP%]{position:relative;overflow:hidden;width:300px;height:300px}.product-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;transition:opacity .3s}.zoom-area[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-repeat:no-repeat;pointer-events:none}"]})}return o})();export{Ie as default};
