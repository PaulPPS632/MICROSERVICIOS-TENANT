import{a as J}from"./chunk-LCKIYHSX.js";import{a as X}from"./chunk-SJWRDQVH.js";import{a as j,b as B,c as L,d as q,e as P,f as G,k as U,l as z}from"./chunk-IUFCXTOM.js";import{a as H,c as W}from"./chunk-IRNCR7DW.js";import{a as N,c as A}from"./chunk-FRM5A7CD.js";import{l as D,m as O,p as F}from"./chunk-FFKOQB2C.js";import{Aa as M,N as V,Na as S,Qa as C,S as w,Wa as e,X as R,Xa as r,Ya as x,Za as v,ab as m,bb as c,ea as s,fa as u,ga as k,ha as E,hb as a,ib as p,jb as I,lb as h,mb as f,nb as y,pb as T,za as d}from"./chunk-SLZJNV7T.js";import{e as Q}from"./chunk-EQDQRRRY.js";var b=Q(X());var _=class l{constructor(i,t){this.http=i;this.authService=t;this.authService.usuario$.subscribe(n=>{this.tenantId=n.tenantId,console.log("Tenant ID:",this.tenantId)})}apiUrl=H.API_URL+"/inventory/subcategoria";tenantId=null;getHeaders(){return new N({Authorization:`Bearer ${localStorage.getItem("authToken")}`,tenantId:this.tenantId||""})}getSubCategorias(){return this.http.get(this.apiUrl,{headers:this.getHeaders()})}deleteSubCategoria(i){return this.http.delete(`${this.apiUrl}/${i}`,{headers:this.getHeaders()})}static \u0275fac=function(t){return new(t||l)(w(A),w(W))};static \u0275prov=V({token:l,factory:l.\u0275fac,providedIn:"root"})};function $(l,i){if(l&1){let t=v();e(0,"tr",13),m("click",function(){let o=s(t).$implicit,g=c();return u(g.seleccionarCategoria(o.id))}),e(1,"th",14),a(2),r(),e(3,"td",15),a(4),r(),e(5,"td",15),a(6),r()()}if(l&2){let t=i.$implicit;d(2),p(t.id),d(2),p(t.nombre),d(2),p(t.descripcion)}}function ee(l,i){if(l&1&&(e(0,"tr",16)(1,"th",14),a(2),r(),e(3,"td",15),a(4),r(),e(5,"td",15),a(6),r()()),l&2){let t=i.$implicit;d(2),p(t.id),d(2),p(t.nombre),d(2),p(t.descripcion)}}function te(l,i){if(l&1){let t=v();e(0,"div",17),x(1,"div",18),e(2,"div",19)(3,"div",20)(4,"div",21)(5,"h3",22),a(6),r(),e(7,"button",23),m("click",function(){s(t);let o=c();return u(o.CCOpen=!1)}),k(),e(8,"svg",24),x(9,"path",25),r(),E(),e(10,"span",26),a(11,"Close modal"),r()()(),e(12,"div",27)(13,"h3",28),a(14,"A\xF1adir Categor\xEDa"),r(),e(15,"form",29)(16,"div")(17,"label",30),a(18,"Nombre:"),r(),e(19,"input",31),y("ngModelChange",function(o){s(t);let g=c();return f(g.nuevaCategoria.nombre,o)||(g.nuevaCategoria.nombre=o),u(o)}),r()(),e(20,"div")(21,"label",32),a(22,"Descripci\xF3n:"),r(),e(23,"input",33),y("ngModelChange",function(o){s(t);let g=c();return f(g.nuevaCategoria.descripcion,o)||(g.nuevaCategoria.descripcion=o),u(o)}),r()(),e(24,"button",34),m("click",function(){s(t);let o=c();return u(o.guardarCategoria())}),a(25,"Guardar Categor\xEDa"),r()()()()()()}if(l&2){let t=c();d(6),I(" ",t.name_modal," "),d(13),h("ngModel",t.nuevaCategoria.nombre),d(4),h("ngModel",t.nuevaCategoria.descripcion)}}function re(l,i){if(l&1){let t=v();e(0,"div",17),x(1,"div",18),e(2,"div",19)(3,"div",20)(4,"div",21)(5,"h3",22),a(6),r(),e(7,"button",23),m("click",function(){s(t);let o=c();return u(o.SCOpen=!1)}),k(),e(8,"svg",24),x(9,"path",25),r(),E(),e(10,"span",26),a(11,"Close modal"),r()()(),e(12,"div",27)(13,"h3",28),a(14,"A\xF1adir SubCategor\xEDa"),r(),e(15,"form",29)(16,"div")(17,"label",35),a(18,"Nombre:"),r(),e(19,"input",36),y("ngModelChange",function(o){s(t);let g=c();return f(g.nuevaSubcategoria.nombre,o)||(g.nuevaSubcategoria.nombre=o),u(o)}),r()(),e(20,"div")(21,"label",37),a(22,"Descripci\xF3n:"),r(),e(23,"input",38),y("ngModelChange",function(o){s(t);let g=c();return f(g.nuevaSubcategoria.descripcion,o)||(g.nuevaSubcategoria.descripcion=o),u(o)}),r()(),e(24,"button",34),m("click",function(){s(t);let o=c();return u(o.guardarSubCategoria())}),a(25,"Guardar SubCategor\xEDa"),r()()()()()()}if(l&2){let t=c();d(6),I(" ",t.name_modal," "),d(13),h("ngModel",t.nuevaSubcategoria.nombre),d(4),h("ngModel",t.nuevaSubcategoria.descripcion)}}var K=class l{constructor(i,t){this.categoriaService=i;this.subcategoriaService=t}closeResult="";CategoriaSelect=0;Categoria=[];Subcategoria=[];nuevaCategoria={nombre:"",descripcion:""};nuevaSubcategoria={nombre:"",descripcion:"",id_categoria:0};ngOnInit(){this.cargarCategoria()}cargarCategoria(){this.categoriaService.getAll().subscribe(i=>{this.Categoria=i},i=>{console.error("Error al obtener las categorias:",i)})}guardarCategoria(){console.log(this.nuevaCategoria),this.categoriaService.postCategoria(this.nuevaCategoria).subscribe({next:()=>{b.default.fire({icon:"success",title:"Categoria agregada",text:"La categoria ha sido agregado al inventario."}),this.cargarCategoria()},error:i=>{b.default.fire({icon:"error",title:"Categoria no agregada",text:i})}})}guardarSubCategoria(){this.nuevaSubcategoria.id_categoria=this.CategoriaSelect,this.categoriaService.postSubCategoria(this.nuevaSubcategoria).subscribe({next:()=>{b.default.fire({icon:"success",title:"Subcategor\xEDa agregada",text:"La subcategor\xEDa ha sido agregada correctamente."}),this.cargarSubcategorias()},error:i=>{b.default.fire({icon:"error",title:"Error al agregar subcategor\xEDa",text:i})}}),this.nuevaSubcategoria={nombre:"",descripcion:"",id_categoria:this.CategoriaSelect}}cargarSubcategorias(){this.categoriaService.getSubs(this.CategoriaSelect).subscribe(i=>{this.Subcategoria=i,console.log("Subcategoria cargada.")},i=>{console.error("Error al obtener subcategor\xEDas: ",i)})}seleccionarCategoria(i){this.CategoriaSelect=i,this.categoriaService.getSubs(this.CategoriaSelect).subscribe(t=>{this.Subcategoria=t},t=>{console.error("Error: ",t)})}eliminarSubCategoria(i){b.default.fire({title:"\xBFEst\xE1s seguro?",text:"No podr\xE1s revertir esto.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xED, eliminarlo"}).then(t=>{t.isConfirmed&&this.subcategoriaService.deleteSubCategoria(i).subscribe({next:()=>{b.default.fire("Eliminado","La subcategor\xEDa ha sido eliminada.","success"),this.cargarSubcategorias()},error:n=>{b.default.fire({icon:"error",title:"Error al eliminar subcategor\xEDa",text:n})}})})}abrirModal(i){}getDismissReason(i){return`Closed with: ${i}`}CCOpen=!1;SCOpen=!1;name_modal="CREAR";openCCModal(){this.name_modal="CREAR",this.CCOpen=!0}openSCModal(){this.name_modal="CREAR",this.SCOpen=!0}static \u0275fac=function(t){return new(t||l)(M(J),M(_))};static \u0275cmp=R({type:l,selectors:[["app-category"]],standalone:!0,features:[T],decls:41,vars:4,consts:[[1,"text-2xl","font-bold","mb-4","text-center"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-4"],[1,"bg-white","dark:bg-gray-800","overflow-hidden","shadow-sm","sm:rounded-lg"],[1,"p-4","text-gray-900","dark:text-gray-100"],[1,"text-xl","font-semibold","mb-4"],["type","button",1,"w-full","sm:w-auto","text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","mb-4","dark:bg-blue-600","dark:hover:bg-blue-700","focus:outline-none","dark:focus:ring-blue-800",3,"click"],[1,"overflow-x-auto"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],["class","bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",3,"click",4,"ngFor","ngForOf"],["class","bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",4,"ngFor","ngForOf"],["tabindex","-1","aria-hidden","true","class","fixed inset-0 z-50 overflow-y-auto",4,"ngIf"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600",3,"click"],["scope","row",1,"px-6","py-4","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"px-6","py-4"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600"],["tabindex","-1","aria-hidden","true",1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"fixed","inset-0","bg-black","bg-opacity-50"],[1,"relative","flex","items-center","justify-center","min-h-screen","p-4"],[1,"relative","bg-white","rounded-lg","shadow","dark:bg-gray-700","max-w-2xl","w-full"],[1,"flex","items-center","justify-between","p-4","md:p-5","border-b","rounded-t","dark:border-gray-600"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white"],["type","button",1,"text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","inline-flex","justify-center","items-center","dark:hover:bg-gray-600","dark:hover:text-white",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 14",1,"w-3","h-3"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"sr-only"],[1,"p-4","md:p-5","space-y-4"],[1,"mb-4","text-xl","font-medium","text-gray-900","dark:text-white"],["action","#",1,"space-y-6"],["for","nombreCategoria",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","nombreCategoria","name","nombre","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white",3,"ngModelChange","ngModel"],["for","descripcionCategoria",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","descripcionCategoria","name","descripcion","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white",3,"ngModelChange","ngModel"],["type","button",1,"w-full","text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800",3,"click"],["for","nombre",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","nombre","name","nombre","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white",3,"ngModelChange","ngModel"],["for","descripcion",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","id","descripcion","name","descripcion","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-600","dark:border-gray-500","dark:placeholder-gray-400","dark:text-white",3,"ngModelChange","ngModel"]],template:function(t,n){t&1&&(e(0,"h1",0),a(1,"Inventario Categor\xEDa / SubCategor\xEDa"),r(),e(2,"div",1)(3,"div",2)(4,"div",3)(5,"h2",4),a(6,"Tabla Categor\xEDa"),r(),e(7,"button",5),m("click",function(){return n.openCCModal()}),a(8,"Crear Categor\xEDa"),r(),e(9,"div",6)(10,"table",7)(11,"thead",8)(12,"tr")(13,"th",9),a(14,"ID"),r(),e(15,"th",9),a(16,"Nombre"),r(),e(17,"th",9),a(18,"Descripci\xF3n"),r()()(),e(19,"tbody"),S(20,$,7,3,"tr",10),r()()()()(),e(21,"div",2)(22,"div",3)(23,"h2",4),a(24,"Tabla SubCategor\xEDa"),r(),e(25,"button",5),m("click",function(){return n.openSCModal()}),a(26,"Crear SubCategor\xEDa"),r(),e(27,"div",6)(28,"table",7)(29,"thead",8)(30,"tr")(31,"th",9),a(32,"ID"),r(),e(33,"th",9),a(34,"Nombre"),r(),e(35,"th",9),a(36,"Descripci\xF3n"),r()()(),e(37,"tbody"),S(38,ee,7,3,"tr",11),r()()()()()(),S(39,te,26,3,"div",12)(40,re,26,3,"div",12)),t&2&&(d(20),C("ngForOf",n.Categoria),d(18),C("ngForOf",n.Subcategoria),d(),C("ngIf",n.CCOpen),d(),C("ngIf",n.SCOpen))},dependencies:[z,G,j,B,L,U,P,q,F,D,O]})};export{K as CategoryComponent};
