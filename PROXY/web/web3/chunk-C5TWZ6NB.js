import{a as j}from"./chunk-KTRCS3B2.js";import{a as H}from"./chunk-G5R4ZXZD.js";import{a as $}from"./chunk-NHIA7WN2.js";import{a as J}from"./chunk-SJWRDQVH.js";import{b as O,e as L,h as V,i as C,j as y,l as S}from"./chunk-IUFCXTOM.js";import{c as B}from"./chunk-IRNCR7DW.js";import{f as P}from"./chunk-OMO3MP2D.js";import"./chunk-FRM5A7CD.js";import{p as U}from"./chunk-FFKOQB2C.js";import{Qa as d,T as w,Ta as c,Ua as u,Va as g,Wa as n,X as h,Xa as i,Ya as b,ab as p,bb as x,ga as N,hb as m,ib as D,jb as f,lb as F,ma as k,mb as M,nb as I,pb as _,qb as A,sb as R,za as o}from"./chunk-SLZJNV7T.js";import{e as z}from"./chunk-EQDQRRRY.js";var K=(r,t)=>[r,t];function Q(r,t){if(r&1&&(n(0,"th",3),m(1),i()),r&2){let a=t.$implicit;o(),f(" ",a," ")}}function X(r,t){if(r&1&&(n(0,"td",5),m(1),i()),r&2){let a=t.$implicit,e=x().$implicit;o(),f(" ",e[a]," ")}}function Y(r,t){if(r&1&&(n(0,"tr",4),u(1,X,2,1,"td",5,c),n(3,"td",6)(4,"div",7),N(),n(5,"svg",8),b(6,"path",9),i()()()()),r&2){let a=t.$implicit,e=x();o(),g(e.columns),o(3),d("routerLink",R(1,K,"/"+e.ruta,a.id))}}function Z(r,t){r&1&&(n(0,"tr",4)(1,"td",5),m(2," No hay datos disponibles. "),i()())}var v=class r{data=[];columns=[];ruta="";param="";static \u0275fac=function(a){return new(a||r)};static \u0275cmp=h({type:r,selectors:[["app-tables"]],inputs:{data:"data",columns:"columns",ruta:"ruta",param:"param"},standalone:!0,features:[_],decls:12,vars:1,consts:[[1,"relative","overflow-x-auto","shadow-md","sm:rounded-lg"],[1,"w-full","text-sm","text-left","rtl:text-right","text-white"],[1,"text-xs","text-white","uppercase","bg-blue-700"],["scope","col",1,"px-6","py-3","font-bold"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600"],[1,"px-6","py-4","font-bold","text-gray-800","dark:text-white"],[1,"px-6","py-4","font-bold"],[3,"routerLink"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-6","h-6","hover:text-teal-800","hover:scale-105","cursor-pointer","text-gray-800","dark:text-white"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18 14v4.833A1.166 1.166 0 0 1 16.833 20H5.167A1.167 1.167 0 0 1 4 18.833V7.167A1.166 1.166 0 0 1 5.167 6h4.618m4.447-2H20v5.768m-7.889 2.121 7.778-7.778"]],template:function(a,e){a&1&&(n(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr"),u(4,Q,2,1,"th",3,c),n(6,"th",3),m(7," Accion "),i()()(),n(8,"tbody"),u(9,Y,7,4,"tr",4,c,!1,Z,3,0,"tr",4),i()()()),a&2&&(o(4),g(e.columns),o(5),g(e.data))},dependencies:[P,U]})};function te(r,t){if(r&1&&(n(0,"option",4),m(1),i()),r&2){let a=t.$implicit;d("value",a.id),o(),f(" ",a.nombre,"")}}var E=class r{Name="";Data=[];Selected;SelectedChange=new k;onValueChange(t){this.SelectedChange.emit(t)}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=h({type:r,selectors:[["app-select"]],inputs:{Name:"Name",Data:"Data",Selected:"Selected"},outputs:{SelectedChange:"SelectedChange"},standalone:!0,features:[_],decls:8,vars:5,consts:[[1,"mb-6"],[1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white",3,"for"],[1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-teal-500","focus:border-teal-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-teal-500","dark:focus:border-teal-500",3,"ngModelChange","id","name","ngModel"],["value","","disabled","","selected",""],[1,"text-gray-900",3,"value"]],template:function(a,e){a&1&&(n(0,"div",0)(1,"label",1),m(2),i(),n(3,"select",2),I("ngModelChange",function(l){return M(e.Selected,l)||(e.Selected=l),l}),p("ngModelChange",function(l){return e.onValueChange(l)}),n(4,"option",3),m(5,"Elegir..."),i(),u(6,te,2,2,"option",4,c),i()()),a&2&&(o(),d("for",e.Name+"Select"),o(),D(e.Name),o(),d("id",e.Name+"Select")("name",e.Name+"Select"),F("ngModel",e.Selected),o(3),g(e.Data))},dependencies:[S,C,y,V,O,L]})};var T=z(J());var ne=()=>["id","nombre","apellido","documento","email","RolId"];function ae(r,t){if(r&1&&(n(0,"option",9),m(1),i()),r&2){let a=t.$implicit;d("value",a.id),o(),f(" ",a.nombre,"")}}var G=class r{entidadesService=w(j);authService=w(B);EntidadsuarioDueno=null;entidades=[];Filtro=[];FiltroRol=0;buscado="";FlagModal=!1;Roles=[{id:1,nombre:"administrador"},{id:2,nombre:"vendedor"},{id:3,nombre:"almacenero"},{id:4,nombre:"cliente"}];NewEntidad={nombre:"",apellido:"",documento:"",direccion:"",telefono:"",email:"",password:"",RolId:0,id_tipoEntidad:1};Buscador="";ngOnInit(){this.cargarEntidades()}cargarEntidades(){this.entidadesService.getEntidades().subscribe(t=>{this.entidades=t,this.Filtro=[...this.entidades]})}ToggleModal(){this.FlagModal=!this.FlagModal}AbrirModal(){this.entidades.length==0&&this.cargarEntidades(),this.ToggleModal()}Crear(){this.authService.create(this.NewEntidad).subscribe(t=>{this.ToggleModal(),T.default.fire({icon:"success",title:"Entidad Registrada",text:t.message})},t=>{T.default.fire({icon:"error",title:t.error.message})})}aplicarFiltro(){this.Filtro=this.entidades.filter(t=>{let a=t.nombre.toLowerCase().includes(this.buscado),e=this.FiltroRol===0||t.RolId===this.FiltroRol;return a&&e})}search(t){let a=t.target;this.buscado=a.value.toLowerCase(),this.aplicarFiltro()}BuscarRol(t){let a=t.target;this.FiltroRol=Number(a.value),this.aplicarFiltro()}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=h({type:r,selectors:[["app-admin-user"]],standalone:!0,features:[_],decls:28,vars:36,consts:[[1,"flex","flex-row","justify-between","py-7","px-2"],[1,"font-extrabold","text-3xl"],[1,"text-white","px-5","py-2","rounded-lg","bg-blue-700","hover:bg-teal-800","font-extrabold",3,"click"],[1,"mb-6"],["for","buscador",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],[1,"flex","items-center","space-x-3"],["type","text","id","buscador","name","buscador","placeholder","Buscar por nombre...","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-teal-500","focus:border-teal-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-teal-500","dark:focus:border-teal-500",3,"input"],["id","filtroRol","name","filtroRol","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-teal-500","focus:border-teal-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-teal-500","dark:focus:border-teal-500",3,"change"],["value","0","selected",""],[3,"value"],[3,"close","isOpen","title"],[3,"DataChange","Data","Name","Type","Placeholder"],[3,"SelectedChange","Data","Selected","Name"],["type","button",1,"text-white","w-full","px-5","py-2","font-extrabold","rounded-lg","bg-teal-900","hover:bg-teal-800",3,"click"],[3,"data","columns"]],template:function(a,e){a&1&&(n(0,"div",0)(1,"h1",1),m(2,"USUARIOS"),i(),n(3,"button",2),p("click",function(){return e.AbrirModal()}),m(4,"NUEVO"),i()(),n(5,"div",3)(6,"label",4),m(7,"Buscador"),i(),n(8,"div",5)(9,"input",6),p("input",function(l){return e.search(l)}),i(),n(10,"select",7),p("change",function(l){return e.BuscarRol(l)}),n(11,"option",8),m(12,"Todos..."),i(),u(13,ae,2,2,"option",9,c),i()()(),n(15,"app-modal",10),p("close",function(){return e.ToggleModal()}),n(16,"Form")(17,"app-input",11),p("DataChange",function(l){return e.NewEntidad.nombre=l}),i(),n(18,"app-input",11),p("DataChange",function(l){return e.NewEntidad.apellido=l}),i(),n(19,"app-input",11),p("DataChange",function(l){return e.NewEntidad.documento=l}),i(),n(20,"app-input",11),p("DataChange",function(l){return e.NewEntidad.direccion=l}),i(),n(21,"app-input",11),p("DataChange",function(l){return e.NewEntidad.telefono=l}),i(),n(22,"app-input",11),p("DataChange",function(l){return e.NewEntidad.email=l}),i(),n(23,"app-input",11),p("DataChange",function(l){return e.NewEntidad.password=l}),i(),n(24,"app-select",12),p("SelectedChange",function(l){return e.NewEntidad.RolId=l}),i(),n(25,"button",13),p("click",function(){return e.Crear()}),m(26,"CREAR"),i()()(),b(27,"app-tables",14)),a&2&&(o(13),g(e.Roles),o(2),d("isOpen",e.FlagModal)("title","Crear Curso"),o(2),d("Data",e.NewEntidad.nombre)("Name","Nombre")("Type","text")("Placeholder","Ingrese su Nombre"),o(),d("Data",e.NewEntidad.apellido)("Name","Apellido")("Type","text")("Placeholder","Ingrese su Apellido"),o(),d("Data",e.NewEntidad.documento)("Name","Documento")("Type","text")("Placeholder","Ingrese su Documento"),o(),d("Data",e.NewEntidad.direccion)("Name","Direccion")("Type","text")("Placeholder","Ingrese una Direccion"),o(),d("Data",e.NewEntidad.telefono)("Name","Telefono")("Type","text")("Placeholder","Ingrese un Telefono"),o(),d("Data",e.NewEntidad.email)("Name","Email")("Type","email")("Placeholder","Ingrese un Email"),o(),d("Data",e.NewEntidad.password)("Name","Password")("Type","password")("Placeholder","***********"),o(),d("Data",e.Roles)("Selected",e.NewEntidad.RolId)("Name","Rol"),o(3),d("data",e.Filtro)("columns",A(35,ne)))},dependencies:[H,$,v,E,S,C,y]})};export{G as AdminUserComponent};
